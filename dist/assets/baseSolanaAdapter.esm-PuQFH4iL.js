import{b as xe,c as Me,e as dt,s as ri,r as tn,d as q,_ as ee,T as ii,j as oi,l as sr,a as ai,m as li,C as si,v as fi}from"./index-L3ozMu8u.js";var di={exports:{}},It={exports:{}},J={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Uint8Array},fr={exports:{}};(function(e){const t=xe,n=Object.getPrototypeOf(async function(){}).constructor,r=globalThis.Blob||t.Blob,a=typeof r<"u"?function(b){return b instanceof r}:function(b){return!1};class l extends Error{constructor(b){if(!Array.isArray(b))throw new TypeError(`Expected input to be an Array, got ${typeof b}`);let p="";for(let u=0;u<b.length;u++)p+=`    ${b[u].stack}
`;super(p),this.name="AggregateError",this.errors=b}}e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(s){let b=!1;return function(...p){b||(b=!0,s.apply(this,p))}},createDeferredPromise:function(){let s,b;return{promise:new Promise((u,h)=>{s=u,b=h}),resolve:s,reject:b}},promisify(s){return new Promise((b,p)=>{s((u,...h)=>u?p(u):b(...h))})},debuglog(){return function(){}},format(s,...b){return s.replace(/%([sdifj])/g,function(...[p,u]){const h=b.shift();return u==="f"?h.toFixed(6):u==="j"?JSON.stringify(h):u==="s"&&typeof h=="object"?`${h.constructor!==Object?h.constructor.name:""} {}`.trim():h.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof n},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:a},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(fr);var _e=fr.exports,nn={};const{format:ui,inspect:ot,AggregateError:ci}=_e,hi=globalThis.AggregateError||ci,bi=Symbol("kIsNodeError"),gi=["string","function","number","object","Function","Object","boolean","bigint","symbol"],pi=/^([A-Z][a-z0-9]*)+$/,wi="__node_internal_",ut={};function ve(e,t){if(!e)throw new ut.ERR_INTERNAL_ASSERTION(t)}function En(e){let t="",n=e.length;const r=e[0]==="-"?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function yi(e,t,n){if(typeof t=="function")return ve(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const r=(t.match(/%[dfijoOs]/g)||[]).length;return ve(r===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?t:ui(t,...n)}function X(e,t,n){n||(n=Error);class r extends n{constructor(...l){super(yi(e,t,l))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[bi]=!0,ut[e]=r}function Rn(e){const t=wi+e.name;return Object.defineProperty(e,"name",{value:t}),e}function _i(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new hi([t,e],t.message);return n.code=t.code,n}return e||t}let mi=class extends Error{constructor(t="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new ut.ERR_INVALID_ARG_TYPE("options","Object",n);super(t,n),this.code="ABORT_ERR",this.name="AbortError"}};X("ERR_ASSERTION","%s",Error);X("ERR_INVALID_ARG_TYPE",(e,t,n)=>{ve(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const a=[],l=[],s=[];for(const p of t)ve(typeof p=="string","All expected entries have to be of type string"),gi.includes(p)?a.push(p.toLowerCase()):pi.test(p)?l.push(p):(ve(p!=="object",'The value "object" should be written as "Object"'),s.push(p));if(l.length>0){const p=a.indexOf("object");p!==-1&&(a.splice(a,p,1),l.push("Object"))}if(a.length>0){switch(a.length){case 1:r+=`of type ${a[0]}`;break;case 2:r+=`one of type ${a[0]} or ${a[1]}`;break;default:{const p=a.pop();r+=`one of type ${a.join(", ")}, or ${p}`}}(l.length>0||s.length>0)&&(r+=" or ")}if(l.length>0){switch(l.length){case 1:r+=`an instance of ${l[0]}`;break;case 2:r+=`an instance of ${l[0]} or ${l[1]}`;break;default:{const p=l.pop();r+=`an instance of ${l.join(", ")}, or ${p}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const p=s.pop();r+=`one of ${s.join(", ")}, or ${p}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var b;if((b=n.constructor)!==null&&b!==void 0&&b.name)r+=`. Received an instance of ${n.constructor.name}`;else{const p=ot(n,{depth:-1});r+=`. Received ${p}`}}else{let p=ot(n,{colors:!1});p.length>25&&(p=`${p.slice(0,25)}...`),r+=`. Received type ${typeof n} (${p})`}return r},TypeError);X("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=ot(t);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError);X("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;const a=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${e} to be returned from the "${t}" function but got ${a}.`},TypeError);X("ERR_MISSING_ARGS",(...e)=>{ve(e.length>0,"At least one arg needs to be specified");let t;const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(r=>`"${r}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}break}return`${t} must be specified`},TypeError);X("ERR_OUT_OF_RANGE",(e,t,n)=>{ve(t,'Missing "range" argument');let r;return Number.isInteger(n)&&Math.abs(n)>2**32?r=En(String(n)):typeof n=="bigint"?(r=String(n),(n>2n**32n||n<-(2n**32n))&&(r=En(r)),r+="n"):r=ot(n),`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError);X("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);X("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);X("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);X("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);X("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);X("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);X("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);X("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);X("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);X("ERR_STREAM_WRITE_AFTER_END","write after end",Error);X("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var re={AbortError:mi,aggregateTwoErrors:Rn(_i),hideStackFrames:Rn,codes:ut};const{ArrayIsArray:rn,ArrayPrototypeIncludes:dr,ArrayPrototypeJoin:ur,ArrayPrototypeMap:Si,NumberIsInteger:on,NumberIsNaN:Ei,NumberMAX_SAFE_INTEGER:Ri,NumberMIN_SAFE_INTEGER:Ai,NumberParseInt:Ti,ObjectPrototypeHasOwnProperty:Ni,RegExpPrototypeExec:cr,String:Ci,StringPrototypeToUpperCase:Ii,StringPrototypeTrim:vi}=J,{hideStackFrames:le,codes:{ERR_SOCKET_BAD_PORT:Oi,ERR_INVALID_ARG_TYPE:te,ERR_INVALID_ARG_VALUE:je,ERR_OUT_OF_RANGE:Oe,ERR_UNKNOWN_SIGNAL:An}}=re,{normalizeEncoding:xi}=_e,{isAsyncFunction:Mi,isArrayBufferView:ki}=_e.types,Tn={};function $i(e){return e===(e|0)}function Di(e){return e===e>>>0}const Pi=/^[0-7]+$/,Li="must be a 32-bit unsigned integer or an octal string";function Wi(e,t,n){if(typeof e>"u"&&(e=n),typeof e=="string"){if(cr(Pi,e)===null)throw new je(t,e,Li);e=Ti(e,8)}return hr(e,t),e}const Fi=le((e,t,n=Ai,r=Ri)=>{if(typeof e!="number")throw new te(t,"number",e);if(!on(e))throw new Oe(t,"an integer",e);if(e<n||e>r)throw new Oe(t,`>= ${n} && <= ${r}`,e)}),ji=le((e,t,n=-2147483648,r=2147483647)=>{if(typeof e!="number")throw new te(t,"number",e);if(!on(e))throw new Oe(t,"an integer",e);if(e<n||e>r)throw new Oe(t,`>= ${n} && <= ${r}`,e)}),hr=le((e,t,n=!1)=>{if(typeof e!="number")throw new te(t,"number",e);if(!on(e))throw new Oe(t,"an integer",e);const r=n?1:0,a=4294967295;if(e<r||e>a)throw new Oe(t,`>= ${r} && <= ${a}`,e)});function an(e,t){if(typeof e!="string")throw new te(t,"string",e)}function Ui(e,t,n=void 0,r){if(typeof e!="number")throw new te(t,"number",e);if(n!=null&&e<n||r!=null&&e>r||(n!=null||r!=null)&&Ei(e))throw new Oe(t,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,e)}const Bi=le((e,t,n)=>{if(!dr(n,e)){const a="must be one of: "+ur(Si(n,l=>typeof l=="string"?`'${l}'`:Ci(l)),", ");throw new je(t,e,a)}});function br(e,t){if(typeof e!="boolean")throw new te(t,"boolean",e)}function vt(e,t,n){return e==null||!Ni(e,t)?n:e[t]}const Gi=le((e,t,n=null)=>{const r=vt(n,"allowArray",!1),a=vt(n,"allowFunction",!1);if(!vt(n,"nullable",!1)&&e===null||!r&&rn(e)||typeof e!="object"&&(!a||typeof e!="function"))throw new te(t,"Object",e)}),Hi=le((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new te(t,"a dictionary",e)}),ln=le((e,t,n=0)=>{if(!rn(e))throw new te(t,"Array",e);if(e.length<n){const r=`must be longer than ${n}`;throw new je(t,e,r)}});function Vi(e,t){ln(e,t);for(let n=0;n<e.length;n++)an(e[n],`${t}[${n}]`)}function qi(e,t){ln(e,t);for(let n=0;n<e.length;n++)br(e[n],`${t}[${n}]`)}function Ki(e,t="signal"){if(an(e,t),Tn[e]===void 0)throw Tn[Ii(e)]!==void 0?new An(e+" (signals must use all capital letters)"):new An(e)}const Yi=le((e,t="buffer")=>{if(!ki(e))throw new te(t,["Buffer","TypedArray","DataView"],e)});function Ji(e,t){const n=xi(t),r=e.length;if(n==="hex"&&r%2!==0)throw new je("encoding",t,`is invalid for data of length ${r}`)}function zi(e,t="Port",n=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&vi(e).length===0||+e!==+e>>>0||e>65535||e===0&&!n)throw new Oi(t,e,n);return e|0}const Qi=le((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new te(t,"AbortSignal",e)}),Xi=le((e,t)=>{if(typeof e!="function")throw new te(t,"Function",e)}),Zi=le((e,t)=>{if(typeof e!="function"||Mi(e))throw new te(t,"Function",e)}),eo=le((e,t)=>{if(e!==void 0)throw new te(t,"undefined",e)});function to(e,t,n){if(!dr(n,e))throw new te(t,`('${ur(n,"|")}')`,e)}const no=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Nn(e,t){if(typeof e>"u"||!cr(no,e))throw new je(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ro(e){if(typeof e=="string")return Nn(e,"hints"),e;if(rn(e)){const t=e.length;let n="";if(t===0)return n;for(let r=0;r<t;r++){const a=e[r];Nn(a,"hints"),n+=a,r!==t-1&&(n+=", ")}return n}throw new je("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var ct={isInt32:$i,isUint32:Di,parseFileMode:Wi,validateArray:ln,validateStringArray:Vi,validateBooleanArray:qi,validateBoolean:br,validateBuffer:Yi,validateDictionary:Hi,validateEncoding:Ji,validateFunction:Xi,validateInt32:ji,validateInteger:Fi,validateNumber:Ui,validateObject:Gi,validateOneOf:Bi,validatePlainFunction:Zi,validatePort:zi,validateSignalName:Ki,validateString:an,validateUint32:hr,validateUndefined:eo,validateUnion:to,validateAbortSignal:Qi,validateLinkHeaderValue:ro},sn={exports:{}};const{Symbol:ht,SymbolAsyncIterator:Cn,SymbolIterator:In,SymbolFor:gr}=J,pr=ht("kDestroyed"),wr=ht("kIsErrored"),Vt=ht("kIsReadable"),yr=ht("kIsDisturbed"),io=gr("nodejs.webstream.isClosedPromise"),oo=gr("nodejs.webstream.controllerErrorFunction");function bt(e,t=!1){var n;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((n=e._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!e._writableState||e._readableState))}function gt(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function ao(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function he(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function _r(e){return!!(e&&!he(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function mr(e){return!!(e&&!he(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function Sr(e){return!!(e&&!he(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function lo(e){return _r(e)||mr(e)||Sr(e)}function so(e,t){return e==null?!1:t===!0?typeof e[Cn]=="function":t===!1?typeof e[In]=="function":typeof e[Cn]=="function"||typeof e[In]=="function"}function pt(e){if(!he(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[pr]||r!=null&&r.destroyed)}function Er(e){if(!gt(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function fo(e,t){if(!gt(e))return null;if(e.writableFinished===!0)return!0;const n=e._writableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.finished)!="boolean"?null:!!(n.finished||t===!1&&n.ended===!0&&n.length===0)}function uo(e){if(!bt(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function Rr(e,t){if(!bt(e))return null;const n=e._readableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.endEmitted)!="boolean"?null:!!(n.endEmitted||t===!1&&n.ended===!0&&n.length===0)}function Ar(e){return e&&e[Vt]!=null?e[Vt]:typeof(e==null?void 0:e.readable)!="boolean"?null:pt(e)?!1:bt(e)&&e.readable&&!Rr(e)}function Tr(e){return typeof(e==null?void 0:e.writable)!="boolean"?null:pt(e)?!1:gt(e)&&e.writable&&!Er(e)}function co(e,t){return he(e)?pt(e)?!0:!((t==null?void 0:t.readable)!==!1&&Ar(e)||(t==null?void 0:t.writable)!==!1&&Tr(e)):null}function ho(e){var t,n;return he(e)?e.writableErrored?e.writableErrored:(t=(n=e._writableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function bo(e){var t,n;return he(e)?e.readableErrored?e.readableErrored:(t=(n=e._readableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function go(e){if(!he(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,n=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(n==null?void 0:n.closed)=="boolean"?(t==null?void 0:t.closed)||(n==null?void 0:n.closed):typeof e._closed=="boolean"&&Nr(e)?e._closed:null}function Nr(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function Cr(e){return typeof e._sent100=="boolean"&&Nr(e)}function po(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function wo(e){if(!he(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&Cr(e)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function yo(e){var t;return!!(e&&((t=e[yr])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function _o(e){var t,n,r,a,l,s,b,p,u,h;return!!(e&&((t=(n=(r=(a=(l=(s=e[wr])!==null&&s!==void 0?s:e.readableErrored)!==null&&l!==void 0?l:e.writableErrored)!==null&&a!==void 0?a:(b=e._readableState)===null||b===void 0?void 0:b.errorEmitted)!==null&&r!==void 0?r:(p=e._writableState)===null||p===void 0?void 0:p.errorEmitted)!==null&&n!==void 0?n:(u=e._readableState)===null||u===void 0?void 0:u.errored)!==null&&t!==void 0?t:!((h=e._writableState)===null||h===void 0)&&h.errored))}var me={kDestroyed:pr,isDisturbed:yo,kIsDisturbed:yr,isErrored:_o,kIsErrored:wr,isReadable:Ar,kIsReadable:Vt,kIsClosedPromise:io,kControllerErrorFunction:oo,isClosed:go,isDestroyed:pt,isDuplexNodeStream:ao,isFinished:co,isIterable:so,isReadableNodeStream:bt,isReadableStream:_r,isReadableEnded:uo,isReadableFinished:Rr,isReadableErrored:bo,isNodeStream:he,isWebStream:lo,isWritable:Tr,isWritableNodeStream:gt,isWritableStream:mr,isWritableEnded:Er,isWritableFinished:fo,isWritableErrored:ho,isServerRequest:po,isServerResponse:Cr,willEmitClose:wo,isTransformStream:Sr};const Ee=Me,{AbortError:Ir,codes:mo}=re,{ERR_INVALID_ARG_TYPE:So,ERR_STREAM_PREMATURE_CLOSE:vn}=mo,{kEmptyObject:qt,once:Kt}=_e,{validateAbortSignal:Eo,validateFunction:Ro,validateObject:Ao,validateBoolean:To}=ct,{Promise:No,PromisePrototypeThen:Co}=J,{isClosed:Io,isReadable:On,isReadableNodeStream:Ot,isReadableStream:vo,isReadableFinished:xn,isReadableErrored:Mn,isWritable:kn,isWritableNodeStream:$n,isWritableStream:Oo,isWritableFinished:Dn,isWritableErrored:Pn,isNodeStream:xo,willEmitClose:Mo,kIsClosedPromise:ko}=me;function $o(e){return e.setHeader&&typeof e.abort=="function"}const Yt=()=>{};function vr(e,t,n){var r,a;if(arguments.length===2?(n=t,t=qt):t==null?t=qt:Ao(t,"options"),Ro(n,"callback"),Eo(t.signal,"options.signal"),n=Kt(n),vo(e)||Oo(e))return Do(e,t,n);if(!xo(e))throw new So("stream",["ReadableStream","WritableStream","Stream"],e);const l=(r=t.readable)!==null&&r!==void 0?r:Ot(e),s=(a=t.writable)!==null&&a!==void 0?a:$n(e),b=e._writableState,p=e._readableState,u=()=>{e.writable||N()};let h=Mo(e)&&Ot(e)===l&&$n(e)===s,A=Dn(e,!1);const N=()=>{A=!0,e.destroyed&&(h=!1),!(h&&(!e.readable||l))&&(!l||g)&&n.call(e)};let g=xn(e,!1);const c=()=>{g=!0,e.destroyed&&(h=!1),!(h&&(!e.writable||s))&&(!s||A)&&n.call(e)},k=x=>{n.call(e,x)};let v=Io(e);const R=()=>{v=!0;const x=Pn(e)||Mn(e);if(x&&typeof x!="boolean")return n.call(e,x);if(l&&!g&&Ot(e,!0)&&!xn(e,!1))return n.call(e,new vn);if(s&&!A&&!Dn(e,!1))return n.call(e,new vn);n.call(e)},w=()=>{v=!0;const x=Pn(e)||Mn(e);if(x&&typeof x!="boolean")return n.call(e,x);n.call(e)},O=()=>{e.req.on("finish",N)};$o(e)?(e.on("complete",N),h||e.on("abort",R),e.req?O():e.on("request",O)):s&&!b&&(e.on("end",u),e.on("close",u)),!h&&typeof e.aborted=="boolean"&&e.on("aborted",R),e.on("end",c),e.on("finish",N),t.error!==!1&&e.on("error",k),e.on("close",R),v?Ee.nextTick(R):b!=null&&b.errorEmitted||p!=null&&p.errorEmitted?h||Ee.nextTick(w):(!l&&(!h||On(e))&&(A||kn(e)===!1)||!s&&(!h||kn(e))&&(g||On(e)===!1)||p&&e.req&&e.aborted)&&Ee.nextTick(w);const D=()=>{n=Yt,e.removeListener("aborted",R),e.removeListener("complete",N),e.removeListener("abort",R),e.removeListener("request",O),e.req&&e.req.removeListener("finish",N),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",N),e.removeListener("end",c),e.removeListener("error",k),e.removeListener("close",R)};if(t.signal&&!v){const x=()=>{const L=n;D(),L.call(e,new Ir(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)Ee.nextTick(x);else{const L=n;n=Kt((...P)=>{t.signal.removeEventListener("abort",x),L.apply(e,P)}),t.signal.addEventListener("abort",x)}}return D}function Do(e,t,n){let r=!1,a=Yt;if(t.signal)if(a=()=>{r=!0,n.call(e,new Ir(void 0,{cause:t.signal.reason}))},t.signal.aborted)Ee.nextTick(a);else{const s=n;n=Kt((...b)=>{t.signal.removeEventListener("abort",a),s.apply(e,b)}),t.signal.addEventListener("abort",a)}const l=(...s)=>{r||Ee.nextTick(()=>n.apply(e,s))};return Co(e[ko].promise,l,l),Yt}function Po(e,t){var n;let r=!1;return t===null&&(t=qt),(n=t)!==null&&n!==void 0&&n.cleanup&&(To(t.cleanup,"cleanup"),r=t.cleanup),new No((a,l)=>{const s=vr(e,t,b=>{r&&s(),b?l(b):a()})})}sn.exports=vr;sn.exports.finished=Po;var Re=sn.exports;const de=Me,{aggregateTwoErrors:Lo,codes:{ERR_MULTIPLE_CALLBACK:Wo},AbortError:Fo}=re,{Symbol:Or}=J,{kDestroyed:jo,isDestroyed:Uo,isFinished:Bo,isServerRequest:Go}=me,xr=Or("kDestroy"),Jt=Or("kConstruct");function Mr(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function Ho(e,t){const n=this._readableState,r=this._writableState,a=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof t=="function"&&t(),this):(Mr(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),a.constructed?Ln(this,e,t):this.once(xr,function(l){Ln(this,Lo(l,e),t)}),this)}function Ln(e,t,n){let r=!1;function a(l){if(r)return;r=!0;const s=e._readableState,b=e._writableState;Mr(l,b,s),b&&(b.closed=!0),s&&(s.closed=!0),typeof n=="function"&&n(l),l?de.nextTick(Vo,e,l):de.nextTick(kr,e)}try{e._destroy(t||null,a)}catch(l){a(l)}}function Vo(e,t){zt(e,t),kr(e)}function kr(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(n!=null&&n.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function zt(e,t){const n=e._readableState,r=e._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function qo(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function Qt(e,t,n){const r=e._readableState,a=e._writableState;if(a!=null&&a.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||a!=null&&a.autoDestroy?e.destroy(t):t&&(t.stack,a&&!a.errored&&(a.errored=t),r&&!r.errored&&(r.errored=t),n?de.nextTick(zt,e,t):zt(e,t))}function Ko(e,t){if(typeof e._construct!="function")return;const n=e._readableState,r=e._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),e.once(Jt,t),!(e.listenerCount(Jt)>1)&&de.nextTick(Yo,e)}function Yo(e){let t=!1;function n(r){if(t){Qt(e,r??new Wo);return}t=!0;const a=e._readableState,l=e._writableState,s=l||a;a&&(a.constructed=!0),l&&(l.constructed=!0),s.destroyed?e.emit(xr,r):r?Qt(e,r,!0):de.nextTick(Jo,e)}try{e._construct(r=>{de.nextTick(n,r)})}catch(r){de.nextTick(n,r)}}function Jo(e){e.emit(Jt)}function Wn(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function $r(e){e.emit("close")}function zo(e,t){e.emit("error",t),de.nextTick($r,e)}function Qo(e,t){!e||Uo(e)||(!t&&!Bo(e)&&(t=new Fo),Go(e)?(e.socket=null,e.destroy(t)):Wn(e)?e.abort():Wn(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?de.nextTick(zo,e,t):de.nextTick($r,e),e.destroyed||(e[jo]=!0))}var Ue={construct:Ko,destroyer:Qo,destroy:Ho,undestroy:qo,errorOrDestroy:Qt};const{ArrayIsArray:Xo,ObjectSetPrototypeOf:Dr}=J,{EventEmitter:wt}=dt;function yt(e){wt.call(this,e)}Dr(yt.prototype,wt.prototype);Dr(yt,wt);yt.prototype.pipe=function(e,t){const n=this;function r(h){e.writable&&e.write(h)===!1&&n.pause&&n.pause()}n.on("data",r);function a(){n.readable&&n.resume&&n.resume()}e.on("drain",a),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",s),n.on("close",b));let l=!1;function s(){l||(l=!0,e.end())}function b(){l||(l=!0,typeof e.destroy=="function"&&e.destroy())}function p(h){u(),wt.listenerCount(this,"error")===0&&this.emit("error",h)}Xt(n,"error",p),Xt(e,"error",p);function u(){n.removeListener("data",r),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",b),n.removeListener("error",p),e.removeListener("error",p),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e};function Xt(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):Xo(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}var fn={Stream:yt,prependListener:Xt},Pr={exports:{}};(function(e){const{AbortError:t,codes:n}=re,{isNodeStream:r,isWebStream:a,kControllerErrorFunction:l}=me,s=Re,{ERR_INVALID_ARG_TYPE:b}=n,p=(u,h)=>{if(typeof u!="object"||!("aborted"in u))throw new b(h,"AbortSignal",u)};e.exports.addAbortSignal=function(h,A){if(p(h,"signal"),!r(A)&&!a(A))throw new b("stream",["ReadableStream","WritableStream","Stream"],A);return e.exports.addAbortSignalNoValidate(h,A)},e.exports.addAbortSignalNoValidate=function(u,h){if(typeof u!="object"||!("aborted"in u))return h;const A=r(h)?()=>{h.destroy(new t(void 0,{cause:u.reason}))}:()=>{h[l](new t(void 0,{cause:u.reason}))};return u.aborted?A():(u.addEventListener("abort",A),s(h,()=>u.removeEventListener("abort",A))),h}})(Pr);var _t=Pr.exports;const{StringPrototypeSlice:Fn,SymbolIterator:Zo,TypedArrayPrototypeSet:Ze,Uint8Array:ea}=J,{Buffer:xt}=xe,{inspect:ta}=_e;var na=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(t){const n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=t+n.data;return r}concat(t){if(this.length===0)return xt.alloc(0);const n=xt.allocUnsafe(t>>>0);let r=this.head,a=0;for(;r;)Ze(n,r.data,a),a+=r.data.length,r=r.next;return n}consume(t,n){const r=this.head.data;if(t<r.length){const a=r.slice(0,t);return this.head.data=r.slice(t),a}return t===r.length?this.shift():n?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[Zo](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let n="",r=this.head,a=0;do{const l=r.data;if(t>l.length)n+=l,t-=l.length;else{t===l.length?(n+=l,++a,r.next?this.head=r.next:this.head=this.tail=null):(n+=Fn(l,0,t),this.head=r,r.data=Fn(l,t));break}++a}while((r=r.next)!==null);return this.length-=a,n}_getBuffer(t){const n=xt.allocUnsafe(t),r=t;let a=this.head,l=0;do{const s=a.data;if(t>s.length)Ze(n,s,r-t),t-=s.length;else{t===s.length?(Ze(n,s,r-t),++l,a.next?this.head=a.next:this.head=this.tail=null):(Ze(n,new ea(s.buffer,s.byteOffset,t),r-t),this.head=a,a.data=s.slice(t));break}++l}while((a=a.next)!==null);return this.length-=l,n}[Symbol.for("nodejs.util.inspect.custom")](t,n){return ta(this,{...n,depth:0,customInspect:!1})}};const{MathFloor:ra,NumberIsInteger:ia}=J,{ERR_INVALID_ARG_VALUE:oa}=re.codes;function aa(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}function Lr(e){return e?16:16*1024}function la(e,t,n,r){const a=aa(t,r,n);if(a!=null){if(!ia(a)||a<0){const l=r?`options.${n}`:"options.highWaterMark";throw new oa(l,a)}return ra(a)}return Lr(e.objectMode)}var dn={getHighWaterMark:la,getDefaultHighWaterMark:Lr};const jn=Me,{PromisePrototypeThen:sa,SymbolAsyncIterator:Un,SymbolIterator:Bn}=J,{Buffer:fa}=xe,{ERR_INVALID_ARG_TYPE:da,ERR_STREAM_NULL_VALUES:ua}=re.codes;function ca(e,t,n){let r;if(typeof t=="string"||t instanceof fa)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});let a;if(t&&t[Un])a=!0,r=t[Un]();else if(t&&t[Bn])a=!1,r=t[Bn]();else throw new da("iterable",["Iterable"],t);const l=new e({objectMode:!0,highWaterMark:1,...n});let s=!1;l._read=function(){s||(s=!0,p())},l._destroy=function(u,h){sa(b(u),()=>jn.nextTick(h,u),A=>jn.nextTick(h,A||u))};async function b(u){const h=u!=null,A=typeof r.throw=="function";if(h&&A){const{value:N,done:g}=await r.throw(u);if(await N,g)return}if(typeof r.return=="function"){const{value:N}=await r.return();await N}}async function p(){for(;;){try{const{value:u,done:h}=a?await r.next():r.next();if(h)l.push(null);else{const A=u&&typeof u.then=="function"?await u:u;if(A===null)throw s=!1,new ua;if(l.push(A))continue;s=!1}}catch(u){l.destroy(u)}break}}return l}var Wr=ca,Mt,Gn;function mt(){if(Gn)return Mt;Gn=1;const e=Me,{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:l,ObjectKeys:s,ObjectSetPrototypeOf:b,Promise:p,SafeSet:u,SymbolAsyncIterator:h,Symbol:A}=J;Mt=m,m.ReadableState=se;const{EventEmitter:N}=dt,{Stream:g,prependListener:c}=fn,{Buffer:k}=xe,{addAbortSignal:v}=_t,R=Re;let w=_e.debuglog("stream",i=>{w=i});const O=na,D=Ue,{getHighWaterMark:x,getDefaultHighWaterMark:L}=dn,{aggregateTwoErrors:P,codes:{ERR_INVALID_ARG_TYPE:H,ERR_METHOD_NOT_IMPLEMENTED:V,ERR_OUT_OF_RANGE:_,ERR_STREAM_PUSH_AFTER_EOF:$,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:z}}=re,{validateObject:W}=ct,F=A("kPaused"),{StringDecoder:M}=ri,Y=Wr;b(m.prototype,g.prototype),b(m,g);const Q=()=>{},{errorOrDestroy:j}=D;function se(i,o,S){typeof S!="boolean"&&(S=o instanceof we()),this.objectMode=!!(i&&i.objectMode),S&&(this.objectMode=this.objectMode||!!(i&&i.readableObjectMode)),this.highWaterMark=i?x(this,i,"readableHighWaterMark",S):L(!1),this.buffer=new O,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[F]=null,this.errorEmitted=!1,this.emitClose=!i||i.emitClose!==!1,this.autoDestroy=!i||i.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=i&&i.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,i&&i.encoding&&(this.decoder=new M(i.encoding),this.encoding=i.encoding)}function m(i){if(!(this instanceof m))return new m(i);const o=this instanceof we();this._readableState=new se(i,this,o),i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy),typeof i.construct=="function"&&(this._construct=i.construct),i.signal&&!o&&v(i.signal,this)),g.call(this,i),D.construct(this,()=>{this._readableState.needReadable&&Se(this,this._readableState)})}m.prototype.destroy=D.destroy,m.prototype._undestroy=D.undestroy,m.prototype._destroy=function(i,o){o(i)},m.prototype[N.captureRejectionSymbol]=function(i){this.destroy(i)},m.prototype.push=function(i,o){return ne(this,i,o,!1)},m.prototype.unshift=function(i,o){return ne(this,i,o,!0)};function ne(i,o,S,E){w("readableAddChunk",o);const T=i._readableState;let Z;if(T.objectMode||(typeof o=="string"?(S=S||T.defaultEncoding,T.encoding!==S&&(E&&T.encoding?o=k.from(o,S).toString(T.encoding):(o=k.from(o,S),S=""))):o instanceof k?S="":g._isUint8Array(o)?(o=g._uint8ArrayToBuffer(o),S=""):o!=null&&(Z=new H("chunk",["string","Buffer","Uint8Array"],o))),Z)j(i,Z);else if(o===null)T.reading=!1,Rt(i,T);else if(T.objectMode||o&&o.length>0)if(E)if(T.endEmitted)j(i,new z);else{if(T.destroyed||T.errored)return!1;be(i,T,o,!0)}else if(T.ended)j(i,new $);else{if(T.destroyed||T.errored)return!1;T.reading=!1,T.decoder&&!S?(o=T.decoder.write(o),T.objectMode||o.length!==0?be(i,T,o,!1):Se(i,T)):be(i,T,o,!1)}else E||(T.reading=!1,Se(i,T));return!T.ended&&(T.length<T.highWaterMark||T.length===0)}function be(i,o,S,E){o.flowing&&o.length===0&&!o.sync&&i.listenerCount("data")>0?(o.multiAwaitDrain?o.awaitDrainWriters.clear():o.awaitDrainWriters=null,o.dataEmitted=!0,i.emit("data",S)):(o.length+=o.objectMode?1:S.length,E?o.buffer.unshift(S):o.buffer.push(S),o.needReadable&&De(i)),Se(i,o)}m.prototype.isPaused=function(){const i=this._readableState;return i[F]===!0||i.flowing===!1},m.prototype.setEncoding=function(i){const o=new M(i);this._readableState.decoder=o,this._readableState.encoding=this._readableState.decoder.encoding;const S=this._readableState.buffer;let E="";for(const T of S)E+=o.write(T);return S.clear(),E!==""&&S.push(E),this._readableState.length=E.length,this};const Be=1073741824;function Ge(i){if(i>Be)throw new _("size","<= 1GiB",i);return i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++,i}function Ae(i,o){return i<=0||o.length===0&&o.ended?0:o.objectMode?1:r(i)?o.flowing&&o.length?o.buffer.first().length:o.length:i<=o.length?i:o.ended?o.length:0}m.prototype.read=function(i){w("read",i),i===void 0?i=NaN:n(i)||(i=a(i,10));const o=this._readableState,S=i;if(i>o.highWaterMark&&(o.highWaterMark=Ge(i)),i!==0&&(o.emittedReadable=!1),i===0&&o.needReadable&&((o.highWaterMark!==0?o.length>=o.highWaterMark:o.length>0)||o.ended))return w("read: emitReadable",o.length,o.ended),o.length===0&&o.ended?fe(this):De(this),null;if(i=Ae(i,o),i===0&&o.ended)return o.length===0&&fe(this),null;let E=o.needReadable;if(w("need readable",E),(o.length===0||o.length-i<o.highWaterMark)&&(E=!0,w("length less than watermark",E)),o.ended||o.reading||o.destroyed||o.errored||!o.constructed)E=!1,w("reading, ended or constructing",E);else if(E){w("do read"),o.reading=!0,o.sync=!0,o.length===0&&(o.needReadable=!0);try{this._read(o.highWaterMark)}catch(Z){j(this,Z)}o.sync=!1,o.reading||(i=Ae(S,o))}let T;return i>0?T=B(i,o):T=null,T===null?(o.needReadable=o.length<=o.highWaterMark,i=0):(o.length-=i,o.multiAwaitDrain?o.awaitDrainWriters.clear():o.awaitDrainWriters=null),o.length===0&&(o.ended||(o.needReadable=!0),S!==i&&o.ended&&fe(this)),T!==null&&!o.errorEmitted&&!o.closeEmitted&&(o.dataEmitted=!0,this.emit("data",T)),T};function Rt(i,o){if(w("onEofChunk"),!o.ended){if(o.decoder){const S=o.decoder.end();S&&S.length&&(o.buffer.push(S),o.length+=o.objectMode?1:S.length)}o.ended=!0,o.sync?De(i):(o.needReadable=!1,o.emittedReadable=!0,Pe(i))}}function De(i){const o=i._readableState;w("emitReadable",o.needReadable,o.emittedReadable),o.needReadable=!1,o.emittedReadable||(w("emitReadable",o.flowing),o.emittedReadable=!0,e.nextTick(Pe,i))}function Pe(i){const o=i._readableState;w("emitReadable_",o.destroyed,o.length,o.ended),!o.destroyed&&!o.errored&&(o.length||o.ended)&&(i.emit("readable"),o.emittedReadable=!1),o.needReadable=!o.flowing&&!o.ended&&o.length<=o.highWaterMark,C(i)}function Se(i,o){!o.readingMore&&o.constructed&&(o.readingMore=!0,e.nextTick(At,i,o))}function At(i,o){for(;!o.reading&&!o.ended&&(o.length<o.highWaterMark||o.flowing&&o.length===0);){const S=o.length;if(w("maybeReadMore read 0"),i.read(0),S===o.length)break}o.readingMore=!1}m.prototype._read=function(i){throw new V("_read()")},m.prototype.pipe=function(i,o){const S=this,E=this._readableState;E.pipes.length===1&&(E.multiAwaitDrain||(E.multiAwaitDrain=!0,E.awaitDrainWriters=new u(E.awaitDrainWriters?[E.awaitDrainWriters]:[]))),E.pipes.push(i),w("pipe count=%d opts=%j",E.pipes.length,o);const Z=(!o||o.end!==!1)&&i!==e.stdout&&i!==e.stderr?yn:Ke;E.endEmitted?e.nextTick(Z):S.once("end",Z),i.on("unpipe",ie);function ie(Ne,pe){w("onunpipe"),Ne===S&&pe&&pe.hasUnpiped===!1&&(pe.hasUnpiped=!0,ni())}function yn(){w("onend"),i.end()}let Te,_n=!1;function ni(){w("cleanup"),i.removeListener("close",Nt),i.removeListener("finish",Ct),Te&&i.removeListener("drain",Te),i.removeListener("error",Tt),i.removeListener("unpipe",ie),S.removeListener("end",yn),S.removeListener("end",Ke),S.removeListener("data",Sn),_n=!0,Te&&E.awaitDrainWriters&&(!i._writableState||i._writableState.needDrain)&&Te()}function mn(){_n||(E.pipes.length===1&&E.pipes[0]===i?(w("false write response, pause",0),E.awaitDrainWriters=i,E.multiAwaitDrain=!1):E.pipes.length>1&&E.pipes.includes(i)&&(w("false write response, pause",E.awaitDrainWriters.size),E.awaitDrainWriters.add(i)),S.pause()),Te||(Te=He(S,i),i.on("drain",Te))}S.on("data",Sn);function Sn(Ne){w("ondata");const pe=i.write(Ne);w("dest.write",pe),pe===!1&&mn()}function Tt(Ne){if(w("onerror",Ne),Ke(),i.removeListener("error",Tt),i.listenerCount("error")===0){const pe=i._writableState||i._readableState;pe&&!pe.errorEmitted?j(i,Ne):i.emit("error",Ne)}}c(i,"error",Tt);function Nt(){i.removeListener("finish",Ct),Ke()}i.once("close",Nt);function Ct(){w("onfinish"),i.removeListener("close",Nt),Ke()}i.once("finish",Ct);function Ke(){w("unpipe"),S.unpipe(i)}return i.emit("pipe",S),i.writableNeedDrain===!0?E.flowing&&mn():E.flowing||(w("pipe resume"),S.resume()),i};function He(i,o){return function(){const E=i._readableState;E.awaitDrainWriters===o?(w("pipeOnDrain",1),E.awaitDrainWriters=null):E.multiAwaitDrain&&(w("pipeOnDrain",E.awaitDrainWriters.size),E.awaitDrainWriters.delete(o)),(!E.awaitDrainWriters||E.awaitDrainWriters.size===0)&&i.listenerCount("data")&&i.resume()}}m.prototype.unpipe=function(i){const o=this._readableState,S={hasUnpiped:!1};if(o.pipes.length===0)return this;if(!i){const T=o.pipes;o.pipes=[],this.pause();for(let Z=0;Z<T.length;Z++)T[Z].emit("unpipe",this,{hasUnpiped:!1});return this}const E=t(o.pipes,i);return E===-1?this:(o.pipes.splice(E,1),o.pipes.length===0&&this.pause(),i.emit("unpipe",this,S),this)},m.prototype.on=function(i,o){const S=g.prototype.on.call(this,i,o),E=this._readableState;return i==="data"?(E.readableListening=this.listenerCount("readable")>0,E.flowing!==!1&&this.resume()):i==="readable"&&!E.endEmitted&&!E.readableListening&&(E.readableListening=E.needReadable=!0,E.flowing=!1,E.emittedReadable=!1,w("on readable",E.length,E.reading),E.length?De(this):E.reading||e.nextTick(f,this)),S},m.prototype.addListener=m.prototype.on,m.prototype.removeListener=function(i,o){const S=g.prototype.removeListener.call(this,i,o);return i==="readable"&&e.nextTick(Ve,this),S},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(i){const o=g.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&e.nextTick(Ve,this),o};function Ve(i){const o=i._readableState;o.readableListening=i.listenerCount("readable")>0,o.resumeScheduled&&o[F]===!1?o.flowing=!0:i.listenerCount("data")>0?i.resume():o.readableListening||(o.flowing=null)}function f(i){w("readable nexttick read 0"),i.read(0)}m.prototype.resume=function(){const i=this._readableState;return i.flowing||(w("resume"),i.flowing=!i.readableListening,d(this,i)),i[F]=!1,this};function d(i,o){o.resumeScheduled||(o.resumeScheduled=!0,e.nextTick(y,i,o))}function y(i,o){w("resume",o.reading),o.reading||i.read(0),o.resumeScheduled=!1,i.emit("resume"),C(i),o.flowing&&!o.reading&&i.read(0)}m.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[F]=!0,this};function C(i){const o=i._readableState;for(w("flow",o.flowing);o.flowing&&i.read()!==null;);}m.prototype.wrap=function(i){let o=!1;i.on("data",E=>{!this.push(E)&&i.pause&&(o=!0,i.pause())}),i.on("end",()=>{this.push(null)}),i.on("error",E=>{j(this,E)}),i.on("close",()=>{this.destroy()}),i.on("destroy",()=>{this.destroy()}),this._read=()=>{o&&i.resume&&(o=!1,i.resume())};const S=s(i);for(let E=1;E<S.length;E++){const T=S[E];this[T]===void 0&&typeof i[T]=="function"&&(this[T]=i[T].bind(i))}return this},m.prototype[h]=function(){return I(this)},m.prototype.iterator=function(i){return i!==void 0&&W(i,"options"),I(this,i)};function I(i,o){typeof i.read!="function"&&(i=m.wrap(i,{objectMode:!0}));const S=U(i,o);return S.stream=i,S}async function*U(i,o){let S=Q;function E(ie){this===i?(S(),S=Q):S=ie}i.on("readable",E);let T;const Z=R(i,{writable:!1},ie=>{T=ie?P(T,ie):null,S(),S=Q});try{for(;;){const ie=i.destroyed?null:i.read();if(ie!==null)yield ie;else{if(T)throw T;if(T===null)return;await new p(E)}}}catch(ie){throw T=P(T,ie),T}finally{(T||(o==null?void 0:o.destroyOnReturn)!==!1)&&(T===void 0||i._readableState.autoDestroy)?D.destroyer(i,null):(i.off("readable",E),Z())}}l(m.prototype,{readable:{__proto__:null,get(){const i=this._readableState;return!!i&&i.readable!==!1&&!i.destroyed&&!i.errorEmitted&&!i.endEmitted},set(i){this._readableState&&(this._readableState.readable=!!i)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(i){this._readableState&&(this._readableState.flowing=i)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(i){this._readableState&&(this._readableState.destroyed=i)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),l(se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[F]!==!1},set(i){this[F]=!!i}}}),m._fromList=B;function B(i,o){if(o.length===0)return null;let S;return o.objectMode?S=o.buffer.shift():!i||i>=o.length?(o.decoder?S=o.buffer.join(""):o.buffer.length===1?S=o.buffer.first():S=o.buffer.concat(o.length),o.buffer.clear()):S=o.buffer.consume(i,o.decoder),S}function fe(i){const o=i._readableState;w("endReadable",o.endEmitted),o.endEmitted||(o.ended=!0,e.nextTick(Le,o,i))}function Le(i,o){if(w("endReadableNT",i.endEmitted,i.length),!i.errored&&!i.closeEmitted&&!i.endEmitted&&i.length===0){if(i.endEmitted=!0,o.emit("end"),o.writable&&o.allowHalfOpen===!1)e.nextTick(qe,o);else if(i.autoDestroy){const S=o._writableState;(!S||S.autoDestroy&&(S.finished||S.writable===!1))&&o.destroy()}}}function qe(i){i.writable&&!i.writableEnded&&!i.destroyed&&i.end()}m.from=function(i,o){return Y(m,i,o)};let ge;function wn(){return ge===void 0&&(ge={}),ge}return m.fromWeb=function(i,o){return wn().newStreamReadableFromReadableStream(i,o)},m.toWeb=function(i,o){return wn().newReadableStreamFromStreamReadable(i,o)},m.wrap=function(i,o){var S,E;return new m({objectMode:(S=(E=i.readableObjectMode)!==null&&E!==void 0?E:i.objectMode)!==null&&S!==void 0?S:!0,...o,destroy(T,Z){D.destroyer(i,T),Z(T)}}).wrap(i)},Mt}var kt,Hn;function Fr(){if(Hn)return kt;Hn=1;const e=Me,{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:l,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:b,Symbol:p,SymbolHasInstance:u}=J;kt=M,M.WritableState=W;const{EventEmitter:h}=dt,A=fn.Stream,{Buffer:N}=xe,g=Ue,{addAbortSignal:c}=_t,{getHighWaterMark:k,getDefaultHighWaterMark:v}=dn,{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:O,ERR_STREAM_CANNOT_PIPE:D,ERR_STREAM_DESTROYED:x,ERR_STREAM_ALREADY_FINISHED:L,ERR_STREAM_NULL_VALUES:P,ERR_STREAM_WRITE_AFTER_END:H,ERR_UNKNOWN_ENCODING:V}=re.codes,{errorOrDestroy:_}=g;s(M.prototype,A.prototype),s(M,A);function $(){}const z=p("kOnFinished");function W(f,d,y){typeof y!="boolean"&&(y=d instanceof we()),this.objectMode=!!(f&&f.objectMode),y&&(this.objectMode=this.objectMode||!!(f&&f.writableObjectMode)),this.highWaterMark=f?k(this,f,"writableHighWaterMark",y):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const C=!!(f&&f.decodeStrings===!1);this.decodeStrings=!C,this.defaultEncoding=f&&f.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=m.bind(void 0,d),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,F(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!f||f.emitClose!==!1,this.autoDestroy=!f||f.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[z]=[]}function F(f){f.buffered=[],f.bufferedIndex=0,f.allBuffers=!0,f.allNoop=!0}W.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(W.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function M(f){const d=this instanceof we();if(!d&&!r(M,this))return new M(f);this._writableState=new W(f,this,d),f&&(typeof f.write=="function"&&(this._write=f.write),typeof f.writev=="function"&&(this._writev=f.writev),typeof f.destroy=="function"&&(this._destroy=f.destroy),typeof f.final=="function"&&(this._final=f.final),typeof f.construct=="function"&&(this._construct=f.construct),f.signal&&c(f.signal,this)),A.call(this,f),g.construct(this,()=>{const y=this._writableState;y.writing||Ge(this,y),Pe(this,y)})}a(M,u,{__proto__:null,value:function(f){return r(this,f)?!0:this!==M?!1:f&&f._writableState instanceof W}}),M.prototype.pipe=function(){_(this,new D)};function Y(f,d,y,C){const I=f._writableState;if(typeof y=="function")C=y,y=I.defaultEncoding;else{if(!y)y=I.defaultEncoding;else if(y!=="buffer"&&!N.isEncoding(y))throw new V(y);typeof C!="function"&&(C=$)}if(d===null)throw new P;if(!I.objectMode)if(typeof d=="string")I.decodeStrings!==!1&&(d=N.from(d,y),y="buffer");else if(d instanceof N)y="buffer";else if(A._isUint8Array(d))d=A._uint8ArrayToBuffer(d),y="buffer";else throw new R("chunk",["string","Buffer","Uint8Array"],d);let U;return I.ending?U=new H:I.destroyed&&(U=new x("write")),U?(e.nextTick(C,U),_(f,U,!0),U):(I.pendingcb++,Q(f,I,d,y,C))}M.prototype.write=function(f,d,y){return Y(this,f,d,y)===!0},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){const f=this._writableState;f.corked&&(f.corked--,f.writing||Ge(this,f))},M.prototype.setDefaultEncoding=function(d){if(typeof d=="string"&&(d=b(d)),!N.isEncoding(d))throw new V(d);return this._writableState.defaultEncoding=d,this};function Q(f,d,y,C,I){const U=d.objectMode?1:y.length;d.length+=U;const B=d.length<d.highWaterMark;return B||(d.needDrain=!0),d.writing||d.corked||d.errored||!d.constructed?(d.buffered.push({chunk:y,encoding:C,callback:I}),d.allBuffers&&C!=="buffer"&&(d.allBuffers=!1),d.allNoop&&I!==$&&(d.allNoop=!1)):(d.writelen=U,d.writecb=I,d.writing=!0,d.sync=!0,f._write(y,C,d.onwrite),d.sync=!1),B&&!d.errored&&!d.destroyed}function j(f,d,y,C,I,U,B){d.writelen=C,d.writecb=B,d.writing=!0,d.sync=!0,d.destroyed?d.onwrite(new x("write")):y?f._writev(I,d.onwrite):f._write(I,U,d.onwrite),d.sync=!1}function se(f,d,y,C){--d.pendingcb,C(y),Be(d),_(f,y)}function m(f,d){const y=f._writableState,C=y.sync,I=y.writecb;if(typeof I!="function"){_(f,new O);return}y.writing=!1,y.writecb=null,y.length-=y.writelen,y.writelen=0,d?(d.stack,y.errored||(y.errored=d),f._readableState&&!f._readableState.errored&&(f._readableState.errored=d),C?e.nextTick(se,f,y,d,I):se(f,y,d,I)):(y.buffered.length>y.bufferedIndex&&Ge(f,y),C?y.afterWriteTickInfo!==null&&y.afterWriteTickInfo.cb===I?y.afterWriteTickInfo.count++:(y.afterWriteTickInfo={count:1,cb:I,stream:f,state:y},e.nextTick(ne,y.afterWriteTickInfo)):be(f,y,1,I))}function ne({stream:f,state:d,count:y,cb:C}){return d.afterWriteTickInfo=null,be(f,d,y,C)}function be(f,d,y,C){for(!d.ending&&!f.destroyed&&d.length===0&&d.needDrain&&(d.needDrain=!1,f.emit("drain"));y-- >0;)d.pendingcb--,C();d.destroyed&&Be(d),Pe(f,d)}function Be(f){if(f.writing)return;for(let I=f.bufferedIndex;I<f.buffered.length;++I){var d;const{chunk:U,callback:B}=f.buffered[I],fe=f.objectMode?1:U.length;f.length-=fe,B((d=f.errored)!==null&&d!==void 0?d:new x("write"))}const y=f[z].splice(0);for(let I=0;I<y.length;I++){var C;y[I]((C=f.errored)!==null&&C!==void 0?C:new x("end"))}F(f)}function Ge(f,d){if(d.corked||d.bufferProcessing||d.destroyed||!d.constructed)return;const{buffered:y,bufferedIndex:C,objectMode:I}=d,U=y.length-C;if(!U)return;let B=C;if(d.bufferProcessing=!0,U>1&&f._writev){d.pendingcb-=U-1;const fe=d.allNoop?$:qe=>{for(let ge=B;ge<y.length;++ge)y[ge].callback(qe)},Le=d.allNoop&&B===0?y:t(y,B);Le.allBuffers=d.allBuffers,j(f,d,!0,d.length,Le,"",fe),F(d)}else{do{const{chunk:fe,encoding:Le,callback:qe}=y[B];y[B++]=null;const ge=I?1:fe.length;j(f,d,!1,ge,fe,Le,qe)}while(B<y.length&&!d.writing);B===y.length?F(d):B>256?(y.splice(0,B),d.bufferedIndex=0):d.bufferedIndex=B}d.bufferProcessing=!1}M.prototype._write=function(f,d,y){if(this._writev)this._writev([{chunk:f,encoding:d}],y);else throw new w("_write()")},M.prototype._writev=null,M.prototype.end=function(f,d,y){const C=this._writableState;typeof f=="function"?(y=f,f=null,d=null):typeof d=="function"&&(y=d,d=null);let I;if(f!=null){const U=Y(this,f,d);U instanceof n&&(I=U)}return C.corked&&(C.corked=1,this.uncork()),I||(!C.errored&&!C.ending?(C.ending=!0,Pe(this,C,!0),C.ended=!0):C.finished?I=new L("end"):C.destroyed&&(I=new x("end"))),typeof y=="function"&&(I||C.finished?e.nextTick(y,I):C[z].push(y)),this};function Ae(f){return f.ending&&!f.destroyed&&f.constructed&&f.length===0&&!f.errored&&f.buffered.length===0&&!f.finished&&!f.writing&&!f.errorEmitted&&!f.closeEmitted}function Rt(f,d){let y=!1;function C(I){if(y){_(f,I??O());return}if(y=!0,d.pendingcb--,I){const U=d[z].splice(0);for(let B=0;B<U.length;B++)U[B](I);_(f,I,d.sync)}else Ae(d)&&(d.prefinished=!0,f.emit("prefinish"),d.pendingcb++,e.nextTick(Se,f,d))}d.sync=!0,d.pendingcb++;try{f._final(C)}catch(I){C(I)}d.sync=!1}function De(f,d){!d.prefinished&&!d.finalCalled&&(typeof f._final=="function"&&!d.destroyed?(d.finalCalled=!0,Rt(f,d)):(d.prefinished=!0,f.emit("prefinish")))}function Pe(f,d,y){Ae(d)&&(De(f,d),d.pendingcb===0&&(y?(d.pendingcb++,e.nextTick((C,I)=>{Ae(I)?Se(C,I):I.pendingcb--},f,d)):Ae(d)&&(d.pendingcb++,Se(f,d))))}function Se(f,d){d.pendingcb--,d.finished=!0;const y=d[z].splice(0);for(let C=0;C<y.length;C++)y[C]();if(f.emit("finish"),d.autoDestroy){const C=f._readableState;(!C||C.autoDestroy&&(C.endEmitted||C.readable===!1))&&f.destroy()}}l(M.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(f){this._writableState&&(this._writableState.destroyed=f)}},writable:{__proto__:null,get(){const f=this._writableState;return!!f&&f.writable!==!1&&!f.destroyed&&!f.errored&&!f.ending&&!f.ended},set(f){this._writableState&&(this._writableState.writable=!!f)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const f=this._writableState;return f?!f.destroyed&&!f.ending&&f.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const At=g.destroy;M.prototype.destroy=function(f,d){const y=this._writableState;return!y.destroyed&&(y.bufferedIndex<y.buffered.length||y[z].length)&&e.nextTick(Be,y),At.call(this,f,d),this},M.prototype._undestroy=g.undestroy,M.prototype._destroy=function(f,d){d(f)},M.prototype[h.captureRejectionSymbol]=function(f){this.destroy(f)};let He;function Ve(){return He===void 0&&(He={}),He}return M.fromWeb=function(f,d){return Ve().newStreamWritableFromWritableStream(f,d)},M.toWeb=function(f){return Ve().newWritableStreamFromStreamWritable(f)},kt}var $t,Vn;function ha(){if(Vn)return $t;Vn=1;const e=Me,t=xe,{isReadable:n,isWritable:r,isIterable:a,isNodeStream:l,isReadableNodeStream:s,isWritableNodeStream:b,isDuplexNodeStream:p}=me,u=Re,{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:A,ERR_INVALID_RETURN_VALUE:N}}=re,{destroyer:g}=Ue,c=we(),k=mt(),{createDeferredPromise:v}=_e,R=Wr,w=globalThis.Blob||t.Blob,O=typeof w<"u"?function(_){return _ instanceof w}:function(_){return!1},D=globalThis.AbortController||tn().AbortController,{FunctionPrototypeCall:x}=J;class L extends c{constructor(_){super(_),(_==null?void 0:_.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(_==null?void 0:_.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}$t=function V(_,$){if(p(_))return _;if(s(_))return H({readable:_});if(b(_))return H({writable:_});if(l(_))return H({writable:!1,readable:!1});if(typeof _=="function"){const{value:W,write:F,final:M,destroy:Y}=P(_);if(a(W))return R(L,W,{objectMode:!0,write:F,final:M,destroy:Y});const Q=W==null?void 0:W.then;if(typeof Q=="function"){let j;const se=x(Q,W,m=>{if(m!=null)throw new N("nully","body",m)},m=>{g(j,m)});return j=new L({objectMode:!0,readable:!1,write:F,final(m){M(async()=>{try{await se,e.nextTick(m,null)}catch(ne){e.nextTick(m,ne)}})},destroy:Y})}throw new N("Iterable, AsyncIterable or AsyncFunction",$,W)}if(O(_))return V(_.arrayBuffer());if(a(_))return R(L,_,{objectMode:!0,writable:!1});if(typeof(_==null?void 0:_.writable)=="object"||typeof(_==null?void 0:_.readable)=="object"){const W=_!=null&&_.readable?s(_==null?void 0:_.readable)?_==null?void 0:_.readable:V(_.readable):void 0,F=_!=null&&_.writable?b(_==null?void 0:_.writable)?_==null?void 0:_.writable:V(_.writable):void 0;return H({readable:W,writable:F})}const z=_==null?void 0:_.then;if(typeof z=="function"){let W;return x(z,_,F=>{F!=null&&W.push(F),W.push(null)},F=>{g(W,F)}),W=new L({objectMode:!0,writable:!1,read(){}})}throw new A($,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],_)};function P(V){let{promise:_,resolve:$}=v();const z=new D,W=z.signal;return{value:V(async function*(){for(;;){const M=_;_=null;const{chunk:Y,done:Q,cb:j}=await M;if(e.nextTick(j),Q)return;if(W.aborted)throw new h(void 0,{cause:W.reason});({promise:_,resolve:$}=v()),yield Y}}(),{signal:W}),write(M,Y,Q){const j=$;$=null,j({chunk:M,done:!1,cb:Q})},final(M){const Y=$;$=null,Y({done:!0,cb:M})},destroy(M,Y){z.abort(),Y(M)}}}function H(V){const _=V.readable&&typeof V.readable.read!="function"?k.wrap(V.readable):V.readable,$=V.writable;let z=!!n(_),W=!!r($),F,M,Y,Q,j;function se(m){const ne=Q;Q=null,ne?ne(m):m&&j.destroy(m)}return j=new L({readableObjectMode:!!(_!=null&&_.readableObjectMode),writableObjectMode:!!($!=null&&$.writableObjectMode),readable:z,writable:W}),W&&(u($,m=>{W=!1,m&&g(_,m),se(m)}),j._write=function(m,ne,be){$.write(m,ne)?be():F=be},j._final=function(m){$.end(),M=m},$.on("drain",function(){if(F){const m=F;F=null,m()}}),$.on("finish",function(){if(M){const m=M;M=null,m()}})),z&&(u(_,m=>{z=!1,m&&g(_,m),se(m)}),_.on("readable",function(){if(Y){const m=Y;Y=null,m()}}),_.on("end",function(){j.push(null)}),j._read=function(){for(;;){const m=_.read();if(m===null){Y=j._read;return}if(!j.push(m))return}}),j._destroy=function(m,ne){!m&&Q!==null&&(m=new h),Y=null,F=null,M=null,Q===null?ne(m):(Q=ne,g($,m),g(_,m))},j}return $t}var Dt,qn;function we(){if(qn)return Dt;qn=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=J;Dt=s;const a=mt(),l=Fr();r(s.prototype,a.prototype),r(s,a);{const h=n(l.prototype);for(let A=0;A<h.length;A++){const N=h[A];s.prototype[N]||(s.prototype[N]=l.prototype[N])}}function s(h){if(!(this instanceof s))return new s(h);a.call(this,h),l.call(this,h),h?(this.allowHalfOpen=h.allowHalfOpen!==!1,h.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),h.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(l.prototype,"writableLength")},writableFinished:{__proto__:null,...t(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(h){this._readableState&&this._writableState&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}}});let b;function p(){return b===void 0&&(b={}),b}s.fromWeb=function(h,A){return p().newStreamDuplexFromReadableWritablePair(h,A)},s.toWeb=function(h){return p().newReadableWritablePairFromDuplex(h)};let u;return s.from=function(h){return u||(u=ha()),u(h,"body")},Dt}const{ObjectSetPrototypeOf:jr,Symbol:ba}=J;var Ur=ye;const{ERR_METHOD_NOT_IMPLEMENTED:ga}=re.codes,un=we(),{getHighWaterMark:pa}=dn;jr(ye.prototype,un.prototype);jr(ye,un);const Qe=ba("kCallback");function ye(e){if(!(this instanceof ye))return new ye(e);const t=e?pa(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),un.call(this,e),this._readableState.sync=!1,this[Qe]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",wa)}function Zt(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,n)=>{if(t){e?e(t):this.destroy(t);return}n!=null&&this.push(n),this.push(null),e&&e()}):(this.push(null),e&&e())}function wa(){this._final!==Zt&&Zt.call(this)}ye.prototype._final=Zt;ye.prototype._transform=function(e,t,n){throw new ga("_transform()")};ye.prototype._write=function(e,t,n){const r=this._readableState,a=this._writableState,l=r.length;this._transform(e,t,(s,b)=>{if(s){n(s);return}b!=null&&this.push(b),a.ended||l===r.length||r.length<r.highWaterMark?n():this[Qe]=n})};ye.prototype._read=function(){if(this[Qe]){const e=this[Qe];this[Qe]=null,e()}};const{ObjectSetPrototypeOf:Br}=J;var Gr=Fe;const cn=Ur;Br(Fe.prototype,cn.prototype);Br(Fe,cn);function Fe(e){if(!(this instanceof Fe))return new Fe(e);cn.call(this,e)}Fe.prototype._transform=function(e,t,n){n(null,e)};const Ye=Me,{ArrayIsArray:ya,Promise:_a,SymbolAsyncIterator:ma}=J,at=Re,{once:Sa}=_e,Ea=Ue,Kn=we(),{aggregateTwoErrors:Ra,codes:{ERR_INVALID_ARG_TYPE:en,ERR_INVALID_RETURN_VALUE:Pt,ERR_MISSING_ARGS:Aa,ERR_STREAM_DESTROYED:Ta,ERR_STREAM_PREMATURE_CLOSE:Na},AbortError:Ca}=re,{validateFunction:Ia,validateAbortSignal:va}=ct,{isIterable:Ie,isReadable:Lt,isReadableNodeStream:rt,isNodeStream:Yn,isTransformStream:We,isWebStream:Oa,isReadableStream:Wt,isReadableEnded:xa}=me,Ma=globalThis.AbortController||tn().AbortController;let Ft,jt;function Jn(e,t,n){let r=!1;e.on("close",()=>{r=!0});const a=at(e,{readable:t,writable:n},l=>{r=!l});return{destroy:l=>{r||(r=!0,Ea.destroyer(e,l||new Ta("pipe")))},cleanup:a}}function ka(e){return Ia(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function Ut(e){if(Ie(e))return e;if(rt(e))return $a(e);throw new en("val",["Readable","Iterable","AsyncIterable"],e)}async function*$a(e){jt||(jt=mt()),yield*jt.prototype[ma].call(e)}async function et(e,t,n,{end:r}){let a,l=null;const s=u=>{if(u&&(a=u),l){const h=l;l=null,h()}},b=()=>new _a((u,h)=>{a?h(a):l=()=>{a?h(a):u()}});t.on("drain",s);const p=at(t,{readable:!1},s);try{t.writableNeedDrain&&await b();for await(const u of e)t.write(u)||await b();r&&t.end(),await b(),n()}catch(u){n(a!==u?Ra(a,u):u)}finally{p(),t.off("drain",s)}}async function Bt(e,t,n,{end:r}){We(t)&&(t=t.writable);const a=t.getWriter();try{for await(const l of e)await a.ready,a.write(l).catch(()=>{});await a.ready,r&&await a.close(),n()}catch(l){try{await a.abort(l),n(l)}catch(s){n(s)}}}function Da(...e){return Hr(e,Sa(ka(e)))}function Hr(e,t,n){if(e.length===1&&ya(e[0])&&(e=e[0]),e.length<2)throw new Aa("streams");const r=new Ma,a=r.signal,l=n==null?void 0:n.signal,s=[];va(l,"options.signal");function b(){g(new Ca)}l==null||l.addEventListener("abort",b);let p,u;const h=[];let A=0;function N(R){g(R,--A===0)}function g(R,w){if(R&&(!p||p.code==="ERR_STREAM_PREMATURE_CLOSE")&&(p=R),!(!p&&!w)){for(;h.length;)h.shift()(p);l==null||l.removeEventListener("abort",b),r.abort(),w&&(p||s.forEach(O=>O()),Ye.nextTick(t,p,u))}}let c;for(let R=0;R<e.length;R++){const w=e[R],O=R<e.length-1,D=R>0,x=O||(n==null?void 0:n.end)!==!1,L=R===e.length-1;if(Yn(w)){let P=function(H){H&&H.name!=="AbortError"&&H.code!=="ERR_STREAM_PREMATURE_CLOSE"&&N(H)};if(x){const{destroy:H,cleanup:V}=Jn(w,O,D);h.push(H),Lt(w)&&L&&s.push(V)}w.on("error",P),Lt(w)&&L&&s.push(()=>{w.removeListener("error",P)})}if(R===0)if(typeof w=="function"){if(c=w({signal:a}),!Ie(c))throw new Pt("Iterable, AsyncIterable or Stream","source",c)}else Ie(w)||rt(w)||We(w)?c=w:c=Kn.from(w);else if(typeof w=="function"){if(We(c)){var k;c=Ut((k=c)===null||k===void 0?void 0:k.readable)}else c=Ut(c);if(c=w(c,{signal:a}),O){if(!Ie(c,!0))throw new Pt("AsyncIterable",`transform[${R-1}]`,c)}else{var v;Ft||(Ft=Gr);const P=new Ft({objectMode:!0}),H=(v=c)===null||v===void 0?void 0:v.then;if(typeof H=="function")A++,H.call(c,$=>{u=$,$!=null&&P.write($),x&&P.end(),Ye.nextTick(N)},$=>{P.destroy($),Ye.nextTick(N,$)});else if(Ie(c,!0))A++,et(c,P,N,{end:x});else if(Wt(c)||We(c)){const $=c.readable||c;A++,et($,P,N,{end:x})}else throw new Pt("AsyncIterable or Promise","destination",c);c=P;const{destroy:V,cleanup:_}=Jn(c,!1,!0);h.push(V),L&&s.push(_)}}else if(Yn(w)){if(rt(c)){A+=2;const P=Pa(c,w,N,{end:x});Lt(w)&&L&&s.push(P)}else if(We(c)||Wt(c)){const P=c.readable||c;A++,et(P,w,N,{end:x})}else if(Ie(c))A++,et(c,w,N,{end:x});else throw new en("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],c);c=w}else if(Oa(w)){if(rt(c))A++,Bt(Ut(c),w,N,{end:x});else if(Wt(c)||Ie(c))A++,Bt(c,w,N,{end:x});else if(We(c))A++,Bt(c.readable,w,N,{end:x});else throw new en("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],c);c=w}else c=Kn.from(w)}return(a!=null&&a.aborted||l!=null&&l.aborted)&&Ye.nextTick(b),c}function Pa(e,t,n,{end:r}){let a=!1;if(t.on("close",()=>{a||n(new Na)}),e.pipe(t,{end:!1}),r){let l=function(){a=!0,t.end()};xa(e)?Ye.nextTick(l):e.once("end",l)}else n();return at(e,{readable:!0,writable:!1},l=>{const s=e._readableState;l&&l.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",n).once("error",n):n(l)}),at(t,{readable:!1,writable:!0},n)}var hn={pipelineImpl:Hr,pipeline:Da};const{pipeline:La}=hn,tt=we(),{destroyer:Wa}=Ue,{isNodeStream:nt,isReadable:zn,isWritable:Qn,isWebStream:Gt,isTransformStream:Ce,isWritableStream:Xn,isReadableStream:Zn}=me,{AbortError:Fa,codes:{ERR_INVALID_ARG_VALUE:er,ERR_MISSING_ARGS:ja}}=re,Ua=Re;var Vr=function(...t){if(t.length===0)throw new ja("streams");if(t.length===1)return tt.from(t[0]);const n=[...t];if(typeof t[0]=="function"&&(t[0]=tt.from(t[0])),typeof t[t.length-1]=="function"){const g=t.length-1;t[g]=tt.from(t[g])}for(let g=0;g<t.length;++g)if(!(!nt(t[g])&&!Gt(t[g]))){if(g<t.length-1&&!(zn(t[g])||Zn(t[g])||Ce(t[g])))throw new er(`streams[${g}]`,n[g],"must be readable");if(g>0&&!(Qn(t[g])||Xn(t[g])||Ce(t[g])))throw new er(`streams[${g}]`,n[g],"must be writable")}let r,a,l,s,b;function p(g){const c=s;s=null,c?c(g):g?b.destroy(g):!N&&!A&&b.destroy()}const u=t[0],h=La(t,p),A=!!(Qn(u)||Xn(u)||Ce(u)),N=!!(zn(h)||Zn(h)||Ce(h));if(b=new tt({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(h!=null&&h.writableObjectMode),writable:A,readable:N}),A){if(nt(u))b._write=function(c,k,v){u.write(c,k)?v():r=v},b._final=function(c){u.end(),a=c},u.on("drain",function(){if(r){const c=r;r=null,c()}});else if(Gt(u)){const k=(Ce(u)?u.writable:u).getWriter();b._write=async function(v,R,w){try{await k.ready,k.write(v).catch(()=>{}),w()}catch(O){w(O)}},b._final=async function(v){try{await k.ready,k.close().catch(()=>{}),a=v}catch(R){v(R)}}}const g=Ce(h)?h.readable:h;Ua(g,()=>{if(a){const c=a;a=null,c()}})}if(N){if(nt(h))h.on("readable",function(){if(l){const g=l;l=null,g()}}),h.on("end",function(){b.push(null)}),b._read=function(){for(;;){const g=h.read();if(g===null){l=b._read;return}if(!b.push(g))return}};else if(Gt(h)){const c=(Ce(h)?h.readable:h).getReader();b._read=async function(){for(;;)try{const{value:k,done:v}=await c.read();if(!b.push(k))return;if(v){b.push(null);return}}catch{return}}}}return b._destroy=function(g,c){!g&&s!==null&&(g=new Fa),l=null,r=null,a=null,s===null?c(g):(s=c,nt(h)&&Wa(h,g))},b};const qr=globalThis.AbortController||tn().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Ba,ERR_INVALID_ARG_TYPE:Xe,ERR_MISSING_ARGS:Ga,ERR_OUT_OF_RANGE:Ha},AbortError:ce}=re,{validateAbortSignal:ke,validateInteger:Va,validateObject:$e}=ct,qa=J.Symbol("kWeak"),{finished:Ka}=Re,Ya=Vr,{addAbortSignalNoValidate:Ja}=_t,{isWritable:za,isNodeStream:Qa}=me,{ArrayPrototypePush:Xa,MathFloor:Za,Number:el,NumberIsNaN:tl,Promise:tr,PromiseReject:nr,PromisePrototypeThen:nl,Symbol:Kr}=J,lt=Kr("kEmpty"),rr=Kr("kEof");function rl(e,t){if(t!=null&&$e(t,"options"),(t==null?void 0:t.signal)!=null&&ke(t.signal,"options.signal"),Qa(e)&&!za(e))throw new Ba("stream",e,"must be writable");const n=Ya(this,e);return t!=null&&t.signal&&Ja(t.signal,n),n}function St(e,t){if(typeof e!="function")throw new Xe("fn",["Function","AsyncFunction"],e);t!=null&&$e(t,"options"),(t==null?void 0:t.signal)!=null&&ke(t.signal,"options.signal");let n=1;return(t==null?void 0:t.concurrency)!=null&&(n=Za(t.concurrency)),Va(n,"concurrency",1),(async function*(){var a,l;const s=new qr,b=this,p=[],u=s.signal,h={signal:u},A=()=>s.abort();t!=null&&(a=t.signal)!==null&&a!==void 0&&a.aborted&&A(),t==null||(l=t.signal)===null||l===void 0||l.addEventListener("abort",A);let N,g,c=!1;function k(){c=!0}async function v(){try{for await(let O of b){var R;if(c)return;if(u.aborted)throw new ce;try{O=e(O,h)}catch(D){O=nr(D)}O!==lt&&(typeof((R=O)===null||R===void 0?void 0:R.catch)=="function"&&O.catch(k),p.push(O),N&&(N(),N=null),!c&&p.length&&p.length>=n&&await new tr(D=>{g=D}))}p.push(rr)}catch(O){const D=nr(O);nl(D,void 0,k),p.push(D)}finally{var w;c=!0,N&&(N(),N=null),t==null||(w=t.signal)===null||w===void 0||w.removeEventListener("abort",A)}}v();try{for(;;){for(;p.length>0;){const R=await p[0];if(R===rr)return;if(u.aborted)throw new ce;R!==lt&&(yield R),p.shift(),g&&(g(),g=null)}await new tr(R=>{N=R})}}finally{s.abort(),c=!0,g&&(g(),g=null)}}).call(this)}function il(e=void 0){return e!=null&&$e(e,"options"),(e==null?void 0:e.signal)!=null&&ke(e.signal,"options.signal"),(async function*(){let n=0;for await(const a of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new ce({cause:e.signal.reason});yield[n++,a]}}).call(this)}async function Yr(e,t=void 0){for await(const n of bn.call(this,e,t))return!0;return!1}async function ol(e,t=void 0){if(typeof e!="function")throw new Xe("fn",["Function","AsyncFunction"],e);return!await Yr.call(this,async(...n)=>!await e(...n),t)}async function al(e,t){for await(const n of bn.call(this,e,t))return n}async function ll(e,t){if(typeof e!="function")throw new Xe("fn",["Function","AsyncFunction"],e);async function n(r,a){return await e(r,a),lt}for await(const r of St.call(this,n,t));}function bn(e,t){if(typeof e!="function")throw new Xe("fn",["Function","AsyncFunction"],e);async function n(r,a){return await e(r,a)?r:lt}return St.call(this,n,t)}class sl extends Ga{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function fl(e,t,n){var r;if(typeof e!="function")throw new Xe("reducer",["Function","AsyncFunction"],e);n!=null&&$e(n,"options"),(n==null?void 0:n.signal)!=null&&ke(n.signal,"options.signal");let a=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){const u=new ce(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await Ka(this.destroy(u)),u}const l=new qr,s=l.signal;if(n!=null&&n.signal){const u={once:!0,[qa]:this};n.signal.addEventListener("abort",()=>l.abort(),u)}let b=!1;try{for await(const u of this){var p;if(b=!0,n!=null&&(p=n.signal)!==null&&p!==void 0&&p.aborted)throw new ce;a?t=await e(t,u,{signal:s}):(t=u,a=!0)}if(!b&&!a)throw new sl}finally{l.abort()}return t}async function dl(e){e!=null&&$e(e,"options"),(e==null?void 0:e.signal)!=null&&ke(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ce(void 0,{cause:e.signal.reason});Xa(t,r)}return t}function ul(e,t){const n=St.call(this,e,t);return(async function*(){for await(const a of n)yield*a}).call(this)}function Jr(e){if(e=el(e),tl(e))return 0;if(e<0)throw new Ha("number",">= 0",e);return e}function cl(e,t=void 0){return t!=null&&$e(t,"options"),(t==null?void 0:t.signal)!=null&&ke(t.signal,"options.signal"),e=Jr(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ce;for await(const l of this){var a;if(t!=null&&(a=t.signal)!==null&&a!==void 0&&a.aborted)throw new ce;e--<=0&&(yield l)}}).call(this)}function hl(e,t=void 0){return t!=null&&$e(t,"options"),(t==null?void 0:t.signal)!=null&&ke(t.signal,"options.signal"),e=Jr(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ce;for await(const l of this){var a;if(t!=null&&(a=t.signal)!==null&&a!==void 0&&a.aborted)throw new ce;if(e-- >0)yield l;else return}}).call(this)}nn.streamReturningOperators={asIndexedPairs:il,drop:cl,filter:bn,flatMap:ul,map:St,take:hl,compose:rl};nn.promiseReturningOperators={every:ol,forEach:ll,reduce:fl,toArray:dl,some:Yr,find:al};var Ht,ir;function zr(){if(ir)return Ht;ir=1;const{ArrayPrototypePop:e,Promise:t}=J,{isIterable:n,isNodeStream:r,isWebStream:a}=me,{pipelineImpl:l}=hn,{finished:s}=Re;Qr();function b(...p){return new t((u,h)=>{let A,N;const g=p[p.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const c=e(p);A=c.signal,N=c.end}l(p,(c,k)=>{c?h(c):u(k)},{signal:A,end:N})})}return Ht={finished:s,pipeline:b},Ht}var or;function Qr(){if(or)return It.exports;or=1;const{Buffer:e}=xe,{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=J,{promisify:{custom:a}}=_e,{streamReturningOperators:l,promiseReturningOperators:s}=nn,{codes:{ERR_ILLEGAL_CONSTRUCTOR:b}}=re,p=Vr,{pipeline:u}=hn,{destroyer:h}=Ue,A=Re,N=zr(),g=me,c=It.exports=fn.Stream;c.isDisturbed=g.isDisturbed,c.isErrored=g.isErrored,c.isReadable=g.isReadable,c.Readable=mt();for(const v of n(l)){let w=function(...O){if(new.target)throw b();return c.Readable.from(r(R,this,O))};const R=l[v];t(w,"name",{__proto__:null,value:R.name}),t(w,"length",{__proto__:null,value:R.length}),t(c.Readable.prototype,v,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(const v of n(s)){let w=function(...O){if(new.target)throw b();return r(R,this,O)};const R=s[v];t(w,"name",{__proto__:null,value:R.name}),t(w,"length",{__proto__:null,value:R.length}),t(c.Readable.prototype,v,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}c.Writable=Fr(),c.Duplex=we(),c.Transform=Ur,c.PassThrough=Gr,c.pipeline=u;const{addAbortSignal:k}=_t;return c.addAbortSignal=k,c.finished=A,c.destroy=h,c.compose=p,t(c,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return N}}),t(u,a,{__proto__:null,enumerable:!0,get(){return N.pipeline}}),t(A,a,{__proto__:null,enumerable:!0,get(){return N.finished}}),c.Stream=c,c._isUint8Array=function(R){return R instanceof Uint8Array},c._uint8ArrayToBuffer=function(R){return e.from(R.buffer,R.byteOffset,R.byteLength)},It.exports}(function(e){const t=Qr(),n=zr(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(di);function ar(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}function bl(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}class gl extends dt.EventEmitter{emit(t){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;for(var a=arguments.length,l=new Array(a>1?a-1:0),s=1;s<a;s++)l[s-1]=arguments[s];if(n){let p;if(l.length>0&&([p]=l),p instanceof Error)throw p;const u=new Error(`Unhandled error.${p?` (${p.message})`:""}`);throw u.context=p,u}const b=r[t];if(b===void 0)return!1;if(typeof b=="function")ar(b,this,l);else{const p=b.length,u=bl(b);for(let h=0;h<p;h+=1)ar(u[h],this,l)}return!0}}function lr(e){let t=!1,n=0,r;try{r=window[e],t=!0,n=r.length;const a="__storage_test__";return r.setItem(a,a),r.removeItem(a),!0}catch(a){const l=a;return l&&(l.code===22||l.code===1014||l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&n!==0}}class pl{constructor(){q(this,"store",{})}getItem(t){return this.store[t]||null}setItem(t,n){this.store[t]=n}}class wl{constructor(t,n){q(this,"storage",void 0),q(this,"_storeKey",void 0),this.storage=n,this._storeKey=t;try{n.getItem(t)||this.resetStore()}catch{}}static getInstance(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instance){let r;n==="local"&&lr("localStorage")?r=window.localStorage:n==="session"&&lr("sessionStorage")?r=window.sessionStorage:r=new pl,this.instance=new this(t,r)}return this.instance}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const t=this.getStore();return this.storage.setItem(this._storeKey,JSON.stringify({})),t}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(t){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[t]}set(t,n){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[t]=n,this.storage.setItem(this._storeKey,JSON.stringify(r))}}q(wl,"instance",void 0);const yl=ee(ee({},ii),oi),st=sr.getLogger("http-helpers");st.setLevel(ai.levels.INFO);let _l="torus-default";const ml="x-api-key";async function Sl(e,t){let n=null;try{n=new URL(e)}catch{}return fetch(e,t)}function El(){const e={};return e[ml]=_l,e}function Rl(e){st.info(`Response: ${e.status} ${e.statusText}`),st.info(`Url: ${e.url}`)}function Al(e){st.info(`Request tracing with traceID=${e.headers.get("x-web3-correlation-id")}`)}const Tl=(e,t)=>{const n=new Promise((r,a)=>{const l=setTimeout(()=>{clearTimeout(l),a(new Error(`Timed out in ${e}ms`))},e)});return Promise.race([t,n])},Xr=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(a.headers=ee(ee({},a.headers),El()));const l=li(a,n,{method:"POST"});return r.isUrlEncodedData?(l.body=t,l.headers["Content-Type"]==="application/json; charset=utf-8"&&delete l.headers["Content-Type"]):l.body=JSON.stringify(t),Tl(r.timeout||6e4,Sl(e,l).then(s=>{if(r.logTracingHeader&&Al(s),s.ok){const b=s.headers.get("content-type");return b!=null&&b.includes("application/json")?s.json():s.text()}throw Rl(s),s}))};class Je extends Error{}Je.prototype.name="InvalidTokenError";function Nl(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function Cl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Nl(t)}catch{return atob(t)}}function Il(e,t){if(typeof e!="string")throw new Je("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new Je(`Invalid token specified: missing part #${n+1}`);let a;try{a=Cl(r)}catch(l){throw new Je(`Invalid token specified: invalid base64 for part #${n+1} (${l.message})`)}try{return JSON.parse(a)}catch(l){throw new Je(`Invalid token specified: invalid json for part #${n+1} (${l.message})`)}}const ue={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},vl=e=>{if(e===ue.EIP155)return 1;if(e===ue.SOLANA)return 1;throw new Error(`Chain namespace ${e} is not supported`)},Ol=e=>{const t=ue.EIP155;return e===1?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:e===5?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:e===11155111?{chainNamespace:t,chainId:"0xaa36a7",rpcTarget:"https://rpc.ankr.com/eth_sepolia",displayName:"Sepolia Testnet",blockExplorer:"https://sepolia.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:e===137?{chainNamespace:t,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:e===80001?{chainNamespace:t,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon",decimals:18}:e===56?{chainNamespace:t,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:e===97?{chainNamespace:t,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:e===25?{chainNamespace:t,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:e===338?{chainNamespace:t,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos",decimals:18}:e===8217?{chainNamespace:t,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn",decimals:18}:null},xl=e=>{const t=ue.SOLANA;return e===1?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana",decimals:9}:e===2?{chainNamespace:t,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana",decimals:9}:e===3?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana",decimals:9}:null},Zr=(e,t)=>{if(e===ue.OTHER)return null;const n=t?typeof t=="number"?t:parseInt(t,16):vl(e);return e===ue.EIP155?Ol(n):e===ue.SOLANA?xl(n):null};class Et extends si{constructor(t,n){super(n),q(this,"code",void 0),q(this,"message",void 0),this.code=t,this.message=n||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class G extends Et{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new G(t,`${G.messages[t]}, ${n}`)}static notFound(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5001,t)}static notInstalled(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5002,t)}static notReady(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5003,t)}static windowBlocked(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5004,t)}static windowClosed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5005,t)}static incompatibleChainNameSpace(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5006,t)}static duplicateAdapterError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5007,t)}static invalidProviderConfigError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5008,t)}static providerNotReadyError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5009,t)}static rpcConnectionError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5010,t)}static invalidParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5011,t)}static invalidNetwork(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return G.fromCode(5013,t)}}q(G,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class K extends Et{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new K(t,`${K.messages[t]}. ${n}`)}static connectionError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return K.fromCode(5111,t)}static disconnectionError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return K.fromCode(5112,t)}static notConnectedError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return K.fromCode(5113,t)}static popupClosed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return K.fromCode(5114,t)}static mfaEnabled(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return K.fromCode(5115,t)}static chainConfigNotAdded(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return K.fromCode(5116,t)}static unsupportedOperation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return K.fromCode(5117,t)}static coreKitKeyNotFound(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return K.fromCode(5118,t)}static userNotLoggedIn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return K.fromCode(5119,t)}}q(K,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useCoreKitKey flag is enabled but coreKitKey is not available",5119:"User not logged in."});class ae extends Et{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new ae(t,`${ae.messages[t]}, ${n}`)}static chainIDNotAllowed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5201,t)}static operationNotAllowed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5202,t)}static chainNamespaceNotAllowed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5203,t)}}q(ae,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});class gn extends Et{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new ae(t,`${gn.messages[t]}, ${n}`)}static invalidRequestArgs(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5301,t)}static invalidRequestMethod(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5302,t)}static invalidRequestParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5303,t)}}q(gn,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});const ft={OPENLOGIN:"openlogin",WALLET_CONNECT_V2:"wallet-connect-v2"},ze=ee({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLFLARE:"solflare",SLOPE:"slope"},ft),it=ee({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},ft),Ml=ee(ee({},it),ze);ft.OPENLOGIN+"",ft.WALLET_CONNECT_V2+"",ze.TORUS_SOLANA+"",ze.PHANTOM+"",ze.SOLFLARE+"",ze.SLOPE+"",it.TORUS_EVM+"",it.METAMASK+"",it.COINBASE+"";const oe={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},ei=ee(ee({},oe),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated",CACHE_CLEAR:"cache_clear"});class kl extends gl{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),q(this,"adapterData",{}),q(this,"sessionTime",86400),q(this,"clientId",void 0),q(this,"web3AuthNetwork",yl.MAINNET),q(this,"rehydrated",!1),q(this,"chainConfig",null),q(this,"knownChainConfigs",{}),q(this,"adapterNamespace",void 0),q(this,"currentChainNamespace",void 0),q(this,"type",void 0),q(this,"name",void 0),q(this,"status",void 0),this.setAdapterSettings(t)}get chainConfigProxy(){return this.chainConfig?ee({},this.chainConfig):null}get connnected(){return this.status===oe.CONNECTED}setAdapterSettings(t){if(this.status===oe.READY)return;t!=null&&t.sessionTime&&(this.sessionTime=t.sessionTime),t!=null&&t.clientId&&(this.clientId=t.clientId),t!=null&&t.web3AuthNetwork&&(this.web3AuthNetwork=t.web3AuthNetwork);const n=t.chainConfig;if(n){if(!n.chainNamespace)throw G.notReady("ChainNamespace is required while setting chainConfig");this.currentChainNamespace=n.chainNamespace;const r=Zr(n.chainNamespace,n.chainId),a=ee(ee({},r||{}),n);this.chainConfig=a,this.addChainConfig(a)}}checkConnectionRequirements(){if(!(this.name===Ml.WALLET_CONNECT_V2&&this.status===oe.CONNECTING)){if(this.status===oe.CONNECTING)throw G.notReady("Already connecting");if(this.status===oe.CONNECTED)throw K.connectionError("Already connected");if(this.status!==oe.READY)throw K.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements(){if(!this.clientId)throw G.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!this.chainConfig||!this.chainConfig.rpcTarget&&this.chainConfig.chainNamespace!==ue.OTHER)throw G.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.chainId&&this.chainConfig.chainNamespace!==ue.OTHER)throw G.invalidParams("chainID is required in chainConfig");if(this.status!==oe.NOT_READY){if(this.status===oe.CONNECTED)throw G.notReady("Already connected");if(this.status===oe.READY)throw G.notReady("Adapter is already initialized")}}checkDisconnectionRequirements(){if(this.status!==oe.CONNECTED)throw K.disconnectionError("Not connected with wallet")}checkAddChainRequirements(t){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&!this.provider)throw K.notConnectedError("Not connected with wallet.");if(this.currentChainNamespace!==t.chainNamespace)throw ae.chainNamespaceNotAllowed("This adapter doesn't support this chainNamespace")}checkSwitchChainRequirements(t){let{chainId:n}=t;if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&!this.provider)throw K.notConnectedError("Not connected with wallet.");if(!this.knownChainConfigs[n])throw K.chainConfigNotAdded("Invalid chainId")}updateAdapterData(t){this.adapterData=t,this.emit(ei.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:t})}addChainConfig(t){const n=this.knownChainConfigs[t.chainId];this.knownChainConfigs[t.chainId]=ee(ee({},n||{}),t)}getChainConfig(t){return this.knownChainConfigs[t]||null}}const ti="https://authjs.web3auth.io";var $l=sr.getLogger("web3auth-logger");function pn(e){let t=!1,n=0,r;try{r=window[e],t=!0,n=r.length;const a="__storage_test__";return r.setItem(a,a),r.removeItem(a),!0}catch(a){const l=a;return!!(l&&(l.code===22||l.code===1014||l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&n!==0)}}const Dl=e=>{const t=Il(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)},Pl=async(e,t)=>{const l={payload:e,header:{t:t==="solana"?"sip99":"eip191"},network:t==="solana"?"solana":"ethereum"},s=await Xr(`${ti}/siww/get`,l);if(!s.success)throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return s.challenge},Ll=async(e,t,n,r,a,l,s)=>{const p={signature:{s:t,t:e==="solana"?"sip99":"eip191"},message:n,issuer:r,audience:typeof window.location<"u"?window.location.hostname:"com://reactnative",timeout:a},u=await Xr(`${ti}/siww/verify`,p,{headers:{client_id:l,wallet_provider:r,web3auth_network:s}});if(!u.success)throw $l.error("Failed to authenticate user, ,message verification failed",u.error),new Error("Failed to authenticate user, ,message verification failed");return u.token},Wl=(e,t)=>pn("localStorage")?localStorage.getItem(`${e.toLowerCase()}_${t}`):null,Fl=(e,t,n)=>pn("localStorage")?localStorage.setItem(`${e.toLowerCase()}_${t}`,n):null,jl=(e,t)=>pn("localStorage")?localStorage.removeItem(`${e.toLowerCase()}_${t}`):null;function Ul(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var a=e.charAt(r),l=a.charCodeAt(0);if(t[l]!==255)throw new TypeError(a+" is ambiguous");t[l]=r}var s=e.length,b=e.charAt(0),p=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var c=0,k=0,v=0,R=g.length;v!==R&&g[v]===0;)v++,c++;for(var w=(R-v)*u+1>>>0,O=new Uint8Array(w);v!==R;){for(var D=g[v],x=0,L=w-1;(D!==0||x<k)&&L!==-1;L--,x++)D+=256*O[L]>>>0,O[L]=D%s>>>0,D=D/s>>>0;if(D!==0)throw new Error("Non-zero carry");k=x,v++}for(var P=w-k;P!==w&&O[P]===0;)P++;for(var H=b.repeat(c);P<w;++P)H+=e.charAt(O[P]);return H}function A(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var c=0,k=0,v=0;g[c]===b;)k++,c++;for(var R=(g.length-c)*p+1>>>0,w=new Uint8Array(R);g[c];){var O=t[g.charCodeAt(c)];if(O===255)return;for(var D=0,x=R-1;(O!==0||D<v)&&x!==-1;x--,D++)O+=s*w[x]>>>0,w[x]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");v=D,c++}for(var L=R-v;L!==R&&w[L]===0;)L++;for(var P=new Uint8Array(k+(R-L)),H=k;L!==R;)P[H++]=w[L++];return P}function N(g){var c=A(g);if(c)return c;throw new Error("Non-base"+s+" character")}return{encode:h,decodeUnsafe:A,decode:N}}var Bl=Ul;const Gl=Bl,Hl="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Vl=Gl(Hl);const ql=fi(Vl);class zl extends kl{async init(t){this.chainConfig||(this.chainConfig=Zr(ue.SOLANA,1))}async authenticateUser(){if(!this.provider||this.status!==oe.CONNECTED)throw K.notConnectedError();const{chainNamespace:t,chainId:n}=this.chainConfig,r=await this.provider.request({method:"getAccounts"});if(r&&r.length>0){const a=Wl(r[0],this.name);if(a&&!Dl(a))return{idToken:a};const l={domain:window.location.origin,uri:window.location.href,address:r[0],chainId:parseInt(n,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},s=await Pl(l,t),b=new TextEncoder().encode(s),p=await this.provider.request({method:"signMessage",params:{message:b,display:"utf8"}}),u=await Ll(t,ql.encode(p),s,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return Fl(r[0],this.name,u),{idToken:u}}throw K.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const t=await this.provider.request({method:"getAccounts"});t&&t.length>0&&jl(t[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(ei.DISCONNECTED)}}export{zl as B};

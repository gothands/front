import{b as ke,c as $e,e as ut,s as ri,r as tn,d as G,_ as ee,T as ii,j as oi,l as sr,a as ai,m as li,C as si}from"./index-L3ozMu8u.js";var fi={exports:{}},Ct={exports:{}},K={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Uint8Array},fr={exports:{}};(function(e){const t=ke,n=Object.getPrototypeOf(async function(){}).constructor,r=globalThis.Blob||t.Blob,a=typeof r<"u"?function(h){return h instanceof r}:function(h){return!1};class l extends Error{constructor(h){if(!Array.isArray(h))throw new TypeError(`Expected input to be an Array, got ${typeof h}`);let g="";for(let d=0;d<h.length;d++)g+=`    ${h[d].stack}
`;super(g),this.name="AggregateError",this.errors=h}}e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(s){let h=!1;return function(...g){h||(h=!0,s.apply(this,g))}},createDeferredPromise:function(){let s,h;return{promise:new Promise((d,c)=>{s=d,h=c}),resolve:s,reject:h}},promisify(s){return new Promise((h,g)=>{s((d,...c)=>d?g(d):h(...c))})},debuglog(){return function(){}},format(s,...h){return s.replace(/%([sdifj])/g,function(...[g,d]){const c=h.shift();return d==="f"?c.toFixed(6):d==="j"?JSON.stringify(c):d==="s"&&typeof c=="object"?`${c.constructor!==Object?c.constructor.name:""} {}`.trim():c.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof n},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:a},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(fr);var _e=fr.exports,nn={};const{format:ui,inspect:ot,AggregateError:di}=_e,ci=globalThis.AggregateError||di,hi=Symbol("kIsNodeError"),bi=["string","function","number","object","Function","Object","boolean","bigint","symbol"],gi=/^([A-Z][a-z0-9]*)+$/,pi="__node_internal_",dt={};function Oe(e,t){if(!e)throw new dt.ERR_INTERNAL_ASSERTION(t)}function En(e){let t="",n=e.length;const r=e[0]==="-"?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function wi(e,t,n){if(typeof t=="function")return Oe(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const r=(t.match(/%[dfijoOs]/g)||[]).length;return Oe(r===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?t:ui(t,...n)}function z(e,t,n){n||(n=Error);class r extends n{constructor(...l){super(wi(e,t,l))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[hi]=!0,dt[e]=r}function Rn(e){const t=pi+e.name;return Object.defineProperty(e,"name",{value:t}),e}function yi(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new ci([t,e],t.message);return n.code=t.code,n}return e||t}let _i=class extends Error{constructor(t="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new dt.ERR_INVALID_ARG_TYPE("options","Object",n);super(t,n),this.code="ABORT_ERR",this.name="AbortError"}};z("ERR_ASSERTION","%s",Error);z("ERR_INVALID_ARG_TYPE",(e,t,n)=>{Oe(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const a=[],l=[],s=[];for(const g of t)Oe(typeof g=="string","All expected entries have to be of type string"),bi.includes(g)?a.push(g.toLowerCase()):gi.test(g)?l.push(g):(Oe(g!=="object",'The value "object" should be written as "Object"'),s.push(g));if(l.length>0){const g=a.indexOf("object");g!==-1&&(a.splice(a,g,1),l.push("Object"))}if(a.length>0){switch(a.length){case 1:r+=`of type ${a[0]}`;break;case 2:r+=`one of type ${a[0]} or ${a[1]}`;break;default:{const g=a.pop();r+=`one of type ${a.join(", ")}, or ${g}`}}(l.length>0||s.length>0)&&(r+=" or ")}if(l.length>0){switch(l.length){case 1:r+=`an instance of ${l[0]}`;break;case 2:r+=`an instance of ${l[0]} or ${l[1]}`;break;default:{const g=l.pop();r+=`an instance of ${l.join(", ")}, or ${g}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const g=s.pop();r+=`one of ${s.join(", ")}, or ${g}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var h;if((h=n.constructor)!==null&&h!==void 0&&h.name)r+=`. Received an instance of ${n.constructor.name}`;else{const g=ot(n,{depth:-1});r+=`. Received ${g}`}}else{let g=ot(n,{colors:!1});g.length>25&&(g=`${g.slice(0,25)}...`),r+=`. Received type ${typeof n} (${g})`}return r},TypeError);z("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=ot(t);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError);z("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;const a=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${e} to be returned from the "${t}" function but got ${a}.`},TypeError);z("ERR_MISSING_ARGS",(...e)=>{Oe(e.length>0,"At least one arg needs to be specified");let t;const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(r=>`"${r}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}break}return`${t} must be specified`},TypeError);z("ERR_OUT_OF_RANGE",(e,t,n)=>{Oe(t,'Missing "range" argument');let r;return Number.isInteger(n)&&Math.abs(n)>2**32?r=En(String(n)):typeof n=="bigint"?(r=String(n),(n>2n**32n||n<-(2n**32n))&&(r=En(r)),r+="n"):r=ot(n),`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError);z("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);z("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);z("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);z("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);z("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);z("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);z("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);z("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);z("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);z("ERR_STREAM_WRITE_AFTER_END","write after end",Error);z("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var re={AbortError:_i,aggregateTwoErrors:Rn(yi),hideStackFrames:Rn,codes:dt};const{ArrayIsArray:rn,ArrayPrototypeIncludes:ur,ArrayPrototypeJoin:dr,ArrayPrototypeMap:mi,NumberIsInteger:on,NumberIsNaN:Si,NumberMAX_SAFE_INTEGER:Ei,NumberMIN_SAFE_INTEGER:Ri,NumberParseInt:Ai,ObjectPrototypeHasOwnProperty:Ti,RegExpPrototypeExec:cr,String:Ni,StringPrototypeToUpperCase:Ii,StringPrototypeTrim:Ci}=K,{hideStackFrames:le,codes:{ERR_SOCKET_BAD_PORT:Oi,ERR_INVALID_ARG_TYPE:te,ERR_INVALID_ARG_VALUE:Fe,ERR_OUT_OF_RANGE:xe,ERR_UNKNOWN_SIGNAL:An}}=re,{normalizeEncoding:xi}=_e,{isAsyncFunction:ki,isArrayBufferView:$i}=_e.types,Tn={};function Mi(e){return e===(e|0)}function vi(e){return e===e>>>0}const Di=/^[0-7]+$/,Pi="must be a 32-bit unsigned integer or an octal string";function Li(e,t,n){if(typeof e>"u"&&(e=n),typeof e=="string"){if(cr(Di,e)===null)throw new Fe(t,e,Pi);e=Ai(e,8)}return hr(e,t),e}const Wi=le((e,t,n=Ri,r=Ei)=>{if(typeof e!="number")throw new te(t,"number",e);if(!on(e))throw new xe(t,"an integer",e);if(e<n||e>r)throw new xe(t,`>= ${n} && <= ${r}`,e)}),ji=le((e,t,n=-2147483648,r=2147483647)=>{if(typeof e!="number")throw new te(t,"number",e);if(!on(e))throw new xe(t,"an integer",e);if(e<n||e>r)throw new xe(t,`>= ${n} && <= ${r}`,e)}),hr=le((e,t,n=!1)=>{if(typeof e!="number")throw new te(t,"number",e);if(!on(e))throw new xe(t,"an integer",e);const r=n?1:0,a=4294967295;if(e<r||e>a)throw new xe(t,`>= ${r} && <= ${a}`,e)});function an(e,t){if(typeof e!="string")throw new te(t,"string",e)}function Fi(e,t,n=void 0,r){if(typeof e!="number")throw new te(t,"number",e);if(n!=null&&e<n||r!=null&&e>r||(n!=null||r!=null)&&Si(e))throw new xe(t,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,e)}const Ui=le((e,t,n)=>{if(!ur(n,e)){const a="must be one of: "+dr(mi(n,l=>typeof l=="string"?`'${l}'`:Ni(l)),", ");throw new Fe(t,e,a)}});function br(e,t){if(typeof e!="boolean")throw new te(t,"boolean",e)}function Ot(e,t,n){return e==null||!Ti(e,t)?n:e[t]}const Bi=le((e,t,n=null)=>{const r=Ot(n,"allowArray",!1),a=Ot(n,"allowFunction",!1);if(!Ot(n,"nullable",!1)&&e===null||!r&&rn(e)||typeof e!="object"&&(!a||typeof e!="function"))throw new te(t,"Object",e)}),Hi=le((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new te(t,"a dictionary",e)}),ln=le((e,t,n=0)=>{if(!rn(e))throw new te(t,"Array",e);if(e.length<n){const r=`must be longer than ${n}`;throw new Fe(t,e,r)}});function Gi(e,t){ln(e,t);for(let n=0;n<e.length;n++)an(e[n],`${t}[${n}]`)}function Vi(e,t){ln(e,t);for(let n=0;n<e.length;n++)br(e[n],`${t}[${n}]`)}function qi(e,t="signal"){if(an(e,t),Tn[e]===void 0)throw Tn[Ii(e)]!==void 0?new An(e+" (signals must use all capital letters)"):new An(e)}const Ki=le((e,t="buffer")=>{if(!$i(e))throw new te(t,["Buffer","TypedArray","DataView"],e)});function Yi(e,t){const n=xi(t),r=e.length;if(n==="hex"&&r%2!==0)throw new Fe("encoding",t,`is invalid for data of length ${r}`)}function Ji(e,t="Port",n=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&Ci(e).length===0||+e!==+e>>>0||e>65535||e===0&&!n)throw new Oi(t,e,n);return e|0}const Qi=le((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new te(t,"AbortSignal",e)}),Xi=le((e,t)=>{if(typeof e!="function")throw new te(t,"Function",e)}),zi=le((e,t)=>{if(typeof e!="function"||ki(e))throw new te(t,"Function",e)}),Zi=le((e,t)=>{if(e!==void 0)throw new te(t,"undefined",e)});function eo(e,t,n){if(!ur(n,e))throw new te(t,`('${dr(n,"|")}')`,e)}const to=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Nn(e,t){if(typeof e>"u"||!cr(to,e))throw new Fe(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function no(e){if(typeof e=="string")return Nn(e,"hints"),e;if(rn(e)){const t=e.length;let n="";if(t===0)return n;for(let r=0;r<t;r++){const a=e[r];Nn(a,"hints"),n+=a,r!==t-1&&(n+=", ")}return n}throw new Fe("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var ct={isInt32:Mi,isUint32:vi,parseFileMode:Li,validateArray:ln,validateStringArray:Gi,validateBooleanArray:Vi,validateBoolean:br,validateBuffer:Ki,validateDictionary:Hi,validateEncoding:Yi,validateFunction:Xi,validateInt32:ji,validateInteger:Wi,validateNumber:Fi,validateObject:Bi,validateOneOf:Ui,validatePlainFunction:zi,validatePort:Ji,validateSignalName:qi,validateString:an,validateUint32:hr,validateUndefined:Zi,validateUnion:eo,validateAbortSignal:Qi,validateLinkHeaderValue:no},sn={exports:{}};const{Symbol:ht,SymbolAsyncIterator:In,SymbolIterator:Cn,SymbolFor:gr}=K,pr=ht("kDestroyed"),wr=ht("kIsErrored"),Vt=ht("kIsReadable"),yr=ht("kIsDisturbed"),ro=gr("nodejs.webstream.isClosedPromise"),io=gr("nodejs.webstream.controllerErrorFunction");function bt(e,t=!1){var n;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((n=e._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!e._writableState||e._readableState))}function gt(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function oo(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function he(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function _r(e){return!!(e&&!he(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function mr(e){return!!(e&&!he(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function Sr(e){return!!(e&&!he(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function ao(e){return _r(e)||mr(e)||Sr(e)}function lo(e,t){return e==null?!1:t===!0?typeof e[In]=="function":t===!1?typeof e[Cn]=="function":typeof e[In]=="function"||typeof e[Cn]=="function"}function pt(e){if(!he(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[pr]||r!=null&&r.destroyed)}function Er(e){if(!gt(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function so(e,t){if(!gt(e))return null;if(e.writableFinished===!0)return!0;const n=e._writableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.finished)!="boolean"?null:!!(n.finished||t===!1&&n.ended===!0&&n.length===0)}function fo(e){if(!bt(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function Rr(e,t){if(!bt(e))return null;const n=e._readableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.endEmitted)!="boolean"?null:!!(n.endEmitted||t===!1&&n.ended===!0&&n.length===0)}function Ar(e){return e&&e[Vt]!=null?e[Vt]:typeof(e==null?void 0:e.readable)!="boolean"?null:pt(e)?!1:bt(e)&&e.readable&&!Rr(e)}function Tr(e){return typeof(e==null?void 0:e.writable)!="boolean"?null:pt(e)?!1:gt(e)&&e.writable&&!Er(e)}function uo(e,t){return he(e)?pt(e)?!0:!((t==null?void 0:t.readable)!==!1&&Ar(e)||(t==null?void 0:t.writable)!==!1&&Tr(e)):null}function co(e){var t,n;return he(e)?e.writableErrored?e.writableErrored:(t=(n=e._writableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function ho(e){var t,n;return he(e)?e.readableErrored?e.readableErrored:(t=(n=e._readableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function bo(e){if(!he(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,n=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(n==null?void 0:n.closed)=="boolean"?(t==null?void 0:t.closed)||(n==null?void 0:n.closed):typeof e._closed=="boolean"&&Nr(e)?e._closed:null}function Nr(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function Ir(e){return typeof e._sent100=="boolean"&&Nr(e)}function go(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function po(e){if(!he(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&Ir(e)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function wo(e){var t;return!!(e&&((t=e[yr])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function yo(e){var t,n,r,a,l,s,h,g,d,c;return!!(e&&((t=(n=(r=(a=(l=(s=e[wr])!==null&&s!==void 0?s:e.readableErrored)!==null&&l!==void 0?l:e.writableErrored)!==null&&a!==void 0?a:(h=e._readableState)===null||h===void 0?void 0:h.errorEmitted)!==null&&r!==void 0?r:(g=e._writableState)===null||g===void 0?void 0:g.errorEmitted)!==null&&n!==void 0?n:(d=e._readableState)===null||d===void 0?void 0:d.errored)!==null&&t!==void 0?t:!((c=e._writableState)===null||c===void 0)&&c.errored))}var me={kDestroyed:pr,isDisturbed:wo,kIsDisturbed:yr,isErrored:yo,kIsErrored:wr,isReadable:Ar,kIsReadable:Vt,kIsClosedPromise:ro,kControllerErrorFunction:io,isClosed:bo,isDestroyed:pt,isDuplexNodeStream:oo,isFinished:uo,isIterable:lo,isReadableNodeStream:bt,isReadableStream:_r,isReadableEnded:fo,isReadableFinished:Rr,isReadableErrored:ho,isNodeStream:he,isWebStream:ao,isWritable:Tr,isWritableNodeStream:gt,isWritableStream:mr,isWritableEnded:Er,isWritableFinished:so,isWritableErrored:co,isServerRequest:go,isServerResponse:Ir,willEmitClose:po,isTransformStream:Sr};const Ee=$e,{AbortError:Cr,codes:_o}=re,{ERR_INVALID_ARG_TYPE:mo,ERR_STREAM_PREMATURE_CLOSE:On}=_o,{kEmptyObject:qt,once:Kt}=_e,{validateAbortSignal:So,validateFunction:Eo,validateObject:Ro,validateBoolean:Ao}=ct,{Promise:To,PromisePrototypeThen:No}=K,{isClosed:Io,isReadable:xn,isReadableNodeStream:xt,isReadableStream:Co,isReadableFinished:kn,isReadableErrored:$n,isWritable:Mn,isWritableNodeStream:vn,isWritableStream:Oo,isWritableFinished:Dn,isWritableErrored:Pn,isNodeStream:xo,willEmitClose:ko,kIsClosedPromise:$o}=me;function Mo(e){return e.setHeader&&typeof e.abort=="function"}const Yt=()=>{};function Or(e,t,n){var r,a;if(arguments.length===2?(n=t,t=qt):t==null?t=qt:Ro(t,"options"),Eo(n,"callback"),So(t.signal,"options.signal"),n=Kt(n),Co(e)||Oo(e))return vo(e,t,n);if(!xo(e))throw new mo("stream",["ReadableStream","WritableStream","Stream"],e);const l=(r=t.readable)!==null&&r!==void 0?r:xt(e),s=(a=t.writable)!==null&&a!==void 0?a:vn(e),h=e._writableState,g=e._readableState,d=()=>{e.writable||I()};let c=ko(e)&&xt(e)===l&&vn(e)===s,R=Dn(e,!1);const I=()=>{R=!0,e.destroyed&&(c=!1),!(c&&(!e.readable||l))&&(!l||y)&&n.call(e)};let y=kn(e,!1);const b=()=>{y=!0,e.destroyed&&(c=!1),!(c&&(!e.writable||s))&&(!s||R)&&n.call(e)},v=k=>{n.call(e,k)};let x=Io(e);const C=()=>{x=!0;const k=Pn(e)||$n(e);if(k&&typeof k!="boolean")return n.call(e,k);if(l&&!y&&xt(e,!0)&&!kn(e,!1))return n.call(e,new On);if(s&&!R&&!Dn(e,!1))return n.call(e,new On);n.call(e)},w=()=>{x=!0;const k=Pn(e)||$n(e);if(k&&typeof k!="boolean")return n.call(e,k);n.call(e)},M=()=>{e.req.on("finish",I)};Mo(e)?(e.on("complete",I),c||e.on("abort",C),e.req?M():e.on("request",M)):s&&!h&&(e.on("end",d),e.on("close",d)),!c&&typeof e.aborted=="boolean"&&e.on("aborted",C),e.on("end",b),e.on("finish",I),t.error!==!1&&e.on("error",v),e.on("close",C),x?Ee.nextTick(C):h!=null&&h.errorEmitted||g!=null&&g.errorEmitted?c||Ee.nextTick(w):(!l&&(!c||xn(e))&&(R||Mn(e)===!1)||!s&&(!c||Mn(e))&&(y||xn(e)===!1)||g&&e.req&&e.aborted)&&Ee.nextTick(w);const B=()=>{n=Yt,e.removeListener("aborted",C),e.removeListener("complete",I),e.removeListener("abort",C),e.removeListener("request",M),e.req&&e.req.removeListener("finish",I),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",I),e.removeListener("end",b),e.removeListener("error",v),e.removeListener("close",C)};if(t.signal&&!x){const k=()=>{const Y=n;B(),Y.call(e,new Cr(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)Ee.nextTick(k);else{const Y=n;n=Kt((...H)=>{t.signal.removeEventListener("abort",k),Y.apply(e,H)}),t.signal.addEventListener("abort",k)}}return B}function vo(e,t,n){let r=!1,a=Yt;if(t.signal)if(a=()=>{r=!0,n.call(e,new Cr(void 0,{cause:t.signal.reason}))},t.signal.aborted)Ee.nextTick(a);else{const s=n;n=Kt((...h)=>{t.signal.removeEventListener("abort",a),s.apply(e,h)}),t.signal.addEventListener("abort",a)}const l=(...s)=>{r||Ee.nextTick(()=>n.apply(e,s))};return No(e[$o].promise,l,l),Yt}function Do(e,t){var n;let r=!1;return t===null&&(t=qt),(n=t)!==null&&n!==void 0&&n.cleanup&&(Ao(t.cleanup,"cleanup"),r=t.cleanup),new To((a,l)=>{const s=Or(e,t,h=>{r&&s(),h?l(h):a()})})}sn.exports=Or;sn.exports.finished=Do;var Re=sn.exports;const ue=$e,{aggregateTwoErrors:Po,codes:{ERR_MULTIPLE_CALLBACK:Lo},AbortError:Wo}=re,{Symbol:xr}=K,{kDestroyed:jo,isDestroyed:Fo,isFinished:Uo,isServerRequest:Bo}=me,kr=xr("kDestroy"),Jt=xr("kConstruct");function $r(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function Ho(e,t){const n=this._readableState,r=this._writableState,a=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof t=="function"&&t(),this):($r(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),a.constructed?Ln(this,e,t):this.once(kr,function(l){Ln(this,Po(l,e),t)}),this)}function Ln(e,t,n){let r=!1;function a(l){if(r)return;r=!0;const s=e._readableState,h=e._writableState;$r(l,h,s),h&&(h.closed=!0),s&&(s.closed=!0),typeof n=="function"&&n(l),l?ue.nextTick(Go,e,l):ue.nextTick(Mr,e)}try{e._destroy(t||null,a)}catch(l){a(l)}}function Go(e,t){Qt(e,t),Mr(e)}function Mr(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(n!=null&&n.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function Qt(e,t){const n=e._readableState,r=e._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function Vo(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function Xt(e,t,n){const r=e._readableState,a=e._writableState;if(a!=null&&a.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||a!=null&&a.autoDestroy?e.destroy(t):t&&(t.stack,a&&!a.errored&&(a.errored=t),r&&!r.errored&&(r.errored=t),n?ue.nextTick(Qt,e,t):Qt(e,t))}function qo(e,t){if(typeof e._construct!="function")return;const n=e._readableState,r=e._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),e.once(Jt,t),!(e.listenerCount(Jt)>1)&&ue.nextTick(Ko,e)}function Ko(e){let t=!1;function n(r){if(t){Xt(e,r??new Lo);return}t=!0;const a=e._readableState,l=e._writableState,s=l||a;a&&(a.constructed=!0),l&&(l.constructed=!0),s.destroyed?e.emit(kr,r):r?Xt(e,r,!0):ue.nextTick(Yo,e)}try{e._construct(r=>{ue.nextTick(n,r)})}catch(r){ue.nextTick(n,r)}}function Yo(e){e.emit(Jt)}function Wn(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function vr(e){e.emit("close")}function Jo(e,t){e.emit("error",t),ue.nextTick(vr,e)}function Qo(e,t){!e||Fo(e)||(!t&&!Uo(e)&&(t=new Wo),Bo(e)?(e.socket=null,e.destroy(t)):Wn(e)?e.abort():Wn(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?ue.nextTick(Jo,e,t):ue.nextTick(vr,e),e.destroyed||(e[jo]=!0))}var Ue={construct:qo,destroyer:Qo,destroy:Ho,undestroy:Vo,errorOrDestroy:Xt};const{ArrayIsArray:Xo,ObjectSetPrototypeOf:Dr}=K,{EventEmitter:wt}=ut;function yt(e){wt.call(this,e)}Dr(yt.prototype,wt.prototype);Dr(yt,wt);yt.prototype.pipe=function(e,t){const n=this;function r(c){e.writable&&e.write(c)===!1&&n.pause&&n.pause()}n.on("data",r);function a(){n.readable&&n.resume&&n.resume()}e.on("drain",a),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",s),n.on("close",h));let l=!1;function s(){l||(l=!0,e.end())}function h(){l||(l=!0,typeof e.destroy=="function"&&e.destroy())}function g(c){d(),wt.listenerCount(this,"error")===0&&this.emit("error",c)}zt(n,"error",g),zt(e,"error",g);function d(){n.removeListener("data",r),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",h),n.removeListener("error",g),e.removeListener("error",g),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e};function zt(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):Xo(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}var fn={Stream:yt,prependListener:zt},Pr={exports:{}};(function(e){const{AbortError:t,codes:n}=re,{isNodeStream:r,isWebStream:a,kControllerErrorFunction:l}=me,s=Re,{ERR_INVALID_ARG_TYPE:h}=n,g=(d,c)=>{if(typeof d!="object"||!("aborted"in d))throw new h(c,"AbortSignal",d)};e.exports.addAbortSignal=function(c,R){if(g(c,"signal"),!r(R)&&!a(R))throw new h("stream",["ReadableStream","WritableStream","Stream"],R);return e.exports.addAbortSignalNoValidate(c,R)},e.exports.addAbortSignalNoValidate=function(d,c){if(typeof d!="object"||!("aborted"in d))return c;const R=r(c)?()=>{c.destroy(new t(void 0,{cause:d.reason}))}:()=>{c[l](new t(void 0,{cause:d.reason}))};return d.aborted?R():(d.addEventListener("abort",R),s(c,()=>d.removeEventListener("abort",R))),c}})(Pr);var _t=Pr.exports;const{StringPrototypeSlice:jn,SymbolIterator:zo,TypedArrayPrototypeSet:Ze,Uint8Array:Zo}=K,{Buffer:kt}=ke,{inspect:ea}=_e;var ta=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(t){const n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=t+n.data;return r}concat(t){if(this.length===0)return kt.alloc(0);const n=kt.allocUnsafe(t>>>0);let r=this.head,a=0;for(;r;)Ze(n,r.data,a),a+=r.data.length,r=r.next;return n}consume(t,n){const r=this.head.data;if(t<r.length){const a=r.slice(0,t);return this.head.data=r.slice(t),a}return t===r.length?this.shift():n?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[zo](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let n="",r=this.head,a=0;do{const l=r.data;if(t>l.length)n+=l,t-=l.length;else{t===l.length?(n+=l,++a,r.next?this.head=r.next:this.head=this.tail=null):(n+=jn(l,0,t),this.head=r,r.data=jn(l,t));break}++a}while((r=r.next)!==null);return this.length-=a,n}_getBuffer(t){const n=kt.allocUnsafe(t),r=t;let a=this.head,l=0;do{const s=a.data;if(t>s.length)Ze(n,s,r-t),t-=s.length;else{t===s.length?(Ze(n,s,r-t),++l,a.next?this.head=a.next:this.head=this.tail=null):(Ze(n,new Zo(s.buffer,s.byteOffset,t),r-t),this.head=a,a.data=s.slice(t));break}++l}while((a=a.next)!==null);return this.length-=l,n}[Symbol.for("nodejs.util.inspect.custom")](t,n){return ea(this,{...n,depth:0,customInspect:!1})}};const{MathFloor:na,NumberIsInteger:ra}=K,{ERR_INVALID_ARG_VALUE:ia}=re.codes;function oa(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}function Lr(e){return e?16:16*1024}function aa(e,t,n,r){const a=oa(t,r,n);if(a!=null){if(!ra(a)||a<0){const l=r?`options.${n}`:"options.highWaterMark";throw new ia(l,a)}return na(a)}return Lr(e.objectMode)}var un={getHighWaterMark:aa,getDefaultHighWaterMark:Lr};const Fn=$e,{PromisePrototypeThen:la,SymbolAsyncIterator:Un,SymbolIterator:Bn}=K,{Buffer:sa}=ke,{ERR_INVALID_ARG_TYPE:fa,ERR_STREAM_NULL_VALUES:ua}=re.codes;function da(e,t,n){let r;if(typeof t=="string"||t instanceof sa)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});let a;if(t&&t[Un])a=!0,r=t[Un]();else if(t&&t[Bn])a=!1,r=t[Bn]();else throw new fa("iterable",["Iterable"],t);const l=new e({objectMode:!0,highWaterMark:1,...n});let s=!1;l._read=function(){s||(s=!0,g())},l._destroy=function(d,c){la(h(d),()=>Fn.nextTick(c,d),R=>Fn.nextTick(c,R||d))};async function h(d){const c=d!=null,R=typeof r.throw=="function";if(c&&R){const{value:I,done:y}=await r.throw(d);if(await I,y)return}if(typeof r.return=="function"){const{value:I}=await r.return();await I}}async function g(){for(;;){try{const{value:d,done:c}=a?await r.next():r.next();if(c)l.push(null);else{const R=d&&typeof d.then=="function"?await d:d;if(R===null)throw s=!1,new ua;if(l.push(R))continue;s=!1}}catch(d){l.destroy(d)}break}}return l}var Wr=da,$t,Hn;function mt(){if(Hn)return $t;Hn=1;const e=$e,{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:l,ObjectKeys:s,ObjectSetPrototypeOf:h,Promise:g,SafeSet:d,SymbolAsyncIterator:c,Symbol:R}=K;$t=m,m.ReadableState=se;const{EventEmitter:I}=ut,{Stream:y,prependListener:b}=fn,{Buffer:v}=ke,{addAbortSignal:x}=_t,C=Re;let w=_e.debuglog("stream",i=>{w=i});const M=ta,B=Ue,{getHighWaterMark:k,getDefaultHighWaterMark:Y}=un,{aggregateTwoErrors:H,codes:{ERR_INVALID_ARG_TYPE:J,ERR_METHOD_NOT_IMPLEMENTED:U,ERR_OUT_OF_RANGE:_,ERR_STREAM_PUSH_AFTER_EOF:$,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Q}}=re,{validateObject:D}=ct,P=R("kPaused"),{StringDecoder:O}=ri,q=Wr;h(m.prototype,y.prototype),h(m,y);const X=()=>{},{errorOrDestroy:L}=B;function se(i,o,S){typeof S!="boolean"&&(S=o instanceof we()),this.objectMode=!!(i&&i.objectMode),S&&(this.objectMode=this.objectMode||!!(i&&i.readableObjectMode)),this.highWaterMark=i?k(this,i,"readableHighWaterMark",S):Y(!1),this.buffer=new M,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[P]=null,this.errorEmitted=!1,this.emitClose=!i||i.emitClose!==!1,this.autoDestroy=!i||i.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=i&&i.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,i&&i.encoding&&(this.decoder=new O(i.encoding),this.encoding=i.encoding)}function m(i){if(!(this instanceof m))return new m(i);const o=this instanceof we();this._readableState=new se(i,this,o),i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy),typeof i.construct=="function"&&(this._construct=i.construct),i.signal&&!o&&x(i.signal,this)),y.call(this,i),B.construct(this,()=>{this._readableState.needReadable&&Se(this,this._readableState)})}m.prototype.destroy=B.destroy,m.prototype._undestroy=B.undestroy,m.prototype._destroy=function(i,o){o(i)},m.prototype[I.captureRejectionSymbol]=function(i){this.destroy(i)},m.prototype.push=function(i,o){return ne(this,i,o,!1)},m.prototype.unshift=function(i,o){return ne(this,i,o,!0)};function ne(i,o,S,E){w("readableAddChunk",o);const A=i._readableState;let Z;if(A.objectMode||(typeof o=="string"?(S=S||A.defaultEncoding,A.encoding!==S&&(E&&A.encoding?o=v.from(o,S).toString(A.encoding):(o=v.from(o,S),S=""))):o instanceof v?S="":y._isUint8Array(o)?(o=y._uint8ArrayToBuffer(o),S=""):o!=null&&(Z=new J("chunk",["string","Buffer","Uint8Array"],o))),Z)L(i,Z);else if(o===null)A.reading=!1,Rt(i,A);else if(A.objectMode||o&&o.length>0)if(E)if(A.endEmitted)L(i,new Q);else{if(A.destroyed||A.errored)return!1;be(i,A,o,!0)}else if(A.ended)L(i,new $);else{if(A.destroyed||A.errored)return!1;A.reading=!1,A.decoder&&!S?(o=A.decoder.write(o),A.objectMode||o.length!==0?be(i,A,o,!1):Se(i,A)):be(i,A,o,!1)}else E||(A.reading=!1,Se(i,A));return!A.ended&&(A.length<A.highWaterMark||A.length===0)}function be(i,o,S,E){o.flowing&&o.length===0&&!o.sync&&i.listenerCount("data")>0?(o.multiAwaitDrain?o.awaitDrainWriters.clear():o.awaitDrainWriters=null,o.dataEmitted=!0,i.emit("data",S)):(o.length+=o.objectMode?1:S.length,E?o.buffer.unshift(S):o.buffer.push(S),o.needReadable&&De(i)),Se(i,o)}m.prototype.isPaused=function(){const i=this._readableState;return i[P]===!0||i.flowing===!1},m.prototype.setEncoding=function(i){const o=new O(i);this._readableState.decoder=o,this._readableState.encoding=this._readableState.decoder.encoding;const S=this._readableState.buffer;let E="";for(const A of S)E+=o.write(A);return S.clear(),E!==""&&S.push(E),this._readableState.length=E.length,this};const Be=1073741824;function He(i){if(i>Be)throw new _("size","<= 1GiB",i);return i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++,i}function Ae(i,o){return i<=0||o.length===0&&o.ended?0:o.objectMode?1:r(i)?o.flowing&&o.length?o.buffer.first().length:o.length:i<=o.length?i:o.ended?o.length:0}m.prototype.read=function(i){w("read",i),i===void 0?i=NaN:n(i)||(i=a(i,10));const o=this._readableState,S=i;if(i>o.highWaterMark&&(o.highWaterMark=He(i)),i!==0&&(o.emittedReadable=!1),i===0&&o.needReadable&&((o.highWaterMark!==0?o.length>=o.highWaterMark:o.length>0)||o.ended))return w("read: emitReadable",o.length,o.ended),o.length===0&&o.ended?fe(this):De(this),null;if(i=Ae(i,o),i===0&&o.ended)return o.length===0&&fe(this),null;let E=o.needReadable;if(w("need readable",E),(o.length===0||o.length-i<o.highWaterMark)&&(E=!0,w("length less than watermark",E)),o.ended||o.reading||o.destroyed||o.errored||!o.constructed)E=!1,w("reading, ended or constructing",E);else if(E){w("do read"),o.reading=!0,o.sync=!0,o.length===0&&(o.needReadable=!0);try{this._read(o.highWaterMark)}catch(Z){L(this,Z)}o.sync=!1,o.reading||(i=Ae(S,o))}let A;return i>0?A=j(i,o):A=null,A===null?(o.needReadable=o.length<=o.highWaterMark,i=0):(o.length-=i,o.multiAwaitDrain?o.awaitDrainWriters.clear():o.awaitDrainWriters=null),o.length===0&&(o.ended||(o.needReadable=!0),S!==i&&o.ended&&fe(this)),A!==null&&!o.errorEmitted&&!o.closeEmitted&&(o.dataEmitted=!0,this.emit("data",A)),A};function Rt(i,o){if(w("onEofChunk"),!o.ended){if(o.decoder){const S=o.decoder.end();S&&S.length&&(o.buffer.push(S),o.length+=o.objectMode?1:S.length)}o.ended=!0,o.sync?De(i):(o.needReadable=!1,o.emittedReadable=!0,Pe(i))}}function De(i){const o=i._readableState;w("emitReadable",o.needReadable,o.emittedReadable),o.needReadable=!1,o.emittedReadable||(w("emitReadable",o.flowing),o.emittedReadable=!0,e.nextTick(Pe,i))}function Pe(i){const o=i._readableState;w("emitReadable_",o.destroyed,o.length,o.ended),!o.destroyed&&!o.errored&&(o.length||o.ended)&&(i.emit("readable"),o.emittedReadable=!1),o.needReadable=!o.flowing&&!o.ended&&o.length<=o.highWaterMark,T(i)}function Se(i,o){!o.readingMore&&o.constructed&&(o.readingMore=!0,e.nextTick(At,i,o))}function At(i,o){for(;!o.reading&&!o.ended&&(o.length<o.highWaterMark||o.flowing&&o.length===0);){const S=o.length;if(w("maybeReadMore read 0"),i.read(0),S===o.length)break}o.readingMore=!1}m.prototype._read=function(i){throw new U("_read()")},m.prototype.pipe=function(i,o){const S=this,E=this._readableState;E.pipes.length===1&&(E.multiAwaitDrain||(E.multiAwaitDrain=!0,E.awaitDrainWriters=new d(E.awaitDrainWriters?[E.awaitDrainWriters]:[]))),E.pipes.push(i),w("pipe count=%d opts=%j",E.pipes.length,o);const Z=(!o||o.end!==!1)&&i!==e.stdout&&i!==e.stderr?yn:Ke;E.endEmitted?e.nextTick(Z):S.once("end",Z),i.on("unpipe",ie);function ie(Ne,pe){w("onunpipe"),Ne===S&&pe&&pe.hasUnpiped===!1&&(pe.hasUnpiped=!0,ni())}function yn(){w("onend"),i.end()}let Te,_n=!1;function ni(){w("cleanup"),i.removeListener("close",Nt),i.removeListener("finish",It),Te&&i.removeListener("drain",Te),i.removeListener("error",Tt),i.removeListener("unpipe",ie),S.removeListener("end",yn),S.removeListener("end",Ke),S.removeListener("data",Sn),_n=!0,Te&&E.awaitDrainWriters&&(!i._writableState||i._writableState.needDrain)&&Te()}function mn(){_n||(E.pipes.length===1&&E.pipes[0]===i?(w("false write response, pause",0),E.awaitDrainWriters=i,E.multiAwaitDrain=!1):E.pipes.length>1&&E.pipes.includes(i)&&(w("false write response, pause",E.awaitDrainWriters.size),E.awaitDrainWriters.add(i)),S.pause()),Te||(Te=Ge(S,i),i.on("drain",Te))}S.on("data",Sn);function Sn(Ne){w("ondata");const pe=i.write(Ne);w("dest.write",pe),pe===!1&&mn()}function Tt(Ne){if(w("onerror",Ne),Ke(),i.removeListener("error",Tt),i.listenerCount("error")===0){const pe=i._writableState||i._readableState;pe&&!pe.errorEmitted?L(i,Ne):i.emit("error",Ne)}}b(i,"error",Tt);function Nt(){i.removeListener("finish",It),Ke()}i.once("close",Nt);function It(){w("onfinish"),i.removeListener("close",Nt),Ke()}i.once("finish",It);function Ke(){w("unpipe"),S.unpipe(i)}return i.emit("pipe",S),i.writableNeedDrain===!0?E.flowing&&mn():E.flowing||(w("pipe resume"),S.resume()),i};function Ge(i,o){return function(){const E=i._readableState;E.awaitDrainWriters===o?(w("pipeOnDrain",1),E.awaitDrainWriters=null):E.multiAwaitDrain&&(w("pipeOnDrain",E.awaitDrainWriters.size),E.awaitDrainWriters.delete(o)),(!E.awaitDrainWriters||E.awaitDrainWriters.size===0)&&i.listenerCount("data")&&i.resume()}}m.prototype.unpipe=function(i){const o=this._readableState,S={hasUnpiped:!1};if(o.pipes.length===0)return this;if(!i){const A=o.pipes;o.pipes=[],this.pause();for(let Z=0;Z<A.length;Z++)A[Z].emit("unpipe",this,{hasUnpiped:!1});return this}const E=t(o.pipes,i);return E===-1?this:(o.pipes.splice(E,1),o.pipes.length===0&&this.pause(),i.emit("unpipe",this,S),this)},m.prototype.on=function(i,o){const S=y.prototype.on.call(this,i,o),E=this._readableState;return i==="data"?(E.readableListening=this.listenerCount("readable")>0,E.flowing!==!1&&this.resume()):i==="readable"&&!E.endEmitted&&!E.readableListening&&(E.readableListening=E.needReadable=!0,E.flowing=!1,E.emittedReadable=!1,w("on readable",E.length,E.reading),E.length?De(this):E.reading||e.nextTick(f,this)),S},m.prototype.addListener=m.prototype.on,m.prototype.removeListener=function(i,o){const S=y.prototype.removeListener.call(this,i,o);return i==="readable"&&e.nextTick(Ve,this),S},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(i){const o=y.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&e.nextTick(Ve,this),o};function Ve(i){const o=i._readableState;o.readableListening=i.listenerCount("readable")>0,o.resumeScheduled&&o[P]===!1?o.flowing=!0:i.listenerCount("data")>0?i.resume():o.readableListening||(o.flowing=null)}function f(i){w("readable nexttick read 0"),i.read(0)}m.prototype.resume=function(){const i=this._readableState;return i.flowing||(w("resume"),i.flowing=!i.readableListening,u(this,i)),i[P]=!1,this};function u(i,o){o.resumeScheduled||(o.resumeScheduled=!0,e.nextTick(p,i,o))}function p(i,o){w("resume",o.reading),o.reading||i.read(0),o.resumeScheduled=!1,i.emit("resume"),T(i),o.flowing&&!o.reading&&i.read(0)}m.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[P]=!0,this};function T(i){const o=i._readableState;for(w("flow",o.flowing);o.flowing&&i.read()!==null;);}m.prototype.wrap=function(i){let o=!1;i.on("data",E=>{!this.push(E)&&i.pause&&(o=!0,i.pause())}),i.on("end",()=>{this.push(null)}),i.on("error",E=>{L(this,E)}),i.on("close",()=>{this.destroy()}),i.on("destroy",()=>{this.destroy()}),this._read=()=>{o&&i.resume&&(o=!1,i.resume())};const S=s(i);for(let E=1;E<S.length;E++){const A=S[E];this[A]===void 0&&typeof i[A]=="function"&&(this[A]=i[A].bind(i))}return this},m.prototype[c]=function(){return N(this)},m.prototype.iterator=function(i){return i!==void 0&&D(i,"options"),N(this,i)};function N(i,o){typeof i.read!="function"&&(i=m.wrap(i,{objectMode:!0}));const S=W(i,o);return S.stream=i,S}async function*W(i,o){let S=X;function E(ie){this===i?(S(),S=X):S=ie}i.on("readable",E);let A;const Z=C(i,{writable:!1},ie=>{A=ie?H(A,ie):null,S(),S=X});try{for(;;){const ie=i.destroyed?null:i.read();if(ie!==null)yield ie;else{if(A)throw A;if(A===null)return;await new g(E)}}}catch(ie){throw A=H(A,ie),A}finally{(A||(o==null?void 0:o.destroyOnReturn)!==!1)&&(A===void 0||i._readableState.autoDestroy)?B.destroyer(i,null):(i.off("readable",E),Z())}}l(m.prototype,{readable:{__proto__:null,get(){const i=this._readableState;return!!i&&i.readable!==!1&&!i.destroyed&&!i.errorEmitted&&!i.endEmitted},set(i){this._readableState&&(this._readableState.readable=!!i)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(i){this._readableState&&(this._readableState.flowing=i)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(i){this._readableState&&(this._readableState.destroyed=i)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),l(se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[P]!==!1},set(i){this[P]=!!i}}}),m._fromList=j;function j(i,o){if(o.length===0)return null;let S;return o.objectMode?S=o.buffer.shift():!i||i>=o.length?(o.decoder?S=o.buffer.join(""):o.buffer.length===1?S=o.buffer.first():S=o.buffer.concat(o.length),o.buffer.clear()):S=o.buffer.consume(i,o.decoder),S}function fe(i){const o=i._readableState;w("endReadable",o.endEmitted),o.endEmitted||(o.ended=!0,e.nextTick(Le,o,i))}function Le(i,o){if(w("endReadableNT",i.endEmitted,i.length),!i.errored&&!i.closeEmitted&&!i.endEmitted&&i.length===0){if(i.endEmitted=!0,o.emit("end"),o.writable&&o.allowHalfOpen===!1)e.nextTick(qe,o);else if(i.autoDestroy){const S=o._writableState;(!S||S.autoDestroy&&(S.finished||S.writable===!1))&&o.destroy()}}}function qe(i){i.writable&&!i.writableEnded&&!i.destroyed&&i.end()}m.from=function(i,o){return q(m,i,o)};let ge;function wn(){return ge===void 0&&(ge={}),ge}return m.fromWeb=function(i,o){return wn().newStreamReadableFromReadableStream(i,o)},m.toWeb=function(i,o){return wn().newReadableStreamFromStreamReadable(i,o)},m.wrap=function(i,o){var S,E;return new m({objectMode:(S=(E=i.readableObjectMode)!==null&&E!==void 0?E:i.objectMode)!==null&&S!==void 0?S:!0,...o,destroy(A,Z){B.destroyer(i,A),Z(A)}}).wrap(i)},$t}var Mt,Gn;function jr(){if(Gn)return Mt;Gn=1;const e=$e,{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:l,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:h,Symbol:g,SymbolHasInstance:d}=K;Mt=O,O.WritableState=D;const{EventEmitter:c}=ut,R=fn.Stream,{Buffer:I}=ke,y=Ue,{addAbortSignal:b}=_t,{getHighWaterMark:v,getDefaultHighWaterMark:x}=un,{ERR_INVALID_ARG_TYPE:C,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:M,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:Y,ERR_STREAM_NULL_VALUES:H,ERR_STREAM_WRITE_AFTER_END:J,ERR_UNKNOWN_ENCODING:U}=re.codes,{errorOrDestroy:_}=y;s(O.prototype,R.prototype),s(O,R);function $(){}const Q=g("kOnFinished");function D(f,u,p){typeof p!="boolean"&&(p=u instanceof we()),this.objectMode=!!(f&&f.objectMode),p&&(this.objectMode=this.objectMode||!!(f&&f.writableObjectMode)),this.highWaterMark=f?v(this,f,"writableHighWaterMark",p):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const T=!!(f&&f.decodeStrings===!1);this.decodeStrings=!T,this.defaultEncoding=f&&f.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=m.bind(void 0,u),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,P(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!f||f.emitClose!==!1,this.autoDestroy=!f||f.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Q]=[]}function P(f){f.buffered=[],f.bufferedIndex=0,f.allBuffers=!0,f.allNoop=!0}D.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(D.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function O(f){const u=this instanceof we();if(!u&&!r(O,this))return new O(f);this._writableState=new D(f,this,u),f&&(typeof f.write=="function"&&(this._write=f.write),typeof f.writev=="function"&&(this._writev=f.writev),typeof f.destroy=="function"&&(this._destroy=f.destroy),typeof f.final=="function"&&(this._final=f.final),typeof f.construct=="function"&&(this._construct=f.construct),f.signal&&b(f.signal,this)),R.call(this,f),y.construct(this,()=>{const p=this._writableState;p.writing||He(this,p),Pe(this,p)})}a(O,d,{__proto__:null,value:function(f){return r(this,f)?!0:this!==O?!1:f&&f._writableState instanceof D}}),O.prototype.pipe=function(){_(this,new B)};function q(f,u,p,T){const N=f._writableState;if(typeof p=="function")T=p,p=N.defaultEncoding;else{if(!p)p=N.defaultEncoding;else if(p!=="buffer"&&!I.isEncoding(p))throw new U(p);typeof T!="function"&&(T=$)}if(u===null)throw new H;if(!N.objectMode)if(typeof u=="string")N.decodeStrings!==!1&&(u=I.from(u,p),p="buffer");else if(u instanceof I)p="buffer";else if(R._isUint8Array(u))u=R._uint8ArrayToBuffer(u),p="buffer";else throw new C("chunk",["string","Buffer","Uint8Array"],u);let W;return N.ending?W=new J:N.destroyed&&(W=new k("write")),W?(e.nextTick(T,W),_(f,W,!0),W):(N.pendingcb++,X(f,N,u,p,T))}O.prototype.write=function(f,u,p){return q(this,f,u,p)===!0},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){const f=this._writableState;f.corked&&(f.corked--,f.writing||He(this,f))},O.prototype.setDefaultEncoding=function(u){if(typeof u=="string"&&(u=h(u)),!I.isEncoding(u))throw new U(u);return this._writableState.defaultEncoding=u,this};function X(f,u,p,T,N){const W=u.objectMode?1:p.length;u.length+=W;const j=u.length<u.highWaterMark;return j||(u.needDrain=!0),u.writing||u.corked||u.errored||!u.constructed?(u.buffered.push({chunk:p,encoding:T,callback:N}),u.allBuffers&&T!=="buffer"&&(u.allBuffers=!1),u.allNoop&&N!==$&&(u.allNoop=!1)):(u.writelen=W,u.writecb=N,u.writing=!0,u.sync=!0,f._write(p,T,u.onwrite),u.sync=!1),j&&!u.errored&&!u.destroyed}function L(f,u,p,T,N,W,j){u.writelen=T,u.writecb=j,u.writing=!0,u.sync=!0,u.destroyed?u.onwrite(new k("write")):p?f._writev(N,u.onwrite):f._write(N,W,u.onwrite),u.sync=!1}function se(f,u,p,T){--u.pendingcb,T(p),Be(u),_(f,p)}function m(f,u){const p=f._writableState,T=p.sync,N=p.writecb;if(typeof N!="function"){_(f,new M);return}p.writing=!1,p.writecb=null,p.length-=p.writelen,p.writelen=0,u?(u.stack,p.errored||(p.errored=u),f._readableState&&!f._readableState.errored&&(f._readableState.errored=u),T?e.nextTick(se,f,p,u,N):se(f,p,u,N)):(p.buffered.length>p.bufferedIndex&&He(f,p),T?p.afterWriteTickInfo!==null&&p.afterWriteTickInfo.cb===N?p.afterWriteTickInfo.count++:(p.afterWriteTickInfo={count:1,cb:N,stream:f,state:p},e.nextTick(ne,p.afterWriteTickInfo)):be(f,p,1,N))}function ne({stream:f,state:u,count:p,cb:T}){return u.afterWriteTickInfo=null,be(f,u,p,T)}function be(f,u,p,T){for(!u.ending&&!f.destroyed&&u.length===0&&u.needDrain&&(u.needDrain=!1,f.emit("drain"));p-- >0;)u.pendingcb--,T();u.destroyed&&Be(u),Pe(f,u)}function Be(f){if(f.writing)return;for(let N=f.bufferedIndex;N<f.buffered.length;++N){var u;const{chunk:W,callback:j}=f.buffered[N],fe=f.objectMode?1:W.length;f.length-=fe,j((u=f.errored)!==null&&u!==void 0?u:new k("write"))}const p=f[Q].splice(0);for(let N=0;N<p.length;N++){var T;p[N]((T=f.errored)!==null&&T!==void 0?T:new k("end"))}P(f)}function He(f,u){if(u.corked||u.bufferProcessing||u.destroyed||!u.constructed)return;const{buffered:p,bufferedIndex:T,objectMode:N}=u,W=p.length-T;if(!W)return;let j=T;if(u.bufferProcessing=!0,W>1&&f._writev){u.pendingcb-=W-1;const fe=u.allNoop?$:qe=>{for(let ge=j;ge<p.length;++ge)p[ge].callback(qe)},Le=u.allNoop&&j===0?p:t(p,j);Le.allBuffers=u.allBuffers,L(f,u,!0,u.length,Le,"",fe),P(u)}else{do{const{chunk:fe,encoding:Le,callback:qe}=p[j];p[j++]=null;const ge=N?1:fe.length;L(f,u,!1,ge,fe,Le,qe)}while(j<p.length&&!u.writing);j===p.length?P(u):j>256?(p.splice(0,j),u.bufferedIndex=0):u.bufferedIndex=j}u.bufferProcessing=!1}O.prototype._write=function(f,u,p){if(this._writev)this._writev([{chunk:f,encoding:u}],p);else throw new w("_write()")},O.prototype._writev=null,O.prototype.end=function(f,u,p){const T=this._writableState;typeof f=="function"?(p=f,f=null,u=null):typeof u=="function"&&(p=u,u=null);let N;if(f!=null){const W=q(this,f,u);W instanceof n&&(N=W)}return T.corked&&(T.corked=1,this.uncork()),N||(!T.errored&&!T.ending?(T.ending=!0,Pe(this,T,!0),T.ended=!0):T.finished?N=new Y("end"):T.destroyed&&(N=new k("end"))),typeof p=="function"&&(N||T.finished?e.nextTick(p,N):T[Q].push(p)),this};function Ae(f){return f.ending&&!f.destroyed&&f.constructed&&f.length===0&&!f.errored&&f.buffered.length===0&&!f.finished&&!f.writing&&!f.errorEmitted&&!f.closeEmitted}function Rt(f,u){let p=!1;function T(N){if(p){_(f,N??M());return}if(p=!0,u.pendingcb--,N){const W=u[Q].splice(0);for(let j=0;j<W.length;j++)W[j](N);_(f,N,u.sync)}else Ae(u)&&(u.prefinished=!0,f.emit("prefinish"),u.pendingcb++,e.nextTick(Se,f,u))}u.sync=!0,u.pendingcb++;try{f._final(T)}catch(N){T(N)}u.sync=!1}function De(f,u){!u.prefinished&&!u.finalCalled&&(typeof f._final=="function"&&!u.destroyed?(u.finalCalled=!0,Rt(f,u)):(u.prefinished=!0,f.emit("prefinish")))}function Pe(f,u,p){Ae(u)&&(De(f,u),u.pendingcb===0&&(p?(u.pendingcb++,e.nextTick((T,N)=>{Ae(N)?Se(T,N):N.pendingcb--},f,u)):Ae(u)&&(u.pendingcb++,Se(f,u))))}function Se(f,u){u.pendingcb--,u.finished=!0;const p=u[Q].splice(0);for(let T=0;T<p.length;T++)p[T]();if(f.emit("finish"),u.autoDestroy){const T=f._readableState;(!T||T.autoDestroy&&(T.endEmitted||T.readable===!1))&&f.destroy()}}l(O.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(f){this._writableState&&(this._writableState.destroyed=f)}},writable:{__proto__:null,get(){const f=this._writableState;return!!f&&f.writable!==!1&&!f.destroyed&&!f.errored&&!f.ending&&!f.ended},set(f){this._writableState&&(this._writableState.writable=!!f)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const f=this._writableState;return f?!f.destroyed&&!f.ending&&f.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const At=y.destroy;O.prototype.destroy=function(f,u){const p=this._writableState;return!p.destroyed&&(p.bufferedIndex<p.buffered.length||p[Q].length)&&e.nextTick(Be,p),At.call(this,f,u),this},O.prototype._undestroy=y.undestroy,O.prototype._destroy=function(f,u){u(f)},O.prototype[c.captureRejectionSymbol]=function(f){this.destroy(f)};let Ge;function Ve(){return Ge===void 0&&(Ge={}),Ge}return O.fromWeb=function(f,u){return Ve().newStreamWritableFromWritableStream(f,u)},O.toWeb=function(f){return Ve().newWritableStreamFromStreamWritable(f)},Mt}var vt,Vn;function ca(){if(Vn)return vt;Vn=1;const e=$e,t=ke,{isReadable:n,isWritable:r,isIterable:a,isNodeStream:l,isReadableNodeStream:s,isWritableNodeStream:h,isDuplexNodeStream:g}=me,d=Re,{AbortError:c,codes:{ERR_INVALID_ARG_TYPE:R,ERR_INVALID_RETURN_VALUE:I}}=re,{destroyer:y}=Ue,b=we(),v=mt(),{createDeferredPromise:x}=_e,C=Wr,w=globalThis.Blob||t.Blob,M=typeof w<"u"?function(_){return _ instanceof w}:function(_){return!1},B=globalThis.AbortController||tn().AbortController,{FunctionPrototypeCall:k}=K;class Y extends b{constructor(_){super(_),(_==null?void 0:_.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(_==null?void 0:_.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}vt=function U(_,$){if(g(_))return _;if(s(_))return J({readable:_});if(h(_))return J({writable:_});if(l(_))return J({writable:!1,readable:!1});if(typeof _=="function"){const{value:D,write:P,final:O,destroy:q}=H(_);if(a(D))return C(Y,D,{objectMode:!0,write:P,final:O,destroy:q});const X=D==null?void 0:D.then;if(typeof X=="function"){let L;const se=k(X,D,m=>{if(m!=null)throw new I("nully","body",m)},m=>{y(L,m)});return L=new Y({objectMode:!0,readable:!1,write:P,final(m){O(async()=>{try{await se,e.nextTick(m,null)}catch(ne){e.nextTick(m,ne)}})},destroy:q})}throw new I("Iterable, AsyncIterable or AsyncFunction",$,D)}if(M(_))return U(_.arrayBuffer());if(a(_))return C(Y,_,{objectMode:!0,writable:!1});if(typeof(_==null?void 0:_.writable)=="object"||typeof(_==null?void 0:_.readable)=="object"){const D=_!=null&&_.readable?s(_==null?void 0:_.readable)?_==null?void 0:_.readable:U(_.readable):void 0,P=_!=null&&_.writable?h(_==null?void 0:_.writable)?_==null?void 0:_.writable:U(_.writable):void 0;return J({readable:D,writable:P})}const Q=_==null?void 0:_.then;if(typeof Q=="function"){let D;return k(Q,_,P=>{P!=null&&D.push(P),D.push(null)},P=>{y(D,P)}),D=new Y({objectMode:!0,writable:!1,read(){}})}throw new R($,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],_)};function H(U){let{promise:_,resolve:$}=x();const Q=new B,D=Q.signal;return{value:U(async function*(){for(;;){const O=_;_=null;const{chunk:q,done:X,cb:L}=await O;if(e.nextTick(L),X)return;if(D.aborted)throw new c(void 0,{cause:D.reason});({promise:_,resolve:$}=x()),yield q}}(),{signal:D}),write(O,q,X){const L=$;$=null,L({chunk:O,done:!1,cb:X})},final(O){const q=$;$=null,q({done:!0,cb:O})},destroy(O,q){Q.abort(),q(O)}}}function J(U){const _=U.readable&&typeof U.readable.read!="function"?v.wrap(U.readable):U.readable,$=U.writable;let Q=!!n(_),D=!!r($),P,O,q,X,L;function se(m){const ne=X;X=null,ne?ne(m):m&&L.destroy(m)}return L=new Y({readableObjectMode:!!(_!=null&&_.readableObjectMode),writableObjectMode:!!($!=null&&$.writableObjectMode),readable:Q,writable:D}),D&&(d($,m=>{D=!1,m&&y(_,m),se(m)}),L._write=function(m,ne,be){$.write(m,ne)?be():P=be},L._final=function(m){$.end(),O=m},$.on("drain",function(){if(P){const m=P;P=null,m()}}),$.on("finish",function(){if(O){const m=O;O=null,m()}})),Q&&(d(_,m=>{Q=!1,m&&y(_,m),se(m)}),_.on("readable",function(){if(q){const m=q;q=null,m()}}),_.on("end",function(){L.push(null)}),L._read=function(){for(;;){const m=_.read();if(m===null){q=L._read;return}if(!L.push(m))return}}),L._destroy=function(m,ne){!m&&X!==null&&(m=new c),q=null,P=null,O=null,X===null?ne(m):(X=ne,y($,m),y(_,m))},L}return vt}var Dt,qn;function we(){if(qn)return Dt;qn=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=K;Dt=s;const a=mt(),l=jr();r(s.prototype,a.prototype),r(s,a);{const c=n(l.prototype);for(let R=0;R<c.length;R++){const I=c[R];s.prototype[I]||(s.prototype[I]=l.prototype[I])}}function s(c){if(!(this instanceof s))return new s(c);a.call(this,c),l.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(l.prototype,"writableLength")},writableFinished:{__proto__:null,...t(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let h;function g(){return h===void 0&&(h={}),h}s.fromWeb=function(c,R){return g().newStreamDuplexFromReadableWritablePair(c,R)},s.toWeb=function(c){return g().newReadableWritablePairFromDuplex(c)};let d;return s.from=function(c){return d||(d=ca()),d(c,"body")},Dt}const{ObjectSetPrototypeOf:Fr,Symbol:ha}=K;var Ur=ye;const{ERR_METHOD_NOT_IMPLEMENTED:ba}=re.codes,dn=we(),{getHighWaterMark:ga}=un;Fr(ye.prototype,dn.prototype);Fr(ye,dn);const Xe=ha("kCallback");function ye(e){if(!(this instanceof ye))return new ye(e);const t=e?ga(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),dn.call(this,e),this._readableState.sync=!1,this[Xe]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",pa)}function Zt(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,n)=>{if(t){e?e(t):this.destroy(t);return}n!=null&&this.push(n),this.push(null),e&&e()}):(this.push(null),e&&e())}function pa(){this._final!==Zt&&Zt.call(this)}ye.prototype._final=Zt;ye.prototype._transform=function(e,t,n){throw new ba("_transform()")};ye.prototype._write=function(e,t,n){const r=this._readableState,a=this._writableState,l=r.length;this._transform(e,t,(s,h)=>{if(s){n(s);return}h!=null&&this.push(h),a.ended||l===r.length||r.length<r.highWaterMark?n():this[Xe]=n})};ye.prototype._read=function(){if(this[Xe]){const e=this[Xe];this[Xe]=null,e()}};const{ObjectSetPrototypeOf:Br}=K;var Hr=je;const cn=Ur;Br(je.prototype,cn.prototype);Br(je,cn);function je(e){if(!(this instanceof je))return new je(e);cn.call(this,e)}je.prototype._transform=function(e,t,n){n(null,e)};const Ye=$e,{ArrayIsArray:wa,Promise:ya,SymbolAsyncIterator:_a}=K,at=Re,{once:ma}=_e,Sa=Ue,Kn=we(),{aggregateTwoErrors:Ea,codes:{ERR_INVALID_ARG_TYPE:en,ERR_INVALID_RETURN_VALUE:Pt,ERR_MISSING_ARGS:Ra,ERR_STREAM_DESTROYED:Aa,ERR_STREAM_PREMATURE_CLOSE:Ta},AbortError:Na}=re,{validateFunction:Ia,validateAbortSignal:Ca}=ct,{isIterable:Ce,isReadable:Lt,isReadableNodeStream:rt,isNodeStream:Yn,isTransformStream:We,isWebStream:Oa,isReadableStream:Wt,isReadableEnded:xa}=me,ka=globalThis.AbortController||tn().AbortController;let jt,Ft;function Jn(e,t,n){let r=!1;e.on("close",()=>{r=!0});const a=at(e,{readable:t,writable:n},l=>{r=!l});return{destroy:l=>{r||(r=!0,Sa.destroyer(e,l||new Aa("pipe")))},cleanup:a}}function $a(e){return Ia(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function Ut(e){if(Ce(e))return e;if(rt(e))return Ma(e);throw new en("val",["Readable","Iterable","AsyncIterable"],e)}async function*Ma(e){Ft||(Ft=mt()),yield*Ft.prototype[_a].call(e)}async function et(e,t,n,{end:r}){let a,l=null;const s=d=>{if(d&&(a=d),l){const c=l;l=null,c()}},h=()=>new ya((d,c)=>{a?c(a):l=()=>{a?c(a):d()}});t.on("drain",s);const g=at(t,{readable:!1},s);try{t.writableNeedDrain&&await h();for await(const d of e)t.write(d)||await h();r&&t.end(),await h(),n()}catch(d){n(a!==d?Ea(a,d):d)}finally{g(),t.off("drain",s)}}async function Bt(e,t,n,{end:r}){We(t)&&(t=t.writable);const a=t.getWriter();try{for await(const l of e)await a.ready,a.write(l).catch(()=>{});await a.ready,r&&await a.close(),n()}catch(l){try{await a.abort(l),n(l)}catch(s){n(s)}}}function va(...e){return Gr(e,ma($a(e)))}function Gr(e,t,n){if(e.length===1&&wa(e[0])&&(e=e[0]),e.length<2)throw new Ra("streams");const r=new ka,a=r.signal,l=n==null?void 0:n.signal,s=[];Ca(l,"options.signal");function h(){y(new Na)}l==null||l.addEventListener("abort",h);let g,d;const c=[];let R=0;function I(C){y(C,--R===0)}function y(C,w){if(C&&(!g||g.code==="ERR_STREAM_PREMATURE_CLOSE")&&(g=C),!(!g&&!w)){for(;c.length;)c.shift()(g);l==null||l.removeEventListener("abort",h),r.abort(),w&&(g||s.forEach(M=>M()),Ye.nextTick(t,g,d))}}let b;for(let C=0;C<e.length;C++){const w=e[C],M=C<e.length-1,B=C>0,k=M||(n==null?void 0:n.end)!==!1,Y=C===e.length-1;if(Yn(w)){let H=function(J){J&&J.name!=="AbortError"&&J.code!=="ERR_STREAM_PREMATURE_CLOSE"&&I(J)};if(k){const{destroy:J,cleanup:U}=Jn(w,M,B);c.push(J),Lt(w)&&Y&&s.push(U)}w.on("error",H),Lt(w)&&Y&&s.push(()=>{w.removeListener("error",H)})}if(C===0)if(typeof w=="function"){if(b=w({signal:a}),!Ce(b))throw new Pt("Iterable, AsyncIterable or Stream","source",b)}else Ce(w)||rt(w)||We(w)?b=w:b=Kn.from(w);else if(typeof w=="function"){if(We(b)){var v;b=Ut((v=b)===null||v===void 0?void 0:v.readable)}else b=Ut(b);if(b=w(b,{signal:a}),M){if(!Ce(b,!0))throw new Pt("AsyncIterable",`transform[${C-1}]`,b)}else{var x;jt||(jt=Hr);const H=new jt({objectMode:!0}),J=(x=b)===null||x===void 0?void 0:x.then;if(typeof J=="function")R++,J.call(b,$=>{d=$,$!=null&&H.write($),k&&H.end(),Ye.nextTick(I)},$=>{H.destroy($),Ye.nextTick(I,$)});else if(Ce(b,!0))R++,et(b,H,I,{end:k});else if(Wt(b)||We(b)){const $=b.readable||b;R++,et($,H,I,{end:k})}else throw new Pt("AsyncIterable or Promise","destination",b);b=H;const{destroy:U,cleanup:_}=Jn(b,!1,!0);c.push(U),Y&&s.push(_)}}else if(Yn(w)){if(rt(b)){R+=2;const H=Da(b,w,I,{end:k});Lt(w)&&Y&&s.push(H)}else if(We(b)||Wt(b)){const H=b.readable||b;R++,et(H,w,I,{end:k})}else if(Ce(b))R++,et(b,w,I,{end:k});else throw new en("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=w}else if(Oa(w)){if(rt(b))R++,Bt(Ut(b),w,I,{end:k});else if(Wt(b)||Ce(b))R++,Bt(b,w,I,{end:k});else if(We(b))R++,Bt(b.readable,w,I,{end:k});else throw new en("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=w}else b=Kn.from(w)}return(a!=null&&a.aborted||l!=null&&l.aborted)&&Ye.nextTick(h),b}function Da(e,t,n,{end:r}){let a=!1;if(t.on("close",()=>{a||n(new Ta)}),e.pipe(t,{end:!1}),r){let l=function(){a=!0,t.end()};xa(e)?Ye.nextTick(l):e.once("end",l)}else n();return at(e,{readable:!0,writable:!1},l=>{const s=e._readableState;l&&l.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",n).once("error",n):n(l)}),at(t,{readable:!1,writable:!0},n)}var hn={pipelineImpl:Gr,pipeline:va};const{pipeline:Pa}=hn,tt=we(),{destroyer:La}=Ue,{isNodeStream:nt,isReadable:Qn,isWritable:Xn,isWebStream:Ht,isTransformStream:Ie,isWritableStream:zn,isReadableStream:Zn}=me,{AbortError:Wa,codes:{ERR_INVALID_ARG_VALUE:er,ERR_MISSING_ARGS:ja}}=re,Fa=Re;var Vr=function(...t){if(t.length===0)throw new ja("streams");if(t.length===1)return tt.from(t[0]);const n=[...t];if(typeof t[0]=="function"&&(t[0]=tt.from(t[0])),typeof t[t.length-1]=="function"){const y=t.length-1;t[y]=tt.from(t[y])}for(let y=0;y<t.length;++y)if(!(!nt(t[y])&&!Ht(t[y]))){if(y<t.length-1&&!(Qn(t[y])||Zn(t[y])||Ie(t[y])))throw new er(`streams[${y}]`,n[y],"must be readable");if(y>0&&!(Xn(t[y])||zn(t[y])||Ie(t[y])))throw new er(`streams[${y}]`,n[y],"must be writable")}let r,a,l,s,h;function g(y){const b=s;s=null,b?b(y):y?h.destroy(y):!I&&!R&&h.destroy()}const d=t[0],c=Pa(t,g),R=!!(Xn(d)||zn(d)||Ie(d)),I=!!(Qn(c)||Zn(c)||Ie(c));if(h=new tt({writableObjectMode:!!(d!=null&&d.writableObjectMode),readableObjectMode:!!(c!=null&&c.writableObjectMode),writable:R,readable:I}),R){if(nt(d))h._write=function(b,v,x){d.write(b,v)?x():r=x},h._final=function(b){d.end(),a=b},d.on("drain",function(){if(r){const b=r;r=null,b()}});else if(Ht(d)){const v=(Ie(d)?d.writable:d).getWriter();h._write=async function(x,C,w){try{await v.ready,v.write(x).catch(()=>{}),w()}catch(M){w(M)}},h._final=async function(x){try{await v.ready,v.close().catch(()=>{}),a=x}catch(C){x(C)}}}const y=Ie(c)?c.readable:c;Fa(y,()=>{if(a){const b=a;a=null,b()}})}if(I){if(nt(c))c.on("readable",function(){if(l){const y=l;l=null,y()}}),c.on("end",function(){h.push(null)}),h._read=function(){for(;;){const y=c.read();if(y===null){l=h._read;return}if(!h.push(y))return}};else if(Ht(c)){const b=(Ie(c)?c.readable:c).getReader();h._read=async function(){for(;;)try{const{value:v,done:x}=await b.read();if(!h.push(v))return;if(x){h.push(null);return}}catch{return}}}}return h._destroy=function(y,b){!y&&s!==null&&(y=new Wa),l=null,r=null,a=null,s===null?b(y):(s=b,nt(c)&&La(c,y))},h};const qr=globalThis.AbortController||tn().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Ua,ERR_INVALID_ARG_TYPE:ze,ERR_MISSING_ARGS:Ba,ERR_OUT_OF_RANGE:Ha},AbortError:ce}=re,{validateAbortSignal:Me,validateInteger:Ga,validateObject:ve}=ct,Va=K.Symbol("kWeak"),{finished:qa}=Re,Ka=Vr,{addAbortSignalNoValidate:Ya}=_t,{isWritable:Ja,isNodeStream:Qa}=me,{ArrayPrototypePush:Xa,MathFloor:za,Number:Za,NumberIsNaN:el,Promise:tr,PromiseReject:nr,PromisePrototypeThen:tl,Symbol:Kr}=K,lt=Kr("kEmpty"),rr=Kr("kEof");function nl(e,t){if(t!=null&&ve(t,"options"),(t==null?void 0:t.signal)!=null&&Me(t.signal,"options.signal"),Qa(e)&&!Ja(e))throw new Ua("stream",e,"must be writable");const n=Ka(this,e);return t!=null&&t.signal&&Ya(t.signal,n),n}function St(e,t){if(typeof e!="function")throw new ze("fn",["Function","AsyncFunction"],e);t!=null&&ve(t,"options"),(t==null?void 0:t.signal)!=null&&Me(t.signal,"options.signal");let n=1;return(t==null?void 0:t.concurrency)!=null&&(n=za(t.concurrency)),Ga(n,"concurrency",1),(async function*(){var a,l;const s=new qr,h=this,g=[],d=s.signal,c={signal:d},R=()=>s.abort();t!=null&&(a=t.signal)!==null&&a!==void 0&&a.aborted&&R(),t==null||(l=t.signal)===null||l===void 0||l.addEventListener("abort",R);let I,y,b=!1;function v(){b=!0}async function x(){try{for await(let M of h){var C;if(b)return;if(d.aborted)throw new ce;try{M=e(M,c)}catch(B){M=nr(B)}M!==lt&&(typeof((C=M)===null||C===void 0?void 0:C.catch)=="function"&&M.catch(v),g.push(M),I&&(I(),I=null),!b&&g.length&&g.length>=n&&await new tr(B=>{y=B}))}g.push(rr)}catch(M){const B=nr(M);tl(B,void 0,v),g.push(B)}finally{var w;b=!0,I&&(I(),I=null),t==null||(w=t.signal)===null||w===void 0||w.removeEventListener("abort",R)}}x();try{for(;;){for(;g.length>0;){const C=await g[0];if(C===rr)return;if(d.aborted)throw new ce;C!==lt&&(yield C),g.shift(),y&&(y(),y=null)}await new tr(C=>{I=C})}}finally{s.abort(),b=!0,y&&(y(),y=null)}}).call(this)}function rl(e=void 0){return e!=null&&ve(e,"options"),(e==null?void 0:e.signal)!=null&&Me(e.signal,"options.signal"),(async function*(){let n=0;for await(const a of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new ce({cause:e.signal.reason});yield[n++,a]}}).call(this)}async function Yr(e,t=void 0){for await(const n of bn.call(this,e,t))return!0;return!1}async function il(e,t=void 0){if(typeof e!="function")throw new ze("fn",["Function","AsyncFunction"],e);return!await Yr.call(this,async(...n)=>!await e(...n),t)}async function ol(e,t){for await(const n of bn.call(this,e,t))return n}async function al(e,t){if(typeof e!="function")throw new ze("fn",["Function","AsyncFunction"],e);async function n(r,a){return await e(r,a),lt}for await(const r of St.call(this,n,t));}function bn(e,t){if(typeof e!="function")throw new ze("fn",["Function","AsyncFunction"],e);async function n(r,a){return await e(r,a)?r:lt}return St.call(this,n,t)}class ll extends Ba{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function sl(e,t,n){var r;if(typeof e!="function")throw new ze("reducer",["Function","AsyncFunction"],e);n!=null&&ve(n,"options"),(n==null?void 0:n.signal)!=null&&Me(n.signal,"options.signal");let a=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){const d=new ce(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await qa(this.destroy(d)),d}const l=new qr,s=l.signal;if(n!=null&&n.signal){const d={once:!0,[Va]:this};n.signal.addEventListener("abort",()=>l.abort(),d)}let h=!1;try{for await(const d of this){var g;if(h=!0,n!=null&&(g=n.signal)!==null&&g!==void 0&&g.aborted)throw new ce;a?t=await e(t,d,{signal:s}):(t=d,a=!0)}if(!h&&!a)throw new ll}finally{l.abort()}return t}async function fl(e){e!=null&&ve(e,"options"),(e==null?void 0:e.signal)!=null&&Me(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ce(void 0,{cause:e.signal.reason});Xa(t,r)}return t}function ul(e,t){const n=St.call(this,e,t);return(async function*(){for await(const a of n)yield*a}).call(this)}function Jr(e){if(e=Za(e),el(e))return 0;if(e<0)throw new Ha("number",">= 0",e);return e}function dl(e,t=void 0){return t!=null&&ve(t,"options"),(t==null?void 0:t.signal)!=null&&Me(t.signal,"options.signal"),e=Jr(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ce;for await(const l of this){var a;if(t!=null&&(a=t.signal)!==null&&a!==void 0&&a.aborted)throw new ce;e--<=0&&(yield l)}}).call(this)}function cl(e,t=void 0){return t!=null&&ve(t,"options"),(t==null?void 0:t.signal)!=null&&Me(t.signal,"options.signal"),e=Jr(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ce;for await(const l of this){var a;if(t!=null&&(a=t.signal)!==null&&a!==void 0&&a.aborted)throw new ce;if(e-- >0)yield l;else return}}).call(this)}nn.streamReturningOperators={asIndexedPairs:rl,drop:dl,filter:bn,flatMap:ul,map:St,take:cl,compose:nl};nn.promiseReturningOperators={every:il,forEach:al,reduce:sl,toArray:fl,some:Yr,find:ol};var Gt,ir;function Qr(){if(ir)return Gt;ir=1;const{ArrayPrototypePop:e,Promise:t}=K,{isIterable:n,isNodeStream:r,isWebStream:a}=me,{pipelineImpl:l}=hn,{finished:s}=Re;Xr();function h(...g){return new t((d,c)=>{let R,I;const y=g[g.length-1];if(y&&typeof y=="object"&&!r(y)&&!n(y)&&!a(y)){const b=e(g);R=b.signal,I=b.end}l(g,(b,v)=>{b?c(b):d(v)},{signal:R,end:I})})}return Gt={finished:s,pipeline:h},Gt}var or;function Xr(){if(or)return Ct.exports;or=1;const{Buffer:e}=ke,{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=K,{promisify:{custom:a}}=_e,{streamReturningOperators:l,promiseReturningOperators:s}=nn,{codes:{ERR_ILLEGAL_CONSTRUCTOR:h}}=re,g=Vr,{pipeline:d}=hn,{destroyer:c}=Ue,R=Re,I=Qr(),y=me,b=Ct.exports=fn.Stream;b.isDisturbed=y.isDisturbed,b.isErrored=y.isErrored,b.isReadable=y.isReadable,b.Readable=mt();for(const x of n(l)){let w=function(...M){if(new.target)throw h();return b.Readable.from(r(C,this,M))};const C=l[x];t(w,"name",{__proto__:null,value:C.name}),t(w,"length",{__proto__:null,value:C.length}),t(b.Readable.prototype,x,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}for(const x of n(s)){let w=function(...M){if(new.target)throw h();return r(C,this,M)};const C=s[x];t(w,"name",{__proto__:null,value:C.name}),t(w,"length",{__proto__:null,value:C.length}),t(b.Readable.prototype,x,{__proto__:null,value:w,enumerable:!1,configurable:!0,writable:!0})}b.Writable=jr(),b.Duplex=we(),b.Transform=Ur,b.PassThrough=Hr,b.pipeline=d;const{addAbortSignal:v}=_t;return b.addAbortSignal=v,b.finished=R,b.destroy=c,b.compose=g,t(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return I}}),t(d,a,{__proto__:null,enumerable:!0,get(){return I.pipeline}}),t(R,a,{__proto__:null,enumerable:!0,get(){return I.finished}}),b.Stream=b,b._isUint8Array=function(C){return C instanceof Uint8Array},b._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},Ct.exports}(function(e){const t=Xr(),n=Qr(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(fi);function ar(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}function hl(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}class bl extends ut.EventEmitter{emit(t){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;for(var a=arguments.length,l=new Array(a>1?a-1:0),s=1;s<a;s++)l[s-1]=arguments[s];if(n){let g;if(l.length>0&&([g]=l),g instanceof Error)throw g;const d=new Error(`Unhandled error.${g?` (${g.message})`:""}`);throw d.context=g,d}const h=r[t];if(h===void 0)return!1;if(typeof h=="function")ar(h,this,l);else{const g=h.length,d=hl(h);for(let c=0;c<g;c+=1)ar(d[c],this,l)}return!0}}function lr(e){let t=!1,n=0,r;try{r=window[e],t=!0,n=r.length;const a="__storage_test__";return r.setItem(a,a),r.removeItem(a),!0}catch(a){const l=a;return l&&(l.code===22||l.code===1014||l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&n!==0}}class gl{constructor(){G(this,"store",{})}getItem(t){return this.store[t]||null}setItem(t,n){this.store[t]=n}}class pl{constructor(t,n){G(this,"storage",void 0),G(this,"_storeKey",void 0),this.storage=n,this._storeKey=t;try{n.getItem(t)||this.resetStore()}catch{}}static getInstance(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instance){let r;n==="local"&&lr("localStorage")?r=window.localStorage:n==="session"&&lr("sessionStorage")?r=window.sessionStorage:r=new gl,this.instance=new this(t,r)}return this.instance}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const t=this.getStore();return this.storage.setItem(this._storeKey,JSON.stringify({})),t}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(t){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[t]}set(t,n){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[t]=n,this.storage.setItem(this._storeKey,JSON.stringify(r))}}G(pl,"instance",void 0);const wl=ee(ee({},ii),oi),st=sr.getLogger("http-helpers");st.setLevel(ai.levels.INFO);let yl="torus-default";const _l="x-api-key";async function ml(e,t){let n=null;try{n=new URL(e)}catch{}return fetch(e,t)}function Sl(){const e={};return e[_l]=yl,e}function El(e){st.info(`Response: ${e.status} ${e.statusText}`),st.info(`Url: ${e.url}`)}function Rl(e){st.info(`Request tracing with traceID=${e.headers.get("x-web3-correlation-id")}`)}const Al=(e,t)=>{const n=new Promise((r,a)=>{const l=setTimeout(()=>{clearTimeout(l),a(new Error(`Timed out in ${e}ms`))},e)});return Promise.race([t,n])},zr=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(a.headers=ee(ee({},a.headers),Sl()));const l=li(a,n,{method:"POST"});return r.isUrlEncodedData?(l.body=t,l.headers["Content-Type"]==="application/json; charset=utf-8"&&delete l.headers["Content-Type"]):l.body=JSON.stringify(t),Al(r.timeout||6e4,ml(e,l).then(s=>{if(r.logTracingHeader&&Rl(s),s.ok){const h=s.headers.get("content-type");return h!=null&&h.includes("application/json")?s.json():s.text()}throw El(s),s}))};class Je extends Error{}Je.prototype.name="InvalidTokenError";function Tl(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function Nl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Tl(t)}catch{return atob(t)}}function Il(e,t){if(typeof e!="string")throw new Je("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new Je(`Invalid token specified: missing part #${n+1}`);let a;try{a=Nl(r)}catch(l){throw new Je(`Invalid token specified: invalid base64 for part #${n+1} (${l.message})`)}try{return JSON.parse(a)}catch(l){throw new Je(`Invalid token specified: invalid json for part #${n+1} (${l.message})`)}}const de={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},Cl=e=>{if(e===de.EIP155)return 1;if(e===de.SOLANA)return 1;throw new Error(`Chain namespace ${e} is not supported`)},Ol=e=>{const t=de.EIP155;return e===1?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:e===5?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:e===11155111?{chainNamespace:t,chainId:"0xaa36a7",rpcTarget:"https://rpc.ankr.com/eth_sepolia",displayName:"Sepolia Testnet",blockExplorer:"https://sepolia.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:e===137?{chainNamespace:t,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:e===80001?{chainNamespace:t,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon",decimals:18}:e===56?{chainNamespace:t,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:e===97?{chainNamespace:t,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:e===25?{chainNamespace:t,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:e===338?{chainNamespace:t,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos",decimals:18}:e===8217?{chainNamespace:t,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn",decimals:18}:null},xl=e=>{const t=de.SOLANA;return e===1?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana",decimals:9}:e===2?{chainNamespace:t,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana",decimals:9}:e===3?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana",decimals:9}:null},Zr=(e,t)=>{if(e===de.OTHER)return null;const n=t?typeof t=="number"?t:parseInt(t,16):Cl(e);return e===de.EIP155?Ol(n):e===de.SOLANA?xl(n):null};class Et extends si{constructor(t,n){super(n),G(this,"code",void 0),G(this,"message",void 0),this.code=t,this.message=n||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class F extends Et{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new F(t,`${F.messages[t]}, ${n}`)}static notFound(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5001,t)}static notInstalled(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5002,t)}static notReady(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5003,t)}static windowBlocked(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5004,t)}static windowClosed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5005,t)}static incompatibleChainNameSpace(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5006,t)}static duplicateAdapterError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5007,t)}static invalidProviderConfigError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5008,t)}static providerNotReadyError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5009,t)}static rpcConnectionError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5010,t)}static invalidParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5011,t)}static invalidNetwork(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return F.fromCode(5013,t)}}G(F,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class V extends Et{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new V(t,`${V.messages[t]}. ${n}`)}static connectionError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return V.fromCode(5111,t)}static disconnectionError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return V.fromCode(5112,t)}static notConnectedError(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return V.fromCode(5113,t)}static popupClosed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return V.fromCode(5114,t)}static mfaEnabled(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return V.fromCode(5115,t)}static chainConfigNotAdded(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return V.fromCode(5116,t)}static unsupportedOperation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return V.fromCode(5117,t)}static coreKitKeyNotFound(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return V.fromCode(5118,t)}static userNotLoggedIn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return V.fromCode(5119,t)}}G(V,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useCoreKitKey flag is enabled but coreKitKey is not available",5119:"User not logged in."});class ae extends Et{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new ae(t,`${ae.messages[t]}, ${n}`)}static chainIDNotAllowed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5201,t)}static operationNotAllowed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5202,t)}static chainNamespaceNotAllowed(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5203,t)}}G(ae,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});class gn extends Et{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new ae(t,`${gn.messages[t]}, ${n}`)}static invalidRequestArgs(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5301,t)}static invalidRequestMethod(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5302,t)}static invalidRequestParams(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ae.fromCode(5303,t)}}G(gn,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});const ft={OPENLOGIN:"openlogin",WALLET_CONNECT_V2:"wallet-connect-v2"},Qe=ee({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLFLARE:"solflare",SLOPE:"slope"},ft),it=ee({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},ft),kl=ee(ee({},it),Qe);ft.OPENLOGIN+"",ft.WALLET_CONNECT_V2+"",Qe.TORUS_SOLANA+"",Qe.PHANTOM+"",Qe.SOLFLARE+"",Qe.SLOPE+"",it.TORUS_EVM+"",it.METAMASK+"",it.COINBASE+"";const oe={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},ei=ee(ee({},oe),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated",CACHE_CLEAR:"cache_clear"});class $l extends bl{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),G(this,"adapterData",{}),G(this,"sessionTime",86400),G(this,"clientId",void 0),G(this,"web3AuthNetwork",wl.MAINNET),G(this,"rehydrated",!1),G(this,"chainConfig",null),G(this,"knownChainConfigs",{}),G(this,"adapterNamespace",void 0),G(this,"currentChainNamespace",void 0),G(this,"type",void 0),G(this,"name",void 0),G(this,"status",void 0),this.setAdapterSettings(t)}get chainConfigProxy(){return this.chainConfig?ee({},this.chainConfig):null}get connnected(){return this.status===oe.CONNECTED}setAdapterSettings(t){if(this.status===oe.READY)return;t!=null&&t.sessionTime&&(this.sessionTime=t.sessionTime),t!=null&&t.clientId&&(this.clientId=t.clientId),t!=null&&t.web3AuthNetwork&&(this.web3AuthNetwork=t.web3AuthNetwork);const n=t.chainConfig;if(n){if(!n.chainNamespace)throw F.notReady("ChainNamespace is required while setting chainConfig");this.currentChainNamespace=n.chainNamespace;const r=Zr(n.chainNamespace,n.chainId),a=ee(ee({},r||{}),n);this.chainConfig=a,this.addChainConfig(a)}}checkConnectionRequirements(){if(!(this.name===kl.WALLET_CONNECT_V2&&this.status===oe.CONNECTING)){if(this.status===oe.CONNECTING)throw F.notReady("Already connecting");if(this.status===oe.CONNECTED)throw V.connectionError("Already connected");if(this.status!==oe.READY)throw V.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements(){if(!this.clientId)throw F.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!this.chainConfig||!this.chainConfig.rpcTarget&&this.chainConfig.chainNamespace!==de.OTHER)throw F.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.chainId&&this.chainConfig.chainNamespace!==de.OTHER)throw F.invalidParams("chainID is required in chainConfig");if(this.status!==oe.NOT_READY){if(this.status===oe.CONNECTED)throw F.notReady("Already connected");if(this.status===oe.READY)throw F.notReady("Adapter is already initialized")}}checkDisconnectionRequirements(){if(this.status!==oe.CONNECTED)throw V.disconnectionError("Not connected with wallet")}checkAddChainRequirements(t){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&!this.provider)throw V.notConnectedError("Not connected with wallet.");if(this.currentChainNamespace!==t.chainNamespace)throw ae.chainNamespaceNotAllowed("This adapter doesn't support this chainNamespace")}checkSwitchChainRequirements(t){let{chainId:n}=t;if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&!this.provider)throw V.notConnectedError("Not connected with wallet.");if(!this.knownChainConfigs[n])throw V.chainConfigNotAdded("Invalid chainId")}updateAdapterData(t){this.adapterData=t,this.emit(ei.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:t})}addChainConfig(t){const n=this.knownChainConfigs[t.chainId];this.knownChainConfigs[t.chainId]=ee(ee({},n||{}),t)}getChainConfig(t){return this.knownChainConfigs[t]||null}}const ti="https://authjs.web3auth.io";var Ml=sr.getLogger("web3auth-logger");function pn(e){let t=!1,n=0,r;try{r=window[e],t=!0,n=r.length;const a="__storage_test__";return r.setItem(a,a),r.removeItem(a),!0}catch(a){const l=a;return!!(l&&(l.code===22||l.code===1014||l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&n!==0)}}const vl=e=>{const t=Il(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)},Dl=async(e,t)=>{const l={payload:e,header:{t:t==="solana"?"sip99":"eip191"},network:t==="solana"?"solana":"ethereum"},s=await zr(`${ti}/siww/get`,l);if(!s.success)throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return s.challenge},Pl=async(e,t,n,r,a,l,s)=>{const g={signature:{s:t,t:e==="solana"?"sip99":"eip191"},message:n,issuer:r,audience:typeof window.location<"u"?window.location.hostname:"com://reactnative",timeout:a},d=await zr(`${ti}/siww/verify`,g,{headers:{client_id:l,wallet_provider:r,web3auth_network:s}});if(!d.success)throw Ml.error("Failed to authenticate user, ,message verification failed",d.error),new Error("Failed to authenticate user, ,message verification failed");return d.token},Ll=(e,t)=>pn("localStorage")?localStorage.getItem(`${e.toLowerCase()}_${t}`):null,Wl=(e,t,n)=>pn("localStorage")?localStorage.setItem(`${e.toLowerCase()}_${t}`,n):null,jl=(e,t)=>pn("localStorage")?localStorage.removeItem(`${e.toLowerCase()}_${t}`):null;class Hl extends $l{async init(t){this.chainConfig||(this.chainConfig=Zr(de.EIP155,1))}async authenticateUser(){if(!this.provider||this.status!==oe.CONNECTED)throw V.notConnectedError();const{chainNamespace:t,chainId:n}=this.chainConfig,r=await this.provider.request({method:"eth_accounts"});if(r&&r.length>0){const a=Ll(r[0],this.name);if(a&&!vl(a))return{idToken:a};const l={domain:window.location.origin,uri:window.location.href,address:r[0],chainId:parseInt(n,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},s=await Dl(l,t),h=await this.provider.request({method:"personal_sign",params:[s,r[0]]}),g=await Pl(t,h,s,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return Wl(r[0],this.name,g),{idToken:g}}throw V.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const t=await this.provider.request({method:"eth_accounts"});t&&t.length>0&&jl(t[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(ei.DISCONNECTED)}}export{Hl as B};

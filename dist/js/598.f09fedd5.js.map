{"version":3,"file":"js/598.f09fedd5.js","mappings":"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","sources":["webpack://Handsy.io/../src/utils.ts","webpack://Handsy.io/../src/browserStorage.ts","webpack://Handsy.io/../src/constants.ts","webpack://Handsy.io/../src/index.ts","webpack://Handsy.io/../src/baseSessionManager.ts","webpack://Handsy.io/../src/webAuthnShareResolver.ts","webpack://Handsy.io/../src/openloginSessionManager.ts","webpack://Handsy.io/./node_modules/engine.io-parser/build/esm/commons.js","webpack://Handsy.io/./node_modules/engine.io-parser/build/esm/encodePacket.browser.js","webpack://Handsy.io/./node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","webpack://Handsy.io/./node_modules/engine.io-parser/build/esm/decodePacket.browser.js","webpack://Handsy.io/./node_modules/engine.io-parser/build/esm/index.js","webpack://Handsy.io/./node_modules/@socket.io/component-emitter/index.mjs","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/globalThis.browser.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/util.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/contrib/parseqs.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/transport.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/contrib/yeast.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/contrib/has-cors.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/transports/polling.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/transports/websocket.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/transports/webtransport.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/transports/index.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/contrib/parseuri.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/socket.js","webpack://Handsy.io/./node_modules/engine.io-client/build/esm/index.js","webpack://Handsy.io/./node_modules/socket.io-client/build/esm/url.js","webpack://Handsy.io/./node_modules/socket.io-parser/build/esm/is-binary.js","webpack://Handsy.io/./node_modules/socket.io-parser/build/esm/binary.js","webpack://Handsy.io/./node_modules/socket.io-parser/build/esm/index.js","webpack://Handsy.io/./node_modules/socket.io-client/build/esm/on.js","webpack://Handsy.io/./node_modules/socket.io-client/build/esm/socket.js","webpack://Handsy.io/./node_modules/socket.io-client/build/esm/contrib/backo2.js","webpack://Handsy.io/./node_modules/socket.io-client/build/esm/manager.js","webpack://Handsy.io/./node_modules/socket.io-client/build/esm/index.js","webpack://Handsy.io/../src/log.ts","webpack://Handsy.io/../src/SecurePubSub.ts","webpack://Handsy.io/../src/errors.ts","webpack://Handsy.io/../src/logger.ts","webpack://Handsy.io/../src/PopupHandler.ts","webpack://Handsy.io/../src/OpenLogin.ts","webpack://Handsy.io/../src/safeEventEmitter.ts","webpack://Handsy.io/../src/mux.ts","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/jwt-decode/build/esm/index.js","webpack://Handsy.io/../src/chain/IChainInterface.ts","webpack://Handsy.io/../src/chain/config.ts","webpack://Handsy.io/../src/errors/index.ts","webpack://Handsy.io/../src/wallet/index.ts","webpack://Handsy.io/../src/adapter/IAdapter.ts","webpack://Handsy.io/../src/loglevel.ts","webpack://Handsy.io/../src/config.ts","webpack://Handsy.io/../src/openloginAdapter.ts","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/add-abort-signal.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/compose.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/duplex.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/duplexify.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/from.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/legacy.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/operators.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/passthrough.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/readable.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/state.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/transform.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/utils.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/streams/writable.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/internal/validators.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/ours/browser.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/ours/errors.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/ours/primordials.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/ours/util.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/stream.js","webpack://Handsy.io/./node_modules/@web3auth/openlogin-adapter/node_modules/readable-stream/lib/stream/promises.js"],"sourcesContent":["import base64urlLib from \"base64url\";\n\nexport const base64url = base64urlLib;\n\nexport function safebtoa(str: string): string {\n  return base64url.encode(str);\n}\n\nexport function safeatob(str: string): string {\n  // Going backwards: from bytestream, to percent-encoding, to original string.\n  return base64url.decode(str);\n}\n\nexport function base64toJSON<T = Record<string, unknown>>(b64str: string): T {\n  return JSON.parse(base64url.decode(b64str));\n}\n\nexport function jsonToBase64<T = Record<string, unknown>>(json: T): string {\n  return base64url.encode(JSON.stringify(json));\n}\n\nexport interface IStorage {\n  getItem(key: string): string;\n  setItem(key: string, value: string): void;\n}\n\nexport function storageAvailable(type: string): boolean {\n  let storageExists = false;\n  let storageLength = 0;\n  let storage: Storage;\n  try {\n    storage = window[type as \"localStorage\" | \"sessionStorage\"];\n    storageExists = true;\n    storageLength = storage.length;\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (err: unknown) {\n    const error = err as { code: number; name: string };\n    return (\n      error &&\n      // everything except Firefox\n      (error.code === 22 ||\n        // Firefox\n        error.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        error.name === \"QuotaExceededError\" ||\n        // Firefox\n        error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storageExists &&\n      storageLength !== 0\n    );\n  }\n}\n","import { IStorage, storageAvailable } from \"./utils\";\n\nexport class MemoryStore implements IStorage {\n  store: Record<string, string> = {};\n\n  getItem(key: string): string {\n    return this.store[key] || null;\n  }\n\n  setItem(key: string, value: string): void {\n    this.store[key] = value;\n  }\n}\n\nexport class BrowserStorage {\n  // eslint-disable-next-line no-use-before-define\n  private static instance: BrowserStorage;\n\n  public storage: IStorage;\n\n  private _storeKey: string;\n\n  private constructor(storeKey: string, storage: IStorage) {\n    this.storage = storage;\n    this._storeKey = storeKey;\n    try {\n      if (!storage.getItem(storeKey)) {\n        this.resetStore();\n      }\n    } catch (error) {\n      // Storage is not available\n    }\n  }\n\n  static getInstance(key: string, storageKey: \"session\" | \"local\" = \"local\"): BrowserStorage {\n    if (!this.instance) {\n      let storage: IStorage;\n      if (storageKey === \"local\" && storageAvailable(\"localStorage\")) {\n        storage = window.localStorage;\n      } else if (storageKey === \"session\" && storageAvailable(\"sessionStorage\")) {\n        storage = window.sessionStorage;\n      } else {\n        storage = new MemoryStore();\n      }\n\n      this.instance = new this(key, storage);\n    }\n    return this.instance;\n  }\n\n  toJSON(): string {\n    return this.storage.getItem(this._storeKey);\n  }\n\n  resetStore(): Record<string, unknown> {\n    const currStore = this.getStore();\n    this.storage.setItem(this._storeKey, JSON.stringify({}));\n    return currStore;\n  }\n\n  getStore(): Record<string, unknown> {\n    return JSON.parse(this.storage.getItem(this._storeKey) || \"{}\");\n  }\n\n  get<T>(key: string): T {\n    const store = JSON.parse(this.storage.getItem(this._storeKey) || \"{}\");\n    return store[key];\n  }\n\n  set<T>(key: string, value: T): void {\n    const store = JSON.parse(this.storage.getItem(this._storeKey) || \"{}\");\n    store[key] = value;\n    this.storage.setItem(this._storeKey, JSON.stringify(store));\n  }\n}\n","import { TORUS_LEGACY_NETWORK, TORUS_SAPPHIRE_NETWORK } from \"@toruslabs/constants\";\n\nexport const storeKey = \"openlogin_store\";\n\nexport const UX_MODE = {\n  POPUP: \"popup\",\n  REDIRECT: \"redirect\",\n} as const;\n\nexport const OPENLOGIN_NETWORK = {\n  ...TORUS_SAPPHIRE_NETWORK,\n  ...TORUS_LEGACY_NETWORK,\n} as const;\n\nexport const SUPPORTED_KEY_CURVES = {\n  SECP256K1: \"secp256k1\",\n  ED25519: \"ed25519\",\n} as const;\n\nexport const LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  TWITCH: \"twitch\",\n  APPLE: \"apple\",\n  LINE: \"line\",\n  GITHUB: \"github\",\n  KAKAO: \"kakao\",\n  LINKEDIN: \"linkedin\",\n  TWITTER: \"twitter\",\n  WEIBO: \"weibo\",\n  WECHAT: \"wechat\",\n  EMAIL_PASSWORDLESS: \"email_passwordless\",\n  SMS_PASSWORDLESS: \"sms_passwordless\",\n  WEBAUTHN: \"webauthn\",\n  JWT: \"jwt\",\n} as const;\n\nexport const MFA_LEVELS = {\n  DEFAULT: \"default\",\n  OPTIONAL: \"optional\",\n  MANDATORY: \"mandatory\",\n  NONE: \"none\",\n} as const;\n\nexport const OPENLOGIN_ACTIONS = {\n  LOGIN: \"login\",\n  ENABLE_MFA: \"enable_mfa\",\n  MODIFY_MFA: \"modify_mfa\",\n} as const;\n\nexport const BUILD_ENV = {\n  PRODUCTION: \"production\",\n  DEVELOPMENT: \"development\",\n  STAGING: \"staging\",\n  TESTING: \"testing\",\n} as const;\n\nexport { TORUS_LEGACY_NETWORK, TORUS_SAPPHIRE_NETWORK };\n","/* eslint-disable @typescript-eslint/no-throw-literal */\nimport type { SpanContext, TransactionContext } from \"@sentry/types\";\nimport merge from \"lodash.merge\";\nimport logLevel, { levels, LogLevelDesc } from \"loglevel\";\n\nconst log = logLevel.getLogger(\"http-helpers\");\nlog.setLevel(levels.INFO);\n\nexport interface CustomOptions {\n  [key: string]: unknown;\n  useAPIKey?: boolean;\n  isUrlEncodedData?: boolean;\n  timeout?: number;\n  logTracingHeader?: boolean;\n}\n\nexport interface Data {}\n\nlet apiKey = \"torus-default\";\nlet embedHost = \"\";\n\n// #region API Keys\nexport const gatewayAuthHeader = \"x-api-key\";\nexport const gatewayEmbedHostHeader = \"x-embed-host\";\n\ninterface Sentry {\n  startTransaction(_: TransactionContext): {\n    startChild(a: SpanContext): {\n      finish(): void;\n    };\n    finish(): void;\n  };\n}\n\nlet sentry: Sentry | null = null;\nconst tracingOrigins: string[] = [];\nconst tracingPaths: string[] = [];\n\nexport function enableSentryTracing(_sentry: Sentry, _tracingOrigins: string[], _tracingPaths: string[]) {\n  sentry = _sentry;\n  tracingOrigins.push(..._tracingOrigins);\n  tracingPaths.push(..._tracingPaths);\n}\n\nexport function setEmbedHost(embedHost_: string): void {\n  embedHost = embedHost_;\n}\n\nexport function clearEmbedHost(): void {\n  embedHost = \"\";\n}\n\nexport function getEmbedHost(): string {\n  return embedHost;\n}\n\nexport function setAPIKey(apiKey_: string): void {\n  apiKey = apiKey_;\n}\n\nexport function clearAPIKey(): void {\n  apiKey = \"torus-default\";\n}\n\nexport function getAPIKey(): string {\n  return apiKey;\n}\n\n// #endregion\n\nexport function setLogLevel(level: LogLevelDesc) {\n  log.setLevel(level);\n}\n\nasync function fetchAndTrace(url: string, init: RequestInit): Promise<Response> {\n  let _url: URL | null = null;\n  try {\n    _url = new URL(url);\n  } catch (error) {}\n  if (sentry && _url && (tracingOrigins.includes(_url.origin) || tracingPaths.includes(_url.pathname))) {\n    const transaction = sentry.startTransaction({\n      name: url,\n    });\n    const span = transaction.startChild({\n      op: \"http\",\n    }); // This function returns a Span\n\n    const response = await fetch(url, init);\n    span.finish(); // Remember that only finished spans will be sent with the transaction\n\n    transaction.finish(); // Finishing the transaction will send it to Sentry\n\n    return response;\n  }\n\n  return fetch(url, init);\n}\nfunction getApiKeyHeaders(): Record<string, string> {\n  const headers: Record<string, string> = {};\n  if (apiKey) headers[gatewayAuthHeader] = apiKey;\n  if (embedHost) headers[gatewayEmbedHostHeader] = embedHost;\n  return headers;\n}\n\nfunction debugLogResponse(response: Response) {\n  log.info(`Response: ${response.status} ${response.statusText}`);\n  log.info(`Url: ${response.url}`);\n}\n\nfunction logTracingHeader(response: Response) {\n  log.info(`Request tracing with traceID=${response.headers.get(\"x-web3-correlation-id\")}`);\n}\n\nexport const promiseTimeout = <T>(ms: number, promise: Promise<T>): Promise<T> => {\n  const timeout = new Promise<T>((_resolve, reject) => {\n    const id = setTimeout(() => {\n      clearTimeout(id);\n      reject(new Error(`Timed out in ${ms}ms`));\n    }, ms);\n  });\n  return Promise.race<T>([promise, timeout]);\n};\n\nexport const get = async <T>(url: string, options_: RequestInit = {}, customOptions: CustomOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\" as RequestMode,\n    headers: {},\n  };\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = { ...defaultOptions.headers, ...getApiKeyHeaders() };\n  }\n  const options = merge(defaultOptions, options_, { method: \"GET\" });\n  const response = await fetchAndTrace(url, options);\n  if (response.ok) {\n    const responseContentType = response.headers.get(\"content-type\");\n    if (responseContentType?.includes(\"application/json\")) {\n      return response.json() as Promise<T>;\n    }\n    return response.text() as Promise<T>;\n  }\n  debugLogResponse(response);\n  throw response;\n};\n\nexport const post = <T>(url: string, data: Data = {}, options_: RequestInit = {}, customOptions: CustomOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\" as RequestMode,\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    },\n  };\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = { ...defaultOptions.headers, ...getApiKeyHeaders() };\n  }\n  const options = merge(defaultOptions, options_, { method: \"POST\" });\n\n  // deep merge changes the structure of form data and url encoded data ,\n  // so we should not deepmerge body data\n  if (customOptions.isUrlEncodedData) {\n    // for multipart request browser/client will add multipart content type\n    // along with multipart boundary , so for multipart request send\n    // content-type: undefined or send with multipart boundary if already known\n    options.body = data as string;\n    // If url encoded data, this must not be the content type\n    if (options.headers[\"Content-Type\"] === \"application/json; charset=utf-8\") delete options.headers[\"Content-Type\"];\n  } else {\n    options.body = JSON.stringify(data);\n  }\n\n  return promiseTimeout<T>(\n    (customOptions.timeout as number) || 60000,\n    fetchAndTrace(url, options).then((response) => {\n      if (customOptions.logTracingHeader) {\n        logTracingHeader(response);\n      }\n      if (response.ok) {\n        const responseContentType = response.headers.get(\"content-type\");\n        if (responseContentType?.includes(\"application/json\")) {\n          return response.json() as Promise<T>;\n        }\n        return response.text() as Promise<T>;\n      }\n      debugLogResponse(response);\n      throw response;\n    })\n  );\n};\n\nexport const patch = async <T>(url: string, data: Data = {}, options_: RequestInit = {}, customOptions: CustomOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\" as RequestMode,\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    },\n  };\n  // for multipart request browser/client will add multipart content type\n  // along with multipart boundary , so for multipart request send\n  // content-type: undefined or send with multipart boundary if already known\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = { ...defaultOptions.headers, ...getApiKeyHeaders() };\n  }\n  const options = merge(defaultOptions, options_, { method: \"PATCH\" });\n  // deep merge changes the structure of form data and url encoded data ,\n  // so we should not deepmerge body data\n  if (customOptions.isUrlEncodedData) {\n    // for multipart request browser/client will add multipart content type\n    // along with multipart boundary , so for multipart request send\n    // content-type: undefined or send with multipart boundary if already known\n    options.body = data as string;\n    // If url encoded data, this must not be the content type\n    if (options.headers[\"Content-Type\"] === \"application/json; charset=utf-8\") delete options.headers[\"Content-Type\"];\n  } else {\n    options.body = JSON.stringify(data);\n  }\n  const response = await fetchAndTrace(url, options);\n  if (response.ok) {\n    const responseContentType = response.headers.get(\"content-type\");\n    if (responseContentType?.includes(\"application/json\")) {\n      return response.json() as Promise<T>;\n    }\n    return response.text() as Promise<T>;\n  }\n  debugLogResponse(response);\n  throw response;\n};\n\nexport const put = async <T>(url: string, data: Data = {}, options_: RequestInit = {}, customOptions: CustomOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\" as RequestMode,\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    },\n  };\n  // for multipart request browser/client will add multipart content type\n  // along with multipart boundary , so for multipart request send\n  // content-type: undefined or send with multipart boundary if already known\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = { ...defaultOptions.headers, ...getApiKeyHeaders() };\n  }\n  const options = merge(defaultOptions, options_, { method: \"PUT\" });\n  // deep merge changes the structure of form data and url encoded data ,\n  // so we should not deepmerge body data\n  if (customOptions.isUrlEncodedData) {\n    // for multipart request browser/client will add multipart content type\n    // along with multipart boundary , so for multipart request send\n    // content-type: undefined or send with multipart boundary if already known\n    options.body = data as string;\n    // If url encoded data, this must not be the content type\n    if (options.headers[\"Content-Type\"] === \"application/json; charset=utf-8\") delete options.headers[\"Content-Type\"];\n  } else {\n    options.body = JSON.stringify(data);\n  }\n  const response = await fetchAndTrace(url, options);\n  if (response.ok) {\n    const responseContentType = response.headers.get(\"content-type\");\n    if (responseContentType?.includes(\"application/json\")) {\n      return response.json() as Promise<T>;\n    }\n    return response.text() as Promise<T>;\n  }\n  debugLogResponse(response);\n  throw response;\n};\n\nexport const remove = async <T>(url: string, data: Data = {}, options_: RequestInit = {}, customOptions: CustomOptions = {}) => {\n  const defaultOptions = {\n    mode: \"cors\" as RequestMode,\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    },\n  };\n  // for multipart request browser/client will add multipart content type\n  // along with multipart boundary , so for multipart request send\n  // content-type: undefined or send with multipart boundary if already known\n  if (customOptions.useAPIKey) {\n    defaultOptions.headers = { ...defaultOptions.headers, ...getApiKeyHeaders() };\n  }\n  const options = merge(defaultOptions, options_, { method: \"DELETE\" });\n  if (customOptions.isUrlEncodedData) {\n    // for multipart request browser/client will add multipart content type\n    // along with multipart boundary , so for multipart request send\n    // content-type: undefined or send with multipart boundary if already known\n    options.body = data as string;\n    // If url encoded data, this must not be the content type\n    if (options.headers[\"Content-Type\"] === \"application/json; charset=utf-8\") delete options.headers[\"Content-Type\"];\n  } else {\n    options.body = JSON.stringify(data);\n  }\n  const response = await fetchAndTrace(url, options);\n  if (response.ok) {\n    const responseContentType = response.headers.get(\"content-type\");\n    if (responseContentType?.includes(\"application/json\")) {\n      return response.json() as Promise<T>;\n    }\n    return response.text() as Promise<T>;\n  }\n  debugLogResponse(response);\n  throw response;\n};\n\nexport const generateJsonRPCObject = (method: string, parameters: unknown) => ({\n  jsonrpc: \"2.0\",\n  method,\n  id: 10,\n  params: parameters,\n});\n\nexport const promiseRace = <T>(url: string, options: RequestInit, timeout = 60000) =>\n  Promise.race([\n    get<T>(url, options),\n    new Promise<T>((_resolve, reject) => {\n      setTimeout(() => {\n        reject(new Error(\"timed out\"));\n      }, timeout);\n    }),\n  ]);\n","import { get, patch, post, put } from \"@toruslabs/http-helpers\";\n\nimport { ApiRequestParams, ISessionManager } from \"./interfaces\";\n\nexport abstract class BaseSessionManager<TSessionData> implements ISessionManager<TSessionData> {\n  sessionId: string;\n\n  checkSessionParams() {\n    if (!this.sessionId) throw new Error(\"Session id is required\");\n    this.sessionId = this.sessionId.padStart(64, \"0\");\n  }\n\n  /**\n   * Common handler method for making an http request.\n   *\n   * Note: Embed all the query parameters in the path itself.\n   */\n  protected request<T>({ method = \"GET\", url, data = {}, headers = {} }: ApiRequestParams): Promise<T> {\n    const options = { headers };\n\n    switch (method) {\n      case \"GET\":\n        return get<T>(url, options);\n      case \"POST\":\n        return post<T>(url, data, options);\n      case \"PUT\":\n        return put<T>(url, data, options);\n      case \"PATCH\":\n        return patch<T>(url, data, options);\n    }\n\n    throw new Error(\"Invalid method type\");\n  }\n\n  abstract createSession(data: TSessionData): Promise<string>;\n\n  abstract authorizeSession(): Promise<TSessionData>;\n\n  abstract updateSession(data: Partial<TSessionData>): Promise<void>;\n\n  abstract invalidateSession(): Promise<boolean>;\n}\n","import { decrypt, Ecies, encrypt, getPublic } from \"@toruslabs/eccrypto\";\n\nimport MetadataStorageLayer, { PubKeyParams } from \"./MetadataStorageLayer\";\nimport { ec } from \"./utils\";\n\nconst WEBAUTHN_TORUS_SHARE = \"webauthn_torus_share\";\nconst WEBAUTHN_DEVICE_SHARE = \"webauthn_device_share\";\n\nexport type EciesHex = {\n  iv: string;\n  ephemPublicKey: string;\n  ciphertext: string;\n  mac: string;\n};\n\nexport function encParamsHexToBuf(encParamsHex: EciesHex): Ecies {\n  return {\n    iv: Buffer.from(encParamsHex.iv, \"hex\"),\n    ephemPublicKey: Buffer.from(encParamsHex.ephemPublicKey, \"hex\"),\n    ciphertext: Buffer.from(encParamsHex.ciphertext, \"hex\"),\n    mac: Buffer.from(encParamsHex.mac, \"hex\"),\n  };\n}\n\nexport function encParamsBufToHex(encParams: Ecies): EciesHex {\n  return {\n    iv: Buffer.from(encParams.iv).toString(\"hex\"),\n    ephemPublicKey: Buffer.from(encParams.ephemPublicKey).toString(\"hex\"),\n    ciphertext: Buffer.from(encParams.ciphertext).toString(\"hex\"),\n    mac: Buffer.from(encParams.mac).toString(\"hex\"),\n  };\n}\n\nexport async function encryptData(privKeyHex: string, d: unknown): Promise<string> {\n  const serializedDec = JSON.stringify(d);\n  const serializedBuf = Buffer.from(serializedDec, \"utf-8\");\n  const encParams = await encrypt(getPublic(Buffer.from(privKeyHex, \"hex\")), serializedBuf);\n  const encParamsHex = encParamsBufToHex(encParams);\n  const sData = JSON.stringify(encParamsHex);\n  return sData;\n}\n\nexport async function decryptData<T>(privKeyHex: string, d: string): Promise<T> {\n  const encParamsHex: EciesHex = JSON.parse(d);\n  const encParams = encParamsHexToBuf(encParamsHex);\n  const keyPair = ec.keyFromPrivate(privKeyHex);\n  const serializedBuf = await decrypt(Buffer.from(keyPair.getPrivate().toString(\"hex\", 64), \"hex\"), encParams);\n  const serializedDec = serializedBuf.toString(\"utf-8\");\n  const data: T = JSON.parse(serializedDec);\n  return data;\n}\n\nexport async function getAndDecryptData<T>(m: MetadataStorageLayer, privKeyHex: string, namespace: string): Promise<Record<string, T> | null> {\n  const keyPair = ec.keyFromPrivate(privKeyHex);\n  const pubKey = keyPair.getPublic();\n  const serializedData = await m.getMetadata({ pub_key_X: pubKey.getX().toString(16), pub_key_Y: pubKey.getY().toString(16) }, namespace);\n  if (!serializedData) {\n    return null;\n  }\n  const data = await decryptData<T>(privKeyHex, serializedData);\n  return data as Record<string, T>;\n}\n\nexport async function encryptAndSetData(m: MetadataStorageLayer, privKeyHex: string, d: Record<string, unknown>, namespace: string): Promise<void> {\n  const sData = await encryptData(privKeyHex, d);\n  const metadataParams = m.generateMetadataParams(sData, privKeyHex);\n  await m.setMetadata(metadataParams, namespace);\n}\n\nexport async function setTorusShare(\n  m: MetadataStorageLayer,\n  webAuthnPubKey: PubKeyParams,\n  webAuthnRefHex: string,\n  subspace: string,\n  subspaceData: unknown\n): Promise<void> {\n  const refKeyPair = ec.keyFromPrivate(webAuthnRefHex);\n  const privKey = refKeyPair.getPrivate();\n  const pubKey = ec.keyFromPublic({\n    x: webAuthnPubKey.pub_key_X,\n    y: webAuthnPubKey.pub_key_Y,\n  });\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_TORUS_SHARE);\n  let d: Record<string, unknown> = {};\n  if (data) d = data;\n  const serializedSubspaceData = JSON.stringify(subspaceData);\n  const serializedSubspaceDataBuf = Buffer.from(serializedSubspaceData, \"utf-8\");\n  const encSubspaceData = await encrypt(Buffer.from(pubKey.getPublic(\"hex\"), \"hex\"), serializedSubspaceDataBuf);\n  const encSubspaceDataHex = encParamsBufToHex(encSubspaceData);\n  d[subspace] = encSubspaceDataHex;\n  await encryptAndSetData(m, privKey.toString(\"hex\", 64), d, WEBAUTHN_TORUS_SHARE);\n}\n\nexport async function setDeviceShare(m: MetadataStorageLayer, webAuthnRefHex: string, subspace: string, subspaceData: unknown): Promise<void> {\n  const keyPair = ec.keyFromPrivate(webAuthnRefHex);\n  const privKey = keyPair.getPrivate();\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_DEVICE_SHARE);\n  let d: Record<string, unknown> = {};\n  if (data) d = data;\n  d[subspace] = subspaceData;\n  await encryptAndSetData(m, privKey.toString(\"hex\", 64), d, WEBAUTHN_DEVICE_SHARE);\n}\n\nexport async function getTorusShare<T>(m: MetadataStorageLayer, webAuthnKeyHex: string, webAuthnRefHex: string, subspace: string): Promise<T | null> {\n  const data = await getAndDecryptData<EciesHex>(m, webAuthnRefHex, WEBAUTHN_TORUS_SHARE);\n  if (!data) return null;\n  const encParamsHex = data[subspace];\n  if (!encParamsHex) return null;\n  const encParams = encParamsHexToBuf(encParamsHex);\n  const keyPair = ec.keyFromPrivate(webAuthnKeyHex);\n  const privKey = keyPair.getPrivate();\n  const serializedSubspaceDataBuf = await decrypt(Buffer.from(privKey.toString(\"hex\", 64), \"hex\"), encParams);\n  const serializedSubspaceData = serializedSubspaceDataBuf.toString(\"utf-8\");\n  const subspaceData = JSON.parse(serializedSubspaceData);\n  return subspaceData;\n}\n\nexport async function getDeviceShare<T>(m: MetadataStorageLayer, webAuthnRefHex: string, subspace: string): Promise<T | null> {\n  const data = await getAndDecryptData<T>(m, webAuthnRefHex, WEBAUTHN_DEVICE_SHARE);\n  if (data) return data[subspace];\n  return null;\n}\n","import { BaseSessionManager } from \"@toruslabs/base-session-manager\";\nimport { generatePrivate, getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { decryptData, encryptData, keccak256 } from \"@toruslabs/metadata-helpers\";\n\nimport { OpenloginSessionManagerOptions, SessionApiResponse, SessionRequestBody } from \"./interfaces\";\n\nconst DEFAULT_SESSION_TIMEOUT = 86400;\nexport class OpenloginSessionManager<T> extends BaseSessionManager<T> {\n  sessionServerBaseUrl = \"https://broadcast-server.tor.us\";\n\n  sessionNamespace: string;\n\n  sessionTime: number = DEFAULT_SESSION_TIMEOUT;\n\n  public sessionId: string = \"\";\n\n  constructor({ sessionServerBaseUrl, sessionNamespace, sessionTime, sessionId }: OpenloginSessionManagerOptions = {}) {\n    super();\n\n    if (sessionServerBaseUrl) {\n      this.sessionServerBaseUrl = sessionServerBaseUrl;\n    }\n    if (sessionNamespace) this.sessionNamespace = sessionNamespace;\n    if (sessionTime) this.sessionTime = sessionTime;\n    if (sessionId) this.sessionId = sessionId.padStart(64, \"0\");\n  }\n\n  static generateRandomSessionKey(): string {\n    return generatePrivate().toString(\"hex\").padStart(64, \"0\");\n  }\n\n  async createSession(data: T): Promise<string> {\n    super.checkSessionParams();\n    const privKey = Buffer.from(this.sessionId, \"hex\");\n    const pubKey = getPublic(privKey).toString(\"hex\");\n    const encData = await encryptData(this.sessionId, data);\n    const signature = (await sign(privKey, keccak256(Buffer.from(encData, \"utf8\")))).toString(\"hex\");\n\n    const body: SessionRequestBody = {\n      key: pubKey,\n      data: encData,\n      signature,\n      namespace: this.sessionNamespace,\n      timeout: this.sessionTime,\n    };\n\n    await super.request({ method: \"POST\", url: `${this.sessionServerBaseUrl}/store/set`, data: body });\n\n    return this.sessionId;\n  }\n\n  async authorizeSession(): Promise<T> {\n    super.checkSessionParams();\n    const pubkey = getPublic(Buffer.from(this.sessionId, \"hex\")).toString(\"hex\");\n    const url = new URL(`${this.sessionServerBaseUrl}/store/get`);\n    url.searchParams.append(\"key\", pubkey);\n    if (this.sessionNamespace) url.searchParams.append(\"namespace\", this.sessionNamespace);\n\n    const result = await super.request<SessionApiResponse>({ url: url.toString() });\n    if (!result.message) {\n      throw new Error(\"Session Expired or Invalid public key\");\n    }\n\n    const response = await decryptData<T & { error?: string }>(this.sessionId, result.message);\n    if (response.error) {\n      throw new Error(\"There was an error decrypting data.\");\n    }\n\n    return response;\n  }\n\n  async updateSession(data: Partial<T>): Promise<void> {\n    super.checkSessionParams();\n    const privKey = Buffer.from(this.sessionId, \"hex\");\n    const pubKey = getPublic(privKey).toString(\"hex\");\n    const encData = await encryptData(this.sessionId, data);\n    const signature = (await sign(privKey, keccak256(Buffer.from(encData, \"utf8\")))).toString(\"hex\");\n\n    const body: SessionRequestBody = {\n      key: pubKey,\n      data: encData,\n      signature,\n      namespace: this.sessionNamespace,\n    };\n\n    await super.request({ method: \"PUT\", url: `${this.sessionServerBaseUrl}/store/update`, data: body });\n  }\n\n  async invalidateSession(): Promise<boolean> {\n    super.checkSessionParams();\n    const privKey = Buffer.from(this.sessionId, \"hex\");\n    const pubKey = getPublic(privKey).toString(\"hex\");\n    const encData = await encryptData(this.sessionId, {});\n    const signature = (await sign(privKey, keccak256(Buffer.from(encData, \"utf8\")))).toString(\"hex\");\n\n    const data: SessionRequestBody = {\n      key: pubKey,\n      data: encData,\n      signature,\n      namespace: this.sessionNamespace,\n      timeout: 1,\n    };\n\n    await super.request({ method: \"POST\", url: `${this.sessionServerBaseUrl}/store/set`, data });\n    this.sessionId = \"\";\n    return true;\n  }\n}\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data\n            .arrayBuffer()\n            .then(toArray)\n            .then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, encoded => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, encodedPacket => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        }\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* READ_PAYLOAD */;\n                }\n                else if (state === 2 /* READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        }\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","import { globalThisShim as globalThis } from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/unshiftio/yeast\n'use strict';\nconst alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''), length = 64, map = {};\nlet seed = 0, i = 0, prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nexport function encode(num) {\n    let encoded = '';\n    do {\n        encoded = alphabet[num % length] + encoded;\n        num = Math.floor(num / length);\n    } while (num > 0);\n    return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nexport function decode(str) {\n    let decoded = 0;\n    for (i = 0; i < str.length; i++) {\n        decoded = decoded * length + map[str.charAt(i)];\n    }\n    return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nexport function yeast() {\n    const now = encode(+new Date());\n    if (now !== prev)\n        return seed = 0, prev = now;\n    return now + '.' + encode(seed++);\n}\n//\n// Map each character to its index.\n//\nfor (; i < length; i++)\n    map[alphabet[i]] = i;\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","// browser shim for xmlhttprequest module\nimport { hasCORS } from \"../contrib/has-cors.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nexport function XHR(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\nexport function createCookieJar() { }\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nimport { createCookieJar, XHR as XMLHttpRequest, } from \"./xmlhttprequest.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false,\n    });\n    return null != xhr.responseType;\n})();\nexport class Polling extends Transport {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        this.polling = false;\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n        if (this.opts.withCredentials) {\n            this.cookieJar = createCookieJar();\n        }\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, cookieJar: this.cookieJar }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    create() {\n        var _a;\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, true);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(xhr);\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this.cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import { globalThisShim as globalThis } from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { pick } from \"../util.js\";\nimport { nextTick, usingBrowserWebSocket, WebSocket, } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @param {Object} opts - connection options\n     * @protected\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \n                        // @ts-ignore\n                        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @private\n     */\n    check() {\n        return !!WebSocket;\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"./websocket-constructor.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        // @ts-ignore\n        if (typeof WebTransport !== \"function\") {\n            return;\n        }\n        // @ts-ignore\n        this.transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        this.transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this.transport.ready.then(() => {\n            this.transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this.writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this.writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this.writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this.transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","import { Polling } from \"./polling.js\";\nimport { WS } from \"./websocket.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: Polling,\n};\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 2000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { defaultBinaryType } from \"./transports/websocket-constructor.js\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts = {}) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parse(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\n            \"polling\",\n            \"websocket\",\n            \"webtransport\",\n        ];\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this.beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", (reason) => this.onClose(\"transport close\", reason));\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this.upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            this.resetPingTimeout();\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this.getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    getWritablePackets() {\n        const shouldCheckPayloadSize = this.maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this.maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\n","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport const protocol = Socket.protocol;\nexport { Transport, TransportError } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\nexport { parse } from \"./contrib/parseuri.js\";\nexport { nextTick } from \"./transports/websocket-constructor.js\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n        }\n        else if (this.connected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        this.acks[id] = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, [null, ...args]);\n        };\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        // the timeout flag is optional\n        const withErr = this.flags.timeout !== undefined || this._opts.ackTimeout !== undefined;\n        return new Promise((resolve, reject) => {\n            args.push((arg1, arg2) => {\n                if (withErr) {\n                    return arg1 ? reject(arg1) : resolve(arg2);\n                }\n                else {\n                    return resolve(arg1);\n                }\n            });\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\n","import log from \"loglevel\";\n\nexport default log.getLogger(\"SecurePubSub\");\n","import { getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { post, setLogLevel } from \"@toruslabs/http-helpers\";\nimport { decryptData, encryptData, keccak256 } from \"@toruslabs/metadata-helpers\";\nimport { LogLevelDesc } from \"loglevel\";\nimport { io, type Socket } from \"socket.io-client\";\n\nimport { ISecurePubSubOptions, SetDataBody } from \"./interfaces\";\nimport log from \"./log\";\n\nexport class SecurePubSub {\n  options: ISecurePubSubOptions;\n\n  SOCKET_CONN: Socket | null = null;\n\n  constructor(options: ISecurePubSubOptions = {}) {\n    this.options = options;\n    this.options.timeout = options.timeout || 600; // 10 mins is default timeout\n    this.options.serverUrl = options.serverUrl || \"https://broadcast-server.tor.us\";\n    this.options.enableLogging = options.enableLogging || false;\n    this.options.namespace = options.namespace || \"\";\n    if (this.options.enableLogging) log.enableAll();\n    else log.disableAll();\n  }\n\n  static setLogLevel(level: LogLevelDesc) {\n    log.setLevel(level);\n    setLogLevel(level);\n  }\n\n  async publish(topic: string, message: string): Promise<void> {\n    const topicPrivKey = keccak256(Buffer.from(topic, \"utf8\"));\n    const encryptedData = await encryptData(topicPrivKey.toString(\"hex\"), message);\n    const signature = await sign(topicPrivKey, keccak256(Buffer.from(encryptedData, \"utf8\")));\n    const fetchBody: SetDataBody = {\n      key: getPublic(topicPrivKey).toString(\"hex\"), // already padded\n      data: encryptedData,\n      signature: signature.toString(\"hex\"),\n      timeout: this.options.timeout,\n      namespace: this.options.namespace,\n    };\n    return post(`${this.options.serverUrl}/channel/set`, fetchBody);\n  }\n\n  async subscribe(topic: string): Promise<string> {\n    let isPromisePending = true;\n    const topicPrivKey = keccak256(Buffer.from(topic, \"utf8\"));\n    const topicPubKey = getPublic(topicPrivKey).toString(\"hex\"); // already padded\n    const currentSocketConnection = this.getSocketConnection();\n    if (currentSocketConnection.connected) {\n      log.debug(\"already connected with socket\");\n      currentSocketConnection.emit(\"check_auth_status\", topicPubKey, { namespace: this.options.namespace });\n    } else {\n      currentSocketConnection.once(\"connect\", () => {\n        log.debug(\"connected with socket\");\n        currentSocketConnection.emit(\"check_auth_status\", topicPubKey, { namespace: this.options.namespace });\n      });\n    }\n\n    const reconnect = () => {\n      currentSocketConnection.once(\"connect\", async () => {\n        log.debug(\"connected with socket using reconnect\");\n        if (isPromisePending) currentSocketConnection.emit(\"check_auth_status\", topicPubKey, { namespace: this.options.namespace });\n      });\n    };\n\n    const visibilityListener = () => {\n      if (!isPromisePending) document.removeEventListener(\"visibilitychange\", visibilityListener);\n      // if not connected, then wait for connection and ping server for latest msg.\n      if (!currentSocketConnection.connected && document.visibilityState === \"visible\") {\n        reconnect();\n      }\n    };\n\n    const disconnectListener = () => {\n      log.debug(\"socket disconnected\", isPromisePending);\n      if (isPromisePending) {\n        log.error(\"socket disconnected unexpectedly, reconnecting socket\");\n        reconnect();\n      } else {\n        currentSocketConnection.removeListener(\"disconnect\", disconnectListener);\n      }\n    };\n\n    currentSocketConnection.on(\"disconnect\", disconnectListener);\n\n    const returnPromise = new Promise<string>((resolve, reject) => {\n      const listener = async (ev: string) => {\n        try {\n          const decData = await decryptData(topicPrivKey.toString(\"hex\"), ev);\n          log.info(\"got data\", decData);\n          resolve(decData as string);\n        } catch (error) {\n          log.error(error);\n          reject(error);\n        } finally {\n          isPromisePending = false;\n          document.removeEventListener(\"visibilitychange\", visibilityListener);\n        }\n      };\n      log.info(\"listening to\", `${topicPubKey}_success`);\n      currentSocketConnection.once(`${topicPubKey}_success`, listener);\n    });\n\n    if (typeof document !== \"undefined\") document.addEventListener(\"visibilitychange\", visibilityListener);\n    return returnPromise;\n  }\n\n  public cleanup() {\n    if (this.SOCKET_CONN) {\n      this.SOCKET_CONN.disconnect();\n      this.SOCKET_CONN = null;\n    }\n  }\n\n  private getSocketConnection(): Socket {\n    if (this.SOCKET_CONN) return this.SOCKET_CONN;\n    const localSocketConnection = io(this.options.serverUrl, {\n      transports: [\"websocket\", \"polling\"], // use WebSocket first, if available\n      withCredentials: true,\n      reconnectionDelayMax: 10000,\n      reconnectionAttempts: 10,\n    });\n\n    localSocketConnection.on(\"connect_error\", (err) => {\n      // revert to classic upgrade\n      localSocketConnection.io.opts.transports = [\"polling\", \"websocket\"];\n      log.error(\"connect error\", err);\n    });\n    localSocketConnection.on(\"connect\", async () => {\n      const { engine } = localSocketConnection.io;\n      log.debug(\"initially connected to\", engine.transport.name); // in most cases, prints \"polling\"\n      engine.once(\"upgrade\", () => {\n        // called when the transport is upgraded (i.e. from HTTP long-polling to WebSocket)\n        log.debug(\"upgraded\", engine.transport.name); // in most cases, prints \"websocket\"\n      });\n      engine.once(\"close\", (reason) => {\n        // called when the underlying connection is closed\n        log.debug(\"connection closed\", reason);\n      });\n    });\n\n    localSocketConnection.on(\"error\", (err) => {\n      log.error(\"socket errored\", err);\n      localSocketConnection.disconnect();\n    });\n\n    this.SOCKET_CONN = localSocketConnection;\n    return this.SOCKET_CONN;\n  }\n}\n","import { CustomError } from \"ts-custom-error\";\n\nexport interface IOpenloginError extends CustomError {\n  code: number;\n  message: string;\n  toString(): string;\n}\n\nexport type ErrorCodes = {\n  [key: number]: string;\n};\n\nexport abstract class OpenloginError extends CustomError implements IOpenloginError {\n  code: number;\n\n  message: string;\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(message);\n\n    this.code = code;\n    this.message = message || \"\";\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"OpenloginError\" });\n  }\n\n  toJSON(): IOpenloginError {\n    return {\n      name: this.name,\n      code: this.code,\n      message: this.message,\n    };\n  }\n\n  toString(): string {\n    return JSON.stringify(this.toJSON());\n  }\n}\n\nexport class InitializationError extends OpenloginError {\n  protected static messages: ErrorCodes = {\n    5000: \"Custom\",\n    5001: \"Invalid constructor params\",\n    5002: \"SDK not initialized. please call init first\",\n  };\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(code, message);\n\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"InitializationError\" });\n  }\n\n  public static fromCode(code: number, extraMessage = \"\"): OpenloginError {\n    return new InitializationError(code, `${InitializationError.messages[code]}, ${extraMessage}`);\n  }\n\n  public static invalidParams(extraMessage = \"\"): OpenloginError {\n    return InitializationError.fromCode(5001, extraMessage);\n  }\n\n  public static notInitialized(extraMessage = \"\"): OpenloginError {\n    return InitializationError.fromCode(5002, extraMessage);\n  }\n}\n\n/**\n * login errors\n */\n\nexport class LoginError extends OpenloginError {\n  protected static messages: ErrorCodes = {\n    5000: \"Custom\",\n    5111: \"Invalid login params\",\n    5112: \"User not logged in.\",\n    5113: \"login popup has been closed by the user\",\n    5114: \"Login failed\",\n    5115: \"Popup was blocked. Please call this function as soon as user clicks button or use redirect mode\",\n  };\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(code, message);\n\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"LoginError\" });\n  }\n\n  public static fromCode(code: number, extraMessage = \"\"): OpenloginError {\n    return new LoginError(code, `${LoginError.messages[code]}, ${extraMessage}`);\n  }\n\n  public static invalidLoginParams(extraMessage = \"\"): OpenloginError {\n    return LoginError.fromCode(5111, extraMessage);\n  }\n\n  public static userNotLoggedIn(extraMessage = \"\"): OpenloginError {\n    return LoginError.fromCode(5112, extraMessage);\n  }\n\n  public static popupClosed(extraMessage = \"\"): OpenloginError {\n    return LoginError.fromCode(5113, extraMessage);\n  }\n\n  public static loginFailed(extraMessage = \"\"): OpenloginError {\n    return LoginError.fromCode(5114, extraMessage);\n  }\n\n  public static popupBlocked(extraMessage = \"\"): OpenloginError {\n    return LoginError.fromCode(5115, extraMessage);\n  }\n}\n","import { getLogger } from \"loglevel\";\n\nexport const loglevel = getLogger(\"openlogin\");\n\nloglevel.setLevel(\"error\");\n","import { SecurePubSub } from \"@toruslabs/secure-pub-sub\";\nimport { EventEmitter } from \"events\";\n\nimport { LoginError } from \"./errors\";\nimport { getPopupFeatures } from \"./utils\";\n\nexport interface PopupResponse {\n  sessionId?: string;\n  sessionNamespace?: string;\n  state?: string;\n  error?: string;\n}\nclass PopupHandler extends EventEmitter {\n  url: string;\n\n  target: string;\n\n  features: string;\n\n  window: Window;\n\n  windowTimer: number;\n\n  iClosedWindow: boolean;\n\n  timeout: number;\n\n  constructor({ url, target, features, timeout = 30000 }: { url: string; target?: string; features?: string; timeout?: number }) {\n    super();\n    this.url = url;\n    this.target = target || \"_blank\";\n    this.features = features || getPopupFeatures();\n    this.window = undefined;\n    this.windowTimer = undefined;\n    this.iClosedWindow = false;\n    this.timeout = timeout;\n    this._setupTimer();\n  }\n\n  _setupTimer(): void {\n    this.windowTimer = Number(\n      setInterval(() => {\n        if (this.window && this.window.closed) {\n          clearInterval(this.windowTimer);\n          setTimeout(() => {\n            if (!this.iClosedWindow) {\n              this.emit(\"close\");\n            }\n            this.iClosedWindow = false;\n            this.window = undefined;\n          }, this.timeout);\n        }\n        if (this.window === undefined) clearInterval(this.windowTimer);\n      }, 500)\n    );\n  }\n\n  open(): void {\n    this.window = window.open(this.url, this.target, this.features);\n    if (!this.window) throw LoginError.popupBlocked();\n    if (this.window?.focus) this.window.focus();\n  }\n\n  close(): void {\n    this.iClosedWindow = true;\n    if (this.window) this.window.close();\n  }\n\n  redirect(locationReplaceOnRedirect: boolean): void {\n    if (locationReplaceOnRedirect) {\n      window.location.replace(this.url);\n    } else {\n      window.location.href = this.url;\n    }\n  }\n\n  async listenOnChannel(loginId: string): Promise<PopupResponse> {\n    const securePubSub = new SecurePubSub();\n    const data = await securePubSub.subscribe(loginId);\n    this.close();\n    securePubSub.cleanup();\n    const parsedData = JSON.parse(data) as { error?: string; state?: string; data?: { sessionId?: string; sessionNamespace?: string } };\n    if (parsedData.error) {\n      return { error: parsedData.error, state: parsedData.state };\n    }\n    return parsedData.data;\n  }\n}\n\nexport default PopupHandler;\n","import { OpenloginSessionManager } from \"@toruslabs/openlogin-session-manager\";\nimport {\n  BaseLoginParams,\n  BaseRedirectParams,\n  BrowserStorage,\n  BUILD_ENV,\n  jsonToBase64,\n  LoginParams,\n  OPENLOGIN_ACTIONS,\n  OPENLOGIN_NETWORK,\n  OpenLoginOptions,\n  OpenloginSessionConfig,\n  OpenloginSessionData,\n  OpenloginUserInfo,\n  SocialMfaModParams,\n  TORUS_LEGACY_NETWORK,\n  type TORUS_LEGACY_NETWORK_TYPE,\n  UX_MODE,\n} from \"@toruslabs/openlogin-utils\";\n\nimport { InitializationError, LoginError } from \"./errors\";\nimport { loglevel as log } from \"./logger\";\nimport PopupHandler, { PopupResponse } from \"./PopupHandler\";\nimport { constructURL, getHashQueryParams, getTimeout, version } from \"./utils\";\n\nclass OpenLogin {\n  state: OpenloginSessionData = {};\n\n  options: OpenLoginOptions;\n\n  private sessionManager: OpenloginSessionManager<OpenloginSessionData>;\n\n  private currentStorage: BrowserStorage;\n\n  private _storageBaseKey = \"openlogin_store\";\n\n  private dappState: string;\n\n  private addVersionInUrls = true;\n\n  constructor(options: OpenLoginOptions) {\n    if (!options.clientId) throw InitializationError.invalidParams(\"clientId is required\");\n    if (!options.network) options.network = OPENLOGIN_NETWORK.SAPPHIRE_MAINNET;\n    if (!options.buildEnv) options.buildEnv = BUILD_ENV.PRODUCTION;\n    if (options.buildEnv === BUILD_ENV.DEVELOPMENT || options.buildEnv === BUILD_ENV.TESTING || options.sdkUrl) this.addVersionInUrls = false;\n    if (!options.sdkUrl && !options.useMpc) {\n      if (options.buildEnv === BUILD_ENV.DEVELOPMENT) {\n        options.sdkUrl = \"http://localhost:3000\";\n      } else if (options.buildEnv === BUILD_ENV.STAGING) {\n        options.sdkUrl = \"https://staging-auth.web3auth.io\";\n      } else if (options.buildEnv === BUILD_ENV.TESTING) {\n        options.sdkUrl = \"https://develop-auth.web3auth.io\";\n      } else {\n        options.sdkUrl = \"https://auth.web3auth.io\";\n      }\n    }\n\n    if (options.useMpc && !options.sdkUrl) {\n      if (Object.values(TORUS_LEGACY_NETWORK).includes(options.network as TORUS_LEGACY_NETWORK_TYPE))\n        throw new Error(\"MPC is not supported on legacy networks\");\n      if (options.buildEnv === BUILD_ENV.DEVELOPMENT) {\n        options.sdkUrl = \"http://localhost:3000\";\n      } else if (options.buildEnv === BUILD_ENV.STAGING) {\n        options.sdkUrl = \"https://staging-mpc-auth.web3auth.io\";\n      } else if (options.buildEnv === BUILD_ENV.TESTING) {\n        options.sdkUrl = \"https://develop-mpc-auth.web3auth.io\";\n      } else {\n        options.sdkUrl = \"https://mpc-auth.web3auth.io\";\n      }\n    }\n\n    if (!options.redirectUrl && typeof window !== \"undefined\") {\n      options.redirectUrl = `${window.location.protocol}//${window.location.host}${window.location.pathname}`;\n    }\n    if (!options.uxMode) options.uxMode = UX_MODE.REDIRECT;\n    if (typeof options.replaceUrlOnRedirect !== \"boolean\") options.replaceUrlOnRedirect = true;\n    if (!options.originData) options.originData = {};\n    if (!options.whiteLabel) options.whiteLabel = {};\n    if (!options.loginConfig) options.loginConfig = {};\n    if (!options.mfaSettings) options.mfaSettings = {};\n    if (!options.storageServerUrl) options.storageServerUrl = \"https://broadcast-server.tor.us\";\n    if (!options.storageKey) options.storageKey = \"local\";\n    if (!options.webauthnTransports) options.webauthnTransports = [\"internal\"];\n    if (!options.sessionTime) options.sessionTime = 86400;\n\n    this.options = options;\n  }\n\n  get privKey(): string {\n    if (this.options.useMpc) return this.state.factorKey || \"\";\n    return this.state.privKey ? this.state.privKey.padStart(64, \"0\") : \"\";\n  }\n\n  get coreKitKey(): string {\n    return this.state.coreKitKey ? this.state.coreKitKey.padStart(64, \"0\") : \"\";\n  }\n\n  get ed25519PrivKey(): string {\n    return this.state.ed25519PrivKey ? this.state.ed25519PrivKey.padStart(128, \"0\") : \"\";\n  }\n\n  get coreKitEd25519Key(): string {\n    return this.state.coreKitEd25519PrivKey ? this.state.coreKitEd25519PrivKey.padStart(128, \"0\") : \"\";\n  }\n\n  get sessionId(): string {\n    return this.state.sessionId || \"\";\n  }\n\n  get sessionNamespace(): string {\n    return this.options.sessionNamespace || \"\";\n  }\n\n  get appState(): string {\n    return this.state.userInfo.appState || this.dappState || \"\";\n  }\n\n  private get baseUrl(): string {\n    // testing and develop don't have versioning\n    if (!this.addVersionInUrls) return `${this.options.sdkUrl}`;\n    return `${this.options.sdkUrl}/v${version.split(\".\")[0]}`;\n  }\n\n  async init(): Promise<void> {\n    // get sessionNamespace from the redirect result.\n    const params = getHashQueryParams(this.options.replaceUrlOnRedirect);\n    if (params.sessionNamespace) this.options.sessionNamespace = params.sessionNamespace;\n\n    const storageKey = this.options.sessionNamespace ? `${this._storageBaseKey}_${this.options.sessionNamespace}` : this._storageBaseKey;\n    this.currentStorage = BrowserStorage.getInstance(storageKey, this.options.storageKey);\n\n    const sessionId = this.currentStorage.get<string>(\"sessionId\");\n\n    this.sessionManager = new OpenloginSessionManager({\n      sessionServerBaseUrl: this.options.storageServerUrl,\n      sessionNamespace: this.options.sessionNamespace,\n      sessionTime: this.options.sessionTime,\n      sessionId,\n    });\n\n    if (this.options.network === OPENLOGIN_NETWORK.TESTNET || this.options.network === OPENLOGIN_NETWORK.SAPPHIRE_DEVNET) {\n      // using console log because it shouldn't be affected by loglevel config\n      // eslint-disable-next-line no-console\n      console.log(\n        `%c WARNING! You are on ${this.options.network}. Please set network: 'mainnet' or 'sapphire_mainnet' in production`,\n        \"color: #FF0000\"\n      );\n    }\n\n    if (this.options.buildEnv !== BUILD_ENV.PRODUCTION) {\n      // using console log because it shouldn't be affected by loglevel config\n      // eslint-disable-next-line no-console\n      console.log(`%c WARNING! You are using build env ${this.options.buildEnv}. Please set buildEnv: 'production' in production`, \"color: #FF0000\");\n    }\n\n    if (params.error) {\n      this.dappState = params.state;\n      throw LoginError.loginFailed(params.error);\n    }\n\n    if (params.sessionId) {\n      this.currentStorage.set(\"sessionId\", params.sessionId);\n      this.sessionManager.sessionId = params.sessionId;\n    }\n\n    if (this.sessionManager.sessionId) {\n      const data = await this._authorizeSession();\n      // Fill state with correct info from session\n      // If session is invalid all the data is unset here.\n      this.updateState(data);\n      if (Object.keys(data).length === 0) {\n        // If session is invalid, unset the sessionId from localStorage.\n        this.currentStorage.set(\"sessionId\", \"\");\n      }\n    }\n  }\n\n  async login(params: LoginParams & Partial<BaseRedirectParams>): Promise<{ privKey: string } | null> {\n    if (!params.loginProvider) throw LoginError.invalidLoginParams(`loginProvider is required`);\n\n    // in case of redirect mode, redirect url will be dapp specified\n    // in case of popup mode, redirect url will be sdk specified\n    const defaultParams: BaseRedirectParams = {\n      redirectUrl: this.options.redirectUrl,\n    };\n\n    const loginParams: LoginParams = {\n      loginProvider: params.loginProvider,\n      ...defaultParams,\n      ...params,\n    };\n\n    const dataObject: OpenloginSessionConfig = {\n      actionType: OPENLOGIN_ACTIONS.LOGIN,\n      options: this.options,\n      params: loginParams,\n    };\n\n    const result = await this.openloginHandler(`${this.baseUrl}/start`, dataObject, getTimeout(params.loginProvider));\n    if (this.options.uxMode === UX_MODE.REDIRECT) return null;\n    if (result.error) {\n      this.dappState = result.state;\n      throw LoginError.loginFailed(result.error);\n    }\n    this.sessionManager.sessionId = result.sessionId;\n    this.options.sessionNamespace = result.sessionNamespace;\n    this.currentStorage.set(\"sessionId\", result.sessionId);\n    await this.rehydrateSession();\n    return { privKey: this.privKey };\n  }\n\n  async logout(): Promise<void> {\n    if (!this.sessionManager.sessionId) throw LoginError.userNotLoggedIn();\n    await this.sessionManager.invalidateSession();\n    this.updateState({\n      privKey: \"\",\n      coreKitKey: \"\",\n      coreKitEd25519PrivKey: \"\",\n      ed25519PrivKey: \"\",\n      walletKey: \"\",\n      oAuthPrivateKey: \"\",\n      tKey: \"\",\n      metadataNonce: \"\",\n      keyMode: undefined,\n      userInfo: {\n        name: \"\",\n        profileImage: \"\",\n        dappShare: \"\",\n        idToken: \"\",\n        oAuthIdToken: \"\",\n        oAuthAccessToken: \"\",\n        appState: \"\",\n        email: \"\",\n        verifier: \"\",\n        verifierId: \"\",\n        aggregateVerifier: \"\",\n        typeOfLogin: \"\",\n        isMfaEnabled: false,\n      },\n      authToken: \"\",\n      sessionId: \"\",\n      factorKey: \"\",\n      signatures: [],\n      tssShareIndex: -1,\n      tssPubKey: \"\",\n      tssShare: \"\",\n      tssNonce: -1,\n    });\n\n    this.currentStorage.set(\"sessionId\", \"\");\n  }\n\n  async setupMFA(params: Partial<BaseRedirectParams>): Promise<boolean> {\n    if (!this.sessionId) throw LoginError.userNotLoggedIn();\n\n    // in case of redirect mode, redirect url will be dapp specified\n    // in case of popup mode, redirect url will be sdk specified\n    const defaultParams: BaseRedirectParams = {\n      redirectUrl: this.options.redirectUrl,\n    };\n\n    const dataObject: OpenloginSessionConfig = {\n      actionType: OPENLOGIN_ACTIONS.ENABLE_MFA,\n      options: this.options,\n      params: {\n        ...defaultParams,\n        ...params,\n      },\n      sessionId: this.sessionId,\n    };\n\n    const result = await this.openloginHandler(`${this.baseUrl}/start`, dataObject);\n    if (this.options.uxMode === UX_MODE.REDIRECT) return undefined;\n    this.sessionManager.sessionId = result.sessionId;\n    this.options.sessionNamespace = result.sessionNamespace;\n    this.currentStorage.set(\"sessionId\", result.sessionId);\n    await this.rehydrateSession();\n    return true;\n  }\n\n  async changeSocialFactor(params: SocialMfaModParams & Partial<BaseRedirectParams>): Promise<boolean> {\n    if (!this.sessionId) throw LoginError.userNotLoggedIn();\n\n    // in case of redirect mode, redirect url will be dapp specified\n    // in case of popup mode, redirect url will be sdk specified\n    const defaultParams: BaseRedirectParams = {\n      redirectUrl: this.options.redirectUrl,\n    };\n\n    const dataObject: OpenloginSessionConfig = {\n      actionType: OPENLOGIN_ACTIONS.MODIFY_MFA,\n      options: this.options,\n      params: {\n        ...defaultParams,\n        ...params,\n      },\n      sessionId: this.sessionId,\n    };\n\n    const result = await this.openloginHandler(`${this.baseUrl}/start`, dataObject);\n    if (this.options.uxMode === UX_MODE.REDIRECT) return undefined;\n    this.sessionManager.sessionId = result.sessionId;\n    this.options.sessionNamespace = result.sessionNamespace;\n    this.currentStorage.set(\"sessionId\", result.sessionId);\n    await this.rehydrateSession();\n    return true;\n  }\n\n  getUserInfo(): OpenloginUserInfo {\n    if (!this.sessionManager.sessionId) {\n      throw LoginError.userNotLoggedIn();\n    }\n    return this.state.userInfo;\n  }\n\n  async getLoginId(data: OpenloginSessionConfig): Promise<string> {\n    if (!this.sessionManager) throw InitializationError.notInitialized();\n\n    const loginId = OpenloginSessionManager.generateRandomSessionKey();\n    const loginSessionMgr = new OpenloginSessionManager<OpenloginSessionConfig>({\n      sessionServerBaseUrl: this.options.storageServerUrl,\n      sessionNamespace: this.options.sessionNamespace,\n      sessionTime: 600, // each login key must be used with 10 mins (might be used at the end of popup redirect)\n      sessionId: loginId,\n    });\n\n    await loginSessionMgr.createSession(JSON.parse(JSON.stringify(data)));\n\n    return loginId;\n  }\n\n  private async _authorizeSession(): Promise<OpenloginSessionData> {\n    try {\n      if (!this.sessionManager.sessionId) return {};\n      const result = await this.sessionManager.authorizeSession();\n      return result;\n    } catch (err) {\n      log.error(\"authorization failed\", err);\n      return {};\n    }\n  }\n\n  private updateState(data: Partial<OpenloginSessionData>) {\n    this.state = { ...this.state, ...data };\n  }\n\n  private async rehydrateSession(): Promise<void> {\n    const result = await this._authorizeSession();\n    this.updateState(result);\n  }\n\n  private async openloginHandler(url: string, dataObject: OpenloginSessionConfig, popupTimeout = 1000 * 10): Promise<PopupResponse | undefined> {\n    const loginId = await this.getLoginId(dataObject);\n    const configParams: BaseLoginParams = {\n      loginId,\n      sessionNamespace: this.options.sessionNamespace,\n    };\n\n    if (this.options.uxMode === UX_MODE.REDIRECT) {\n      const loginUrl = constructURL({\n        baseURL: url,\n        hash: { b64Params: jsonToBase64(configParams) },\n      });\n      window.location.href = loginUrl;\n      return undefined;\n    }\n    return new Promise((resolve, reject) => {\n      const loginUrl = constructURL({\n        baseURL: url,\n        hash: { b64Params: jsonToBase64(configParams) },\n      });\n      const currentWindow = new PopupHandler({ url: loginUrl, timeout: popupTimeout });\n\n      currentWindow.on(\"close\", () => {\n        reject(LoginError.popupClosed());\n      });\n\n      currentWindow.listenOnChannel(loginId).then(resolve).catch(reject);\n\n      try {\n        currentWindow.open();\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n}\n\nexport default OpenLogin;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventEmitter } from \"events\";\n\ntype Handler = (...args: any[]) => void;\ninterface EventMap {\n  [k: string]: Handler | Handler[] | undefined;\n}\n\nfunction safeApply<T, A extends any[]>(handler: (this: T, ...handlerArgs: A) => void, context: T, args: A): void {\n  try {\n    Reflect.apply(handler, context, args);\n  } catch (err) {\n    // Throw error after timeout so as not to interrupt the stack\n    setTimeout(() => {\n      throw err;\n    });\n  }\n}\n\nfunction arrayClone<T>(arr: T[]): T[] {\n  const n = arr.length;\n  const copy = new Array(n);\n  for (let i = 0; i < n; i += 1) {\n    copy[i] = arr[i];\n  }\n  return copy;\n}\n\nexport default class SafeEventEmitter extends EventEmitter {\n  emit(type: string, ...args: any[]): boolean {\n    let doError = type === \"error\";\n\n    const events: EventMap = (this as any)._events;\n    if (events !== undefined) {\n      doError = doError && events.error === undefined;\n    } else if (!doError) {\n      return false;\n    }\n\n    // If there is no 'error' event listener then throw.\n    if (doError) {\n      let er;\n      if (args.length > 0) {\n        [er] = args;\n      }\n      if (er instanceof Error) {\n        // Note: The comments on the `throw` lines are intentional, they show\n        // up in Node's output if this results in an unhandled exception.\n        throw er; // Unhandled 'error' event\n      }\n      // At least give some kind of context to the user\n      const err = new Error(`Unhandled error.${er ? ` (${er.message})` : \"\"}`);\n      (err as any).context = er;\n      throw err; // Unhandled 'error' event\n    }\n\n    const handler = events[type];\n\n    if (handler === undefined) {\n      return false;\n    }\n\n    if (typeof handler === \"function\") {\n      safeApply(handler, this, args);\n    } else {\n      const len = handler.length;\n      const listeners = arrayClone(handler);\n      for (let i = 0; i < len; i += 1) {\n        safeApply(listeners[i], this, args);\n      }\n    }\n\n    return true;\n  }\n}\n","import eos from \"end-of-stream\";\nimport once from \"once\";\nimport pump from \"pump\";\nimport { Duplex } from \"readable-stream\";\nimport type { Readable, Writable } from \"stream\";\n\nimport { BufferEncoding } from \"./interfaces\";\nimport Substream from \"./substream\";\n\nexport const IGNORE_SUBSTREAM = Symbol(\"IGNORE_SUBSTREAM\");\n\nexport type Stream = Readable | Writable;\n\ninterface Chunk {\n  name: string;\n  data: unknown;\n}\n\nexport class ObjectMultiplex extends Duplex {\n  public _substreams: Record<string, Substream | typeof IGNORE_SUBSTREAM>;\n\n  getStream: (name: string) => Substream | symbol;\n\n  constructor(opts: Record<string, unknown> = {}) {\n    super({\n      ...opts,\n      objectMode: true,\n    });\n    this._substreams = {};\n  }\n\n  createStream(name: string): Substream {\n    // validate name\n    if (!name) {\n      throw new Error(\"ObjectMultiplex - name must not be empty\");\n    }\n\n    if (this._substreams[name]) {\n      throw new Error(`ObjectMultiplex - Substream for name \"${name}\" already exists`);\n    }\n\n    // create substream\n    const substream = new Substream({ parent: this, name });\n    this._substreams[name] = substream;\n\n    // listen for parent stream to end\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    anyStreamEnd(this, (_error?: Error | null) => substream.destroy(_error || undefined));\n\n    return substream;\n  }\n\n  // ignore streams (dont display orphaned data warning)\n  ignoreStream(name: string): void {\n    // validate name\n    if (!name) {\n      throw new Error(\"ObjectMultiplex - name must not be empty\");\n    }\n    if (this._substreams[name]) {\n      throw new Error(`ObjectMultiplex - Substream for name \"${name}\" already exists`);\n    }\n    // set\n    this._substreams[name] = IGNORE_SUBSTREAM;\n  }\n\n  _read(): void {\n    return undefined;\n  }\n\n  _write(chunk: Chunk, _encoding: BufferEncoding, callback: (error?: Error | null) => void): void {\n    const { name, data } = chunk;\n\n    if (!name) {\n      window.console.warn(`ObjectMultiplex - malformed chunk without name \"${chunk}\"`);\n      return callback();\n    }\n\n    // get corresponding substream\n    const substream = this._substreams[name];\n    if (!substream) {\n      window.console.warn(`ObjectMultiplex - orphaned data for stream \"${name}\"`);\n      return callback();\n    }\n\n    // push data into substream\n    if (substream !== IGNORE_SUBSTREAM) {\n      substream.push(data);\n    }\n\n    return callback();\n  }\n}\n\n// util\nfunction anyStreamEnd(stream: ObjectMultiplex, _cb: (error?: Error | null) => void) {\n  const cb = once(_cb);\n  eos(stream as unknown as Stream, { readable: false }, cb);\n  eos(stream as unknown as Stream, { writable: false }, cb);\n}\n\nexport function setupMultiplex(stream: Duplex): ObjectMultiplex {\n  const mux = new ObjectMultiplex();\n  mux.getStream = function streamHelper(name: string) {\n    if (this._substreams[name]) {\n      return this._substreams[name];\n    }\n    return this.createStream(name);\n  };\n\n  pump(stream as unknown as Stream, mux as unknown as Stream, stream as unknown as Stream, (err) => {\n    if (err) window.console.error(err);\n  });\n  return mux;\n}\n","export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n","export const CHAIN_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  OTHER: \"other\",\n} as const;\n// eip155 for all evm chains\nexport type ChainNamespaceType = (typeof CHAIN_NAMESPACES)[keyof typeof CHAIN_NAMESPACES];\n\nexport const ADAPTER_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  XRPL: \"xrpl\",\n  MULTICHAIN: \"multichain\",\n} as const;\n// eip155 for all evm chains\nexport type AdapterNamespaceType = (typeof ADAPTER_NAMESPACES)[keyof typeof ADAPTER_NAMESPACES];\n\nexport type CustomChainConfig = {\n  chainNamespace: ChainNamespaceType;\n  /**\n   * The chain id of the chain\n   */\n  chainId: string;\n  /**\n   * RPC target Url for the chain\n   */\n  rpcTarget: string;\n\n  /**\n   * web socket target Url for the chain\n   */\n  wsTarget?: string;\n\n  /**\n   * Display Name for the chain\n   */\n  displayName: string;\n  /**\n   * Url of the block explorer\n   */\n  blockExplorer: string;\n  /**\n   * Default currency ticker of the network (e.g: ETH)\n   */\n  ticker: string;\n  /**\n   * Name for currency ticker (e.g: `Ethereum`)\n   */\n  tickerName: string;\n  /**\n   * Number of decimals for the currency ticker (e.g: 18)\n   */\n  decimals?: number;\n};\n","import { CHAIN_NAMESPACES, ChainNamespaceType, CustomChainConfig } from \"./IChainInterface\";\nconst getDefaultNetworkId = (chainNamespace: ChainNamespaceType): number => {\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return 1;\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return 1;\n  }\n  throw new Error(`Chain namespace ${chainNamespace} is not supported`);\n};\n\nexport const getEvmChainConfig = (chainId: number): CustomChainConfig | null => {\n  const chainNamespace = CHAIN_NAMESPACES.EIP155;\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: `https://rpc.ankr.com/eth`,\n      displayName: \"Ethereum Mainnet\",\n      blockExplorer: \"https://etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\",\n      decimals: 18,\n    };\n  }\n  if (chainId === 5) {\n    return {\n      chainNamespace,\n      chainId: \"0x5\",\n      rpcTarget: `https://rpc.ankr.com/eth_goerli`,\n      displayName: \"Goerli Testnet\",\n      blockExplorer: \"https://goerli.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\",\n      decimals: 18,\n    };\n  }\n  if (chainId === 11155111) {\n    return {\n      chainNamespace,\n      chainId: \"0xaa36a7\",\n      rpcTarget: `https://rpc.ankr.com/eth_sepolia`,\n      displayName: \"Sepolia Testnet\",\n      blockExplorer: \"https://sepolia.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\",\n      decimals: 18,\n    };\n  }\n  if (chainId === 137) {\n    return {\n      chainNamespace,\n      chainId: \"0x89\",\n      rpcTarget: \"https://rpc.ankr.com/polygon\",\n      displayName: \"Polygon Mainnet\",\n      blockExplorer: \"https://polygonscan.com\",\n      ticker: \"MATIC\",\n      tickerName: \"Polygon\",\n    };\n  }\n  if (chainId === 80001) {\n    return {\n      chainNamespace,\n      chainId: \"0x13881\",\n      rpcTarget: \"https://rpc.ankr.com/polygon_mumbai\",\n      displayName: \"Polygon Mumbai Testnet\",\n      blockExplorer: \"https://mumbai.polygonscan.com/\",\n      ticker: \"MATIC\",\n      tickerName: \"Polygon\",\n      decimals: 18,\n    };\n  }\n  if (chainId === 56) {\n    return {\n      chainNamespace,\n      chainId: \"0x38\",\n      rpcTarget: \"https://rpc.ankr.com/bsc\",\n      displayName: \"Binance SmartChain Mainnet\",\n      blockExplorer: \"https://bscscan.com\",\n      ticker: \"BNB\",\n      tickerName: \"Binance SmartChain\",\n      decimals: 18,\n    };\n  }\n  if (chainId === 97) {\n    return {\n      chainNamespace,\n      chainId: \"0x61\",\n      rpcTarget: \"https://rpc.ankr.com/bsc_testnet_chapel\",\n      displayName: \"Binance SmartChain Testnet\",\n      blockExplorer: \"https://testnet.bscscan.com\",\n      ticker: \"BNB\",\n      tickerName: \"Binance SmartChain\",\n      decimals: 18,\n    };\n  }\n  if (chainId === 25) {\n    return {\n      chainNamespace,\n      chainId: \"0x19\",\n      rpcTarget: \"https://rpc.cronos.org\",\n      displayName: \"Cronos Mainnet\",\n      blockExplorer: \"https://cronoscan.com/\",\n      ticker: \"CRO\",\n      tickerName: \"Cronos\",\n    };\n  }\n  if (chainId === 338) {\n    return {\n      chainNamespace,\n      chainId: \"0x152\",\n      rpcTarget: \"https://rpc-t3.cronos.org/\",\n      displayName: \"Cronos Testnet\",\n      blockExplorer: \"https://cronoscan.com/\",\n      ticker: \"CRO\",\n      tickerName: \"Cronos\",\n      decimals: 18,\n    };\n  }\n  if (chainId === 8217) {\n    return {\n      chainNamespace,\n      chainId: \"0x2019\",\n      rpcTarget: \"https://public-node-api.klaytnapi.com/v1/cypress\",\n      displayName: \"Klaytn Mainnet\",\n      blockExplorer: \"https://scope.klaytn.com\",\n      ticker: \"KLAY\",\n      tickerName: \"Klaytn\",\n      decimals: 18,\n    };\n  }\n\n  return null;\n};\n\nexport const getSolanaChainConfig = (chainId: number): CustomChainConfig | null => {\n  const chainNamespace = CHAIN_NAMESPACES.SOLANA;\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: \"https://rpc.ankr.com/solana\",\n      displayName: \"Solana Mainnet\",\n      blockExplorer: \"https://explorer.solana.com\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\",\n      decimals: 9,\n    };\n  } else if (chainId === 2) {\n    return {\n      chainNamespace,\n      chainId: \"0x2\",\n      rpcTarget: \"https://api.testnet.solana.com\",\n      displayName: \"Solana Testnet\",\n      blockExplorer: \"https://explorer.solana.com?cluster=testnet\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\",\n      decimals: 9,\n    };\n  } else if (chainId === 3) {\n    return {\n      chainNamespace,\n      chainId: \"0x3\",\n      rpcTarget: \"https://api.devnet.solana.com\",\n      displayName: \"Solana Devnet\",\n      blockExplorer: \"https://explorer.solana.com?cluster=devnet\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\",\n      decimals: 9,\n    };\n  }\n\n  return null;\n};\n\nexport const getChainConfig = (chainNamespace: ChainNamespaceType, chainId?: number | string): CustomChainConfig | null => {\n  if (chainNamespace === CHAIN_NAMESPACES.OTHER) return null;\n  const finalChainId = chainId ? (typeof chainId === \"number\" ? chainId : parseInt(chainId, 16)) : getDefaultNetworkId(chainNamespace);\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return getEvmChainConfig(finalChainId);\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return getSolanaChainConfig(finalChainId);\n  }\n  return null;\n};\n","import { CustomError } from \"ts-custom-error\";\n\n// @flow\nexport interface IWeb3AuthError extends CustomError {\n  code: number;\n  message: string;\n  toString(): string;\n}\n\nexport type ErrorCodes = {\n  [key: number]: string;\n};\n\nexport abstract class Web3AuthError extends CustomError implements IWeb3AuthError {\n  code: number;\n\n  message: string;\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(message);\n\n    this.code = code;\n    this.message = message || \"\";\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"Web3AuthError\" });\n  }\n\n  toJSON(): IWeb3AuthError {\n    return {\n      name: this.name,\n      code: this.code,\n      message: this.message,\n    };\n  }\n\n  toString(): string {\n    return JSON.stringify(this.toJSON());\n  }\n}\n\nexport class WalletInitializationError extends Web3AuthError {\n  protected static messages: ErrorCodes = {\n    5000: \"Custom\",\n    5001: \"Wallet is not found\",\n    5002: \"Wallet is not installed\",\n    5003: \"Wallet is not ready yet\",\n    5004: \"Wallet window is blocked\",\n    5005: \"Wallet window has been closed by the user\",\n    5006: \"Incompatible chain namespace provided\",\n    5007: \"Adapter has already been included\",\n    5008: \"Invalid provider Config\",\n    5009: \"Provider is not ready yet\",\n    5010: \"Failed to connect with rpc url\",\n    5011: \"Invalid params passed in\",\n    5013: \"Invalid network provided\",\n  };\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(code, message);\n\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"WalletInitializationError\" });\n  }\n\n  public static fromCode(code: number, extraMessage = \"\"): IWeb3AuthError {\n    return new WalletInitializationError(code, `${WalletInitializationError.messages[code]}, ${extraMessage}`);\n  }\n\n  // Custom methods\n  public static notFound(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5001, extraMessage);\n  }\n\n  public static notInstalled(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5002, extraMessage);\n  }\n\n  public static notReady(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5003, extraMessage);\n  }\n\n  public static windowBlocked(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5004, extraMessage);\n  }\n\n  public static windowClosed(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5005, extraMessage);\n  }\n\n  public static incompatibleChainNameSpace(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5006, extraMessage);\n  }\n\n  public static duplicateAdapterError(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5007, extraMessage);\n  }\n\n  public static invalidProviderConfigError(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5008, extraMessage);\n  }\n\n  public static providerNotReadyError(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5009, extraMessage);\n  }\n\n  public static rpcConnectionError(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5010, extraMessage);\n  }\n\n  public static invalidParams(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5011, extraMessage);\n  }\n\n  public static invalidNetwork(extraMessage = \"\"): IWeb3AuthError {\n    return WalletInitializationError.fromCode(5013, extraMessage);\n  }\n}\n\n/**\n * wallet login errors\n */\n\nexport class WalletLoginError extends Web3AuthError {\n  protected static messages: ErrorCodes = {\n    5000: \"Custom\",\n    5111: \"Failed to connect with wallet\",\n    5112: \"Failed to disconnect from wallet\",\n    5113: \"Wallet is not connected\",\n    5114: \"Wallet popup has been closed by the user\",\n    5115: \"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa\",\n    5116: \"Chain config has not been added. Please add the chain config before calling switchChain\",\n    5117: \"Unsupported operation\",\n    5118: \"useCoreKitKey flag is enabled but coreKitKey is not available\",\n    5119: \"User not logged in.\",\n  };\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(code, message);\n\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"WalletLoginError\" });\n  }\n\n  public static fromCode(code: number, extraMessage = \"\"): IWeb3AuthError {\n    return new WalletLoginError(code, `${WalletLoginError.messages[code]}. ${extraMessage}`);\n  }\n\n  public static connectionError(extraMessage = \"\"): IWeb3AuthError {\n    return WalletLoginError.fromCode(5111, extraMessage);\n  }\n\n  public static disconnectionError(extraMessage = \"\"): IWeb3AuthError {\n    return WalletLoginError.fromCode(5112, extraMessage);\n  }\n\n  public static notConnectedError(extraMessage = \"\"): IWeb3AuthError {\n    return WalletLoginError.fromCode(5113, extraMessage);\n  }\n\n  public static popupClosed(extraMessage = \"\"): IWeb3AuthError {\n    return WalletLoginError.fromCode(5114, extraMessage);\n  }\n\n  public static mfaEnabled(extraMessage = \"\"): IWeb3AuthError {\n    return WalletLoginError.fromCode(5115, extraMessage);\n  }\n\n  public static chainConfigNotAdded(extraMessage = \"\"): IWeb3AuthError {\n    return WalletLoginError.fromCode(5116, extraMessage);\n  }\n\n  public static unsupportedOperation(extraMessage = \"\"): IWeb3AuthError {\n    return WalletLoginError.fromCode(5117, extraMessage);\n  }\n\n  public static coreKitKeyNotFound(extraMessage = \"\"): IWeb3AuthError {\n    return WalletLoginError.fromCode(5118, extraMessage);\n  }\n\n  public static userNotLoggedIn(extraMessage = \"\"): IWeb3AuthError {\n    return WalletLoginError.fromCode(5119, extraMessage);\n  }\n}\n\nexport class WalletOperationsError extends Web3AuthError {\n  protected static messages: ErrorCodes = {\n    5000: \"Custom\",\n    5201: \"Provided chainId is not allowed\",\n    5202: \"This operation is not allowed\",\n  };\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(code, message);\n\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"WalletOperationsError\" });\n  }\n\n  public static fromCode(code: number, extraMessage = \"\"): IWeb3AuthError {\n    return new WalletOperationsError(code, `${WalletOperationsError.messages[code]}, ${extraMessage}`);\n  }\n\n  // Custom methods\n  public static chainIDNotAllowed(extraMessage = \"\"): IWeb3AuthError {\n    return WalletOperationsError.fromCode(5201, extraMessage);\n  }\n\n  public static operationNotAllowed(extraMessage = \"\"): IWeb3AuthError {\n    return WalletOperationsError.fromCode(5202, extraMessage);\n  }\n\n  public static chainNamespaceNotAllowed(extraMessage = \"\"): IWeb3AuthError {\n    return WalletOperationsError.fromCode(5203, extraMessage);\n  }\n}\n\nexport class WalletProviderError extends Web3AuthError {\n  protected static messages: ErrorCodes = {\n    5000: \"Custom\",\n    5301: \"Expected a single, non-array, object argument.\",\n    5302: \"'args.method' must be a non-empty string.\",\n    5303: \"'args.params' must be an object or array if provided.\",\n  };\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(code, message);\n\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"WalletProviderError\" });\n  }\n\n  public static fromCode(code: number, extraMessage = \"\"): IWeb3AuthError {\n    return new WalletOperationsError(code, `${WalletProviderError.messages[code]}, ${extraMessage}`);\n  }\n\n  // Custom methods\n  public static invalidRequestArgs(extraMessage = \"\"): IWeb3AuthError {\n    return WalletOperationsError.fromCode(5301, extraMessage);\n  }\n\n  public static invalidRequestMethod(extraMessage = \"\"): IWeb3AuthError {\n    return WalletOperationsError.fromCode(5302, extraMessage);\n  }\n\n  public static invalidRequestParams(extraMessage = \"\"): IWeb3AuthError {\n    return WalletOperationsError.fromCode(5303, extraMessage);\n  }\n}\n","export const MULTI_CHAIN_ADAPTERS = {\n  OPENLOGIN: \"openlogin\",\n  WALLET_CONNECT_V2: \"wallet-connect-v2\",\n};\n\nexport const SOLANA_ADAPTERS = {\n  TORUS_SOLANA: \"torus-solana\",\n  PHANTOM: \"phantom\",\n  SOLFLARE: \"solflare\",\n  SLOPE: \"slope\",\n  ...MULTI_CHAIN_ADAPTERS,\n};\n\nexport const EVM_ADAPTERS = {\n  TORUS_EVM: \"torus-evm\",\n  METAMASK: \"metamask\",\n  COINBASE: \"coinbase\",\n  ...MULTI_CHAIN_ADAPTERS,\n};\n\nexport const WALLET_ADAPTERS = {\n  ...EVM_ADAPTERS,\n  ...SOLANA_ADAPTERS,\n};\nexport type WALLET_ADAPTER_TYPE = (typeof WALLET_ADAPTERS)[keyof typeof WALLET_ADAPTERS];\nexport type SOLANA_ADAPTER_TYPE = (typeof SOLANA_ADAPTERS)[keyof typeof SOLANA_ADAPTERS];\nexport type EVM_ADAPTER_TYPE = (typeof EVM_ADAPTERS)[keyof typeof EVM_ADAPTERS];\nexport type MULTI_CHAIN_ADAPTER_TYPE = (typeof MULTI_CHAIN_ADAPTERS)[keyof typeof MULTI_CHAIN_ADAPTERS];\n\nexport const ADAPTER_NAMES = {\n  [MULTI_CHAIN_ADAPTERS.OPENLOGIN]: \"OpenLogin\",\n  [MULTI_CHAIN_ADAPTERS.WALLET_CONNECT_V2]: \"Wallet Connect v2\",\n  [SOLANA_ADAPTERS.TORUS_SOLANA]: \"Torus\",\n  [SOLANA_ADAPTERS.PHANTOM]: \"Phantom\",\n  [SOLANA_ADAPTERS.SOLFLARE]: \"Solflare\",\n  [SOLANA_ADAPTERS.SLOPE]: \"Slope\",\n  [EVM_ADAPTERS.TORUS_EVM]: \"Torus\",\n  [EVM_ADAPTERS.METAMASK]: \"Metamask\",\n  [EVM_ADAPTERS.COINBASE]: \"Coinbase\",\n};\n","import { JRPCRequest, JRPCResponse, Maybe, RequestArguments, SafeEventEmitter, SendCallBack } from \"@toruslabs/openlogin-jrpc\";\nimport { OPENLOGIN_NETWORK, OPENLOGIN_NETWORK_TYPE, OpenloginUserInfo } from \"@toruslabs/openlogin-utils\";\n\nimport { getChainConfig } from \"../chain/config\";\nimport { AdapterNamespaceType, CHAIN_NAMESPACES, ChainNamespaceType, CustomChainConfig } from \"../chain/IChainInterface\";\nimport { WalletInitializationError, WalletLoginError, WalletOperationsError } from \"../errors\";\nimport { SafeEventEmitterProvider } from \"../provider/IProvider\";\nimport { WALLET_ADAPTERS } from \"../wallet\";\n\nexport type UserInfo = OpenloginUserInfo;\n\nexport type WEB3AUTH_NETWORK_TYPE = OPENLOGIN_NETWORK_TYPE;\nexport const WEB3AUTH_NETWORK = OPENLOGIN_NETWORK;\nexport { OPENLOGIN_NETWORK, type OPENLOGIN_NETWORK_TYPE } from \"@toruslabs/openlogin-utils\";\n\nexport const ADAPTER_CATEGORY = {\n  EXTERNAL: \"external\",\n  IN_APP: \"in_app\",\n} as const;\nexport type ADAPTER_CATEGORY_TYPE = (typeof ADAPTER_CATEGORY)[keyof typeof ADAPTER_CATEGORY];\n\nexport interface AdapterInitOptions {\n  /**\n   * Whether to auto connect to the adapter based on redirect mode or saved adapters\n   */\n  autoConnect?: boolean;\n}\n\nexport const ADAPTER_STATUS = {\n  NOT_READY: \"not_ready\",\n  READY: \"ready\",\n  CONNECTING: \"connecting\",\n  CONNECTED: \"connected\",\n  DISCONNECTED: \"disconnected\",\n  ERRORED: \"errored\",\n} as const;\n\nexport const ADAPTER_EVENTS = {\n  ...ADAPTER_STATUS,\n  ADAPTER_DATA_UPDATED: \"adapter_data_updated\",\n  CACHE_CLEAR: \"cache_clear\",\n} as const;\nexport type ADAPTER_STATUS_TYPE = (typeof ADAPTER_STATUS)[keyof typeof ADAPTER_STATUS];\n\nexport type CONNECTED_EVENT_DATA = {\n  adapter: string;\n  reconnected: boolean;\n};\n\nexport type UserAuthInfo = { idToken: string };\n\nexport interface BaseAdapterSettings {\n  clientId?: string;\n  sessionTime?: number;\n  chainConfig?: Partial<CustomChainConfig> & Pick<CustomChainConfig, \"chainNamespace\">;\n  web3AuthNetwork?: OPENLOGIN_NETWORK_TYPE;\n  useCoreKitKey?: boolean;\n}\n\nexport interface IProvider extends SafeEventEmitter {\n  get chainId(): string;\n  request<S, R>(args: RequestArguments<S>): Promise<Maybe<R>>;\n  sendAsync<T, U>(req: JRPCRequest<T>, callback: SendCallBack<JRPCResponse<U>>): void;\n  sendAsync<T, U>(req: JRPCRequest<T>): Promise<JRPCResponse<U>>;\n  send<T, U>(req: JRPCRequest<T>, callback: SendCallBack<JRPCResponse<U>>): void;\n}\n\nexport interface IBaseProvider<T> extends IProvider {\n  provider: SafeEventEmitterProvider | null;\n  currentChainConfig: Partial<CustomChainConfig>;\n  setupProvider(provider: T): Promise<void>;\n  addChain(chainConfig: CustomChainConfig): void;\n  switchChain(params: { chainId: string }): Promise<void>;\n  updateProviderEngineProxy(provider: SafeEventEmitterProvider): void;\n}\n\nexport interface IAdapter<T> extends SafeEventEmitter {\n  adapterNamespace: AdapterNamespaceType;\n  currentChainNamespace: ChainNamespaceType;\n  chainConfigProxy: CustomChainConfig | null;\n  type: ADAPTER_CATEGORY_TYPE;\n  name: string;\n  sessionTime: number;\n  web3AuthNetwork: OPENLOGIN_NETWORK_TYPE;\n  clientId: string;\n  status: ADAPTER_STATUS_TYPE;\n  provider: IProvider | null;\n  adapterData?: unknown;\n  connnected: boolean;\n  addChain(chainConfig: CustomChainConfig): Promise<void>;\n  init(options?: AdapterInitOptions): Promise<void>;\n  disconnect(options?: { cleanup: boolean }): Promise<void>;\n  connect(params?: T): Promise<IProvider | null>;\n  getUserInfo(): Promise<Partial<UserInfo>>;\n  setAdapterSettings(adapterSettings: BaseAdapterSettings): void;\n  switchChain(params: { chainId: string }): Promise<void>;\n  authenticateUser(): Promise<UserAuthInfo>;\n}\n\nexport abstract class BaseAdapter<T> extends SafeEventEmitter implements IAdapter<T> {\n  public adapterData?: unknown = {};\n\n  public sessionTime = 86400;\n\n  public clientId: string;\n\n  public web3AuthNetwork: OPENLOGIN_NETWORK_TYPE = OPENLOGIN_NETWORK.MAINNET;\n\n  protected rehydrated = false;\n\n  // should be added in constructor or from setAdapterSettings function\n  // before calling init function.\n  protected chainConfig: CustomChainConfig | null = null;\n\n  protected knownChainConfigs: Record<CustomChainConfig[\"chainId\"], CustomChainConfig> = {};\n\n  public abstract adapterNamespace: AdapterNamespaceType;\n\n  public abstract currentChainNamespace: ChainNamespaceType;\n\n  public abstract type: ADAPTER_CATEGORY_TYPE;\n\n  public abstract name: string;\n\n  public abstract status: ADAPTER_STATUS_TYPE;\n\n  constructor(options: BaseAdapterSettings = {}) {\n    super();\n    this.setAdapterSettings(options);\n  }\n\n  get chainConfigProxy(): CustomChainConfig | null {\n    return this.chainConfig ? { ...this.chainConfig } : null;\n  }\n\n  get connnected(): boolean {\n    return this.status === ADAPTER_STATUS.CONNECTED;\n  }\n\n  public abstract get provider(): IProvider | null;\n\n  public setAdapterSettings(options: BaseAdapterSettings): void {\n    if (this.status === ADAPTER_STATUS.READY) return;\n    if (options?.sessionTime) {\n      this.sessionTime = options.sessionTime;\n    }\n    if (options?.clientId) {\n      this.clientId = options.clientId;\n    }\n    if (options?.web3AuthNetwork) {\n      this.web3AuthNetwork = options.web3AuthNetwork;\n    }\n    const customChainConfig = options.chainConfig;\n    if (customChainConfig) {\n      if (!customChainConfig.chainNamespace) throw WalletInitializationError.notReady(\"ChainNamespace is required while setting chainConfig\");\n      this.currentChainNamespace = customChainConfig.chainNamespace;\n      // chainId is optional in this function.\n      // we go with mainnet chainId by default.\n      const defaultChainConfig = getChainConfig(customChainConfig.chainNamespace, customChainConfig.chainId);\n      // NOTE: It is being forced casted to CustomChainConfig to handle OTHER Chainnamespace\n      // where chainConfig is not required.\n      const finalChainConfig = { ...(defaultChainConfig || {}), ...customChainConfig } as CustomChainConfig;\n\n      this.chainConfig = finalChainConfig;\n      this.addChainConfig(finalChainConfig);\n    }\n  }\n\n  checkConnectionRequirements(): void {\n    // we reconnect without killing existing wallet connect session on calling connect again.\n    if (this.name === WALLET_ADAPTERS.WALLET_CONNECT_V2 && this.status === ADAPTER_STATUS.CONNECTING) return;\n    else if (this.status === ADAPTER_STATUS.CONNECTING) throw WalletInitializationError.notReady(\"Already connecting\");\n\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletLoginError.connectionError(\"Already connected\");\n    if (this.status !== ADAPTER_STATUS.READY)\n      throw WalletLoginError.connectionError(\n        \"Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function\"\n      );\n  }\n\n  checkInitializationRequirements(): void {\n    if (!this.clientId) throw WalletInitializationError.invalidParams(\"Please initialize Web3Auth with a valid clientId in constructor\");\n    if (!this.chainConfig) throw WalletInitializationError.invalidParams(\"rpcTarget is required in chainConfig\");\n    if (!this.chainConfig.rpcTarget && this.chainConfig.chainNamespace !== CHAIN_NAMESPACES.OTHER) {\n      throw WalletInitializationError.invalidParams(\"rpcTarget is required in chainConfig\");\n    }\n\n    if (!this.chainConfig.chainId && this.chainConfig.chainNamespace !== CHAIN_NAMESPACES.OTHER) {\n      throw WalletInitializationError.invalidParams(\"chainID is required in chainConfig\");\n    }\n    if (this.status === ADAPTER_STATUS.NOT_READY) return;\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletInitializationError.notReady(\"Already connected\");\n    if (this.status === ADAPTER_STATUS.READY) throw WalletInitializationError.notReady(\"Adapter is already initialized\");\n  }\n\n  checkDisconnectionRequirements(): void {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.disconnectionError(\"Not connected with wallet\");\n  }\n\n  checkAddChainRequirements(chainConfig: CustomChainConfig, init = false): void {\n    if (!init && !this.provider) throw WalletLoginError.notConnectedError(\"Not connected with wallet.\");\n    if (this.currentChainNamespace !== chainConfig.chainNamespace) {\n      throw WalletOperationsError.chainNamespaceNotAllowed(\"This adapter doesn't support this chainNamespace\");\n    }\n  }\n\n  checkSwitchChainRequirements({ chainId }: { chainId: string }, init = false): void {\n    if (!init && !this.provider) throw WalletLoginError.notConnectedError(\"Not connected with wallet.\");\n    if (!this.knownChainConfigs[chainId]) throw WalletLoginError.chainConfigNotAdded(\"Invalid chainId\");\n  }\n\n  updateAdapterData(data: unknown): void {\n    this.adapterData = data;\n    this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, { adapterName: this.name, data });\n  }\n\n  protected addChainConfig(chainConfig: CustomChainConfig): void {\n    const currentConfig = this.knownChainConfigs[chainConfig.chainId];\n    this.knownChainConfigs[chainConfig.chainId] = {\n      ...(currentConfig || {}),\n      ...chainConfig,\n    };\n  }\n\n  protected getChainConfig(chainId: string): CustomChainConfig | null {\n    return this.knownChainConfigs[chainId] || null;\n  }\n\n  abstract init(options?: AdapterInitOptions): Promise<void>;\n  abstract connect(params?: T): Promise<IProvider | null>;\n  abstract disconnect(): Promise<void>;\n  abstract getUserInfo(): Promise<Partial<UserInfo>>;\n  abstract authenticateUser(): Promise<UserAuthInfo>;\n  abstract addChain(chainConfig: CustomChainConfig): Promise<void>;\n  abstract switchChain(params: { chainId: string }): Promise<void>;\n}\n\nexport interface BaseAdapterConfig {\n  label: string;\n  showOnModal?: boolean;\n  showOnMobile?: boolean;\n  showOnDesktop?: boolean;\n}\n\nexport type LoginMethodConfig = Record<\n  string,\n  {\n    /**\n     * Display Name. If not provided, we use the default for openlogin app\n     */\n    name: string;\n    /**\n     * Description for button. If provided, it renders as a full length button. else, icon button\n     */\n    description?: string;\n    /**\n     * Logo to be shown on mouse hover. If not provided, we use the default for openlogin app\n     */\n    logoHover?: string;\n    /**\n     * Logo to be shown on dark background (dark theme). If not provided, we use the default for openlogin app\n     */\n    logoLight?: string;\n    /**\n     * Logo to be shown on light background (light theme). If not provided, we use the default for openlogin app\n     */\n    logoDark?: string;\n    /**\n     * Show login button on the main list\n     */\n    mainOption?: boolean;\n    /**\n     * Whether to show the login button on modal or not\n     */\n    showOnModal?: boolean;\n    /**\n     * Whether to show the login button on desktop\n     */\n    showOnDesktop?: boolean;\n    /**\n     * Whether to show the login button on mobile\n     */\n    showOnMobile?: boolean;\n  }\n>;\n\nexport interface IWalletConnectExtensionAdapter {\n  name: string;\n  chains: ChainNamespaceType[];\n  logo: string;\n  mobile: {\n    native: string;\n    universal: string;\n  };\n  desktop: {\n    native: string;\n    universal: string;\n  };\n}\n\nexport type WalletConnectV2Data = {\n  uri: string;\n  extensionAdapters: IWalletConnectExtensionAdapter[];\n};\nexport interface IAdapterDataEvent {\n  adapterName: string;\n  data: unknown;\n}\n\nexport interface INetworkSwitchProvider {\n  addChain(chainConfig: CustomChainConfig): Promise<void>;\n  switchChain(chainId: string): Promise<void>;\n}\nexport interface INetworkSwitch {\n  addNetwork(params: { chainConfig: CustomChainConfig; appOrigin: string }): Promise<boolean>;\n  switchNetwork(params: { currentChainConfig: CustomChainConfig; newChainConfig: Partial<CustomChainConfig>; appOrigin: string }): Promise<boolean>;\n}\n\nexport abstract class BaseNetworkSwitch implements INetworkSwitch {\n  abstract switchNetwork(params: {\n    currentChainConfig: CustomChainConfig;\n    newChainConfig: Partial<CustomChainConfig>;\n    appOrigin: string;\n  }): Promise<boolean>;\n\n  abstract addNetwork(params: { chainConfig: CustomChainConfig; appOrigin: string }): Promise<boolean>;\n}\n","import loglevel from \"loglevel\";\n\nexport default loglevel.getLogger(\"web3auth-logger\");\n","import { OPENLOGIN_NETWORK, UX_MODE } from \"@toruslabs/openlogin-utils\";\n\nimport { OpenloginAdapterOptions } from \"./interface\";\n\nexport const getOpenloginDefaultOptions = (): OpenloginAdapterOptions => {\n  return {\n    adapterSettings: {\n      network: OPENLOGIN_NETWORK.SAPPHIRE_MAINNET,\n      clientId: \"\",\n      uxMode: UX_MODE.POPUP,\n    },\n    loginSettings: {},\n    privateKeyProvider: undefined,\n  };\n};\n","import OpenLogin from \"@toruslabs/openlogin\";\nimport { LoginParams, OPENLOGIN_NETWORK, OpenLoginOptions, SUPPORTED_KEY_CURVES, UX_MODE } from \"@toruslabs/openlogin-utils\";\nimport {\n  ADAPTER_CATEGORY,\n  ADAPTER_CATEGORY_TYPE,\n  ADAPTER_EVENTS,\n  ADAPTER_NAMESPACES,\n  ADAPTER_STATUS,\n  ADAPTER_STATUS_TYPE,\n  AdapterInitOptions,\n  AdapterNamespaceType,\n  BaseAdapter,\n  BaseAdapterSettings,\n  CHAIN_NAMESPACES,\n  ChainNamespaceType,\n  CONNECTED_EVENT_DATA,\n  CustomChainConfig,\n  IProvider,\n  log,\n  UserInfo,\n  WALLET_ADAPTERS,\n  WalletInitializationError,\n  WalletLoginError,\n  Web3AuthError,\n} from \"@web3auth/base\";\nimport merge from \"lodash.merge\";\n\nimport { getOpenloginDefaultOptions } from \"./config\";\nimport type { LoginSettings, OpenloginAdapterOptions, PrivateKeyProvider } from \"./interface\";\n\nexport type OpenloginLoginParams = LoginParams & {\n  // to maintain backward compatibility\n  login_hint?: string;\n};\n\nexport class OpenloginAdapter extends BaseAdapter<OpenloginLoginParams> {\n  readonly name: string = WALLET_ADAPTERS.OPENLOGIN;\n\n  readonly adapterNamespace: AdapterNamespaceType = ADAPTER_NAMESPACES.MULTICHAIN;\n\n  readonly type: ADAPTER_CATEGORY_TYPE = ADAPTER_CATEGORY.IN_APP;\n\n  public openloginInstance: OpenLogin | null = null;\n\n  public status: ADAPTER_STATUS_TYPE = ADAPTER_STATUS.NOT_READY;\n\n  public currentChainNamespace: ChainNamespaceType = CHAIN_NAMESPACES.EIP155;\n\n  public privateKeyProvider: PrivateKeyProvider | null = null;\n\n  private openloginOptions: OpenloginAdapterOptions[\"adapterSettings\"];\n\n  private loginSettings: LoginSettings = { loginProvider: \"\" };\n\n  constructor(params: OpenloginAdapterOptions = {}) {\n    super(params);\n    this.setAdapterSettings({\n      ...params.adapterSettings,\n      chainConfig: params.chainConfig,\n      clientId: params.clientId || \"\",\n      sessionTime: params.sessionTime,\n      web3AuthNetwork: params.web3AuthNetwork,\n      useCoreKitKey: params.useCoreKitKey,\n      privateKeyProvider: params.privateKeyProvider,\n    });\n    this.loginSettings = params.loginSettings || { loginProvider: \"\" };\n    this.privateKeyProvider = params.privateKeyProvider || null;\n  }\n\n  get chainConfigProxy(): CustomChainConfig | null {\n    return this.chainConfig ? { ...this.chainConfig } : null;\n  }\n\n  get provider(): IProvider | null {\n    if (this.status !== ADAPTER_STATUS.NOT_READY && this.privateKeyProvider) {\n      return this.privateKeyProvider;\n    }\n    return null;\n  }\n\n  set provider(_: IProvider | null) {\n    throw new Error(\"Not implemented\");\n  }\n\n  async init(options: AdapterInitOptions): Promise<void> {\n    super.checkInitializationRequirements();\n    if (!this.clientId) throw WalletInitializationError.invalidParams(\"clientId is required before openlogin's initialization\");\n    if (!this.openloginOptions) throw WalletInitializationError.invalidParams(\"openloginOptions is required before openlogin's initialization\");\n    const isRedirectResult = this.openloginOptions.uxMode === UX_MODE.REDIRECT;\n\n    this.openloginOptions = {\n      ...this.openloginOptions,\n      replaceUrlOnRedirect: isRedirectResult,\n    };\n    this.openloginInstance = new OpenLogin({\n      ...this.openloginOptions,\n      clientId: this.clientId,\n      network: this.openloginOptions.network || this.web3AuthNetwork || OPENLOGIN_NETWORK.SAPPHIRE_MAINNET,\n    });\n    log.debug(\"initializing openlogin adapter init\");\n\n    await this.openloginInstance.init();\n\n    if (!this.chainConfig) throw WalletInitializationError.invalidParams(\"chainConfig is required before initialization\");\n\n    this.status = ADAPTER_STATUS.READY;\n    this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.OPENLOGIN);\n\n    try {\n      log.debug(\"initializing openlogin adapter\");\n\n      const finalPrivKey = this._getFinalPrivKey();\n      // connect only if it is redirect result or if connect (adapter is cached/already connected in same session) is true\n      if (finalPrivKey && (options.autoConnect || isRedirectResult)) {\n        this.rehydrated = true;\n        await this.connect();\n      }\n    } catch (error) {\n      log.error(\"Failed to connect with cached openlogin provider\", error);\n      this.emit(\"ERRORED\", error);\n    }\n  }\n\n  async connect(params: OpenloginLoginParams = { loginProvider: \"\" }): Promise<IProvider | null> {\n    super.checkConnectionRequirements();\n    this.status = ADAPTER_STATUS.CONNECTING;\n    this.emit(ADAPTER_EVENTS.CONNECTING, { ...params, adapter: WALLET_ADAPTERS.OPENLOGIN });\n    try {\n      await this.connectWithProvider(params);\n      return this.provider;\n    } catch (error: unknown) {\n      log.error(\"Failed to connect with openlogin provider\", error);\n      // ready again to be connected\n      this.status = ADAPTER_STATUS.READY;\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n      if ((error as Error)?.message.includes(\"user closed popup\")) {\n        throw WalletLoginError.popupClosed();\n      } else if (error instanceof Web3AuthError) {\n        throw error;\n      }\n      throw WalletLoginError.connectionError(\"Failed to login with openlogin\");\n    }\n  }\n\n  async disconnect(options: { cleanup: boolean } = { cleanup: false }): Promise<void> {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.openloginInstance) throw WalletInitializationError.notReady(\"openloginInstance is not ready\");\n    await this.openloginInstance.logout();\n    if (options.cleanup) {\n      this.status = ADAPTER_STATUS.NOT_READY;\n      this.openloginInstance = null;\n      this.privateKeyProvider = null;\n    } else {\n      // ready to be connected again\n      this.status = ADAPTER_STATUS.READY;\n    }\n\n    this.rehydrated = false;\n    this.emit(ADAPTER_EVENTS.DISCONNECTED);\n  }\n\n  async authenticateUser(): Promise<{ idToken: string }> {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n    const userInfo = await this.getUserInfo();\n    return {\n      idToken: userInfo.idToken as string,\n    };\n  }\n\n  async getUserInfo(): Promise<Partial<UserInfo>> {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.openloginInstance) throw WalletInitializationError.notReady(\"openloginInstance is not ready\");\n    const userInfo = this.openloginInstance.getUserInfo();\n    return userInfo;\n  }\n\n  // should be called only before initialization.\n  setAdapterSettings(adapterSettings: Partial<OpenLoginOptions & BaseAdapterSettings> & { privateKeyProvider?: PrivateKeyProvider }): void {\n    super.setAdapterSettings(adapterSettings);\n    const defaultOptions = getOpenloginDefaultOptions();\n    log.info(\"setting adapter settings\", adapterSettings);\n    this.openloginOptions = {\n      ...defaultOptions.adapterSettings,\n      ...this.openloginOptions,\n      ...adapterSettings,\n    };\n    if (adapterSettings.web3AuthNetwork) {\n      this.openloginOptions.network = adapterSettings.web3AuthNetwork;\n    }\n    if (adapterSettings.useCoreKitKey !== undefined) {\n      this.openloginOptions.useCoreKitKey = adapterSettings.useCoreKitKey;\n    }\n    if (adapterSettings.privateKeyProvider) {\n      this.privateKeyProvider = adapterSettings.privateKeyProvider;\n    }\n  }\n\n  public async addChain(chainConfig: CustomChainConfig, init = false): Promise<void> {\n    super.checkAddChainRequirements(chainConfig, init);\n    this.privateKeyProvider?.addChain(chainConfig);\n    this.addChainConfig(chainConfig);\n  }\n\n  public async switchChain(params: { chainId: string }, init = false): Promise<void> {\n    super.checkSwitchChainRequirements(params, init);\n    await this.privateKeyProvider?.switchChain(params);\n    this.setAdapterSettings({ chainConfig: this.getChainConfig(params.chainId) as CustomChainConfig });\n  }\n\n  private _getFinalPrivKey() {\n    if (!this.openloginInstance) return \"\";\n    let finalPrivKey = this.openloginInstance.privKey;\n    // coreKitKey is available only for custom verifiers by default\n    if (this.openloginOptions?.useCoreKitKey) {\n      // this is to check if the user has already logged in but coreKitKey is not available.\n      // when useCoreKitKey is set to true.\n      // This is to ensure that when there is no user session active, we don't throw an exception.\n      if (this.openloginInstance.privKey && !this.openloginInstance.coreKitKey) {\n        throw WalletLoginError.coreKitKeyNotFound();\n      }\n      finalPrivKey = this.openloginInstance.coreKitKey;\n    }\n    return finalPrivKey;\n  }\n\n  private _getFinalEd25519PrivKey() {\n    if (!this.openloginInstance) return \"\";\n    let finalPrivKey = this.openloginInstance.ed25519PrivKey;\n    // coreKitKey is available only for custom verifiers by default\n    if (this.openloginOptions?.useCoreKitKey) {\n      // this is to check if the user has already logged in but coreKitKey is not available.\n      // when useCoreKitKey is set to true.\n      // This is to ensure that when there is no user session active, we don't throw an exception.\n      if (this.openloginInstance.ed25519PrivKey && !this.openloginInstance.coreKitEd25519Key) {\n        throw WalletLoginError.coreKitKeyNotFound();\n      }\n      finalPrivKey = this.openloginInstance.coreKitEd25519Key;\n    }\n    return finalPrivKey;\n  }\n\n  private async connectWithProvider(params: OpenloginLoginParams = { loginProvider: \"\" }): Promise<void> {\n    if (!this.privateKeyProvider) throw WalletInitializationError.invalidParams(\"PrivateKey Provider is required before initialization\");\n    if (!this.openloginInstance) throw WalletInitializationError.notReady(\"openloginInstance is not ready\");\n\n    const keyAvailable = this._getFinalPrivKey();\n    // if not logged in then login\n    if (!keyAvailable || params.extraLoginOptions?.id_token) {\n      if (!this.loginSettings.curve) {\n        this.loginSettings.curve =\n          this.currentChainNamespace === CHAIN_NAMESPACES.SOLANA ? SUPPORTED_KEY_CURVES.ED25519 : SUPPORTED_KEY_CURVES.SECP256K1;\n      }\n      if (!params.loginProvider && !this.loginSettings.loginProvider)\n        throw WalletInitializationError.invalidParams(\"loginProvider is required for login\");\n      await this.openloginInstance.login(\n        merge(this.loginSettings, params, {\n          extraLoginOptions: { ...(params.extraLoginOptions || {}), login_hint: params.login_hint || params.extraLoginOptions?.login_hint },\n        })\n      );\n    }\n    let finalPrivKey = this._getFinalPrivKey();\n    if (finalPrivKey) {\n      if (this.currentChainNamespace === CHAIN_NAMESPACES.SOLANA) {\n        finalPrivKey = this._getFinalEd25519PrivKey();\n      }\n\n      await this.privateKeyProvider.setupProvider(finalPrivKey);\n      this.status = ADAPTER_STATUS.CONNECTED;\n      this.emit(ADAPTER_EVENTS.CONNECTED, { adapter: WALLET_ADAPTERS.OPENLOGIN, reconnected: this.rehydrated } as CONNECTED_EVENT_DATA);\n    }\n  }\n}\n","'use strict'\n\nconst { AbortError, codes } = require('../../ours/errors')\nconst { isNodeStream, isWebStream, kControllerErrorFunction } = require('./utils')\nconst eos = require('./end-of-stream')\nconst { ERR_INVALID_ARG_TYPE } = codes\n\n// This method is inlined here for readable-stream\n// It also does not allow for signal to not exist on the stream\n// https://github.com/nodejs/node/pull/36061#discussion_r533718029\nconst validateAbortSignal = (signal, name) => {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nmodule.exports.addAbortSignal = function addAbortSignal(signal, stream) {\n  validateAbortSignal(signal, 'signal')\n  if (!isNodeStream(stream) && !isWebStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  return module.exports.addAbortSignalNoValidate(signal, stream)\n}\nmodule.exports.addAbortSignalNoValidate = function (signal, stream) {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    return stream\n  }\n  const onAbort = isNodeStream(stream)\n    ? () => {\n        stream.destroy(\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n    : () => {\n        stream[kControllerErrorFunction](\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n  if (signal.aborted) {\n    onAbort()\n  } else {\n    signal.addEventListener('abort', onAbort)\n    eos(stream, () => signal.removeEventListener('abort', onAbort))\n  }\n  return stream\n}\n","'use strict'\n\nconst { StringPrototypeSlice, SymbolIterator, TypedArrayPrototypeSet, Uint8Array } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { inspect } = require('../../ours/util')\nmodule.exports = class BufferList {\n  constructor() {\n    this.head = null\n    this.tail = null\n    this.length = 0\n  }\n  push(v) {\n    const entry = {\n      data: v,\n      next: null\n    }\n    if (this.length > 0) this.tail.next = entry\n    else this.head = entry\n    this.tail = entry\n    ++this.length\n  }\n  unshift(v) {\n    const entry = {\n      data: v,\n      next: this.head\n    }\n    if (this.length === 0) this.tail = entry\n    this.head = entry\n    ++this.length\n  }\n  shift() {\n    if (this.length === 0) return\n    const ret = this.head.data\n    if (this.length === 1) this.head = this.tail = null\n    else this.head = this.head.next\n    --this.length\n    return ret\n  }\n  clear() {\n    this.head = this.tail = null\n    this.length = 0\n  }\n  join(s) {\n    if (this.length === 0) return ''\n    let p = this.head\n    let ret = '' + p.data\n    while ((p = p.next) !== null) ret += s + p.data\n    return ret\n  }\n  concat(n) {\n    if (this.length === 0) return Buffer.alloc(0)\n    const ret = Buffer.allocUnsafe(n >>> 0)\n    let p = this.head\n    let i = 0\n    while (p) {\n      TypedArrayPrototypeSet(ret, p.data, i)\n      i += p.data.length\n      p = p.next\n    }\n    return ret\n  }\n\n  // Consumes a specified amount of bytes or characters from the buffered data.\n  consume(n, hasStrings) {\n    const data = this.head.data\n    if (n < data.length) {\n      // `slice` is the same for buffers and strings.\n      const slice = data.slice(0, n)\n      this.head.data = data.slice(n)\n      return slice\n    }\n    if (n === data.length) {\n      // First chunk is a perfect match.\n      return this.shift()\n    }\n    // Result spans more than one buffer.\n    return hasStrings ? this._getString(n) : this._getBuffer(n)\n  }\n  first() {\n    return this.head.data\n  }\n  *[SymbolIterator]() {\n    for (let p = this.head; p; p = p.next) {\n      yield p.data\n    }\n  }\n\n  // Consumes a specified amount of characters from the buffered data.\n  _getString(n) {\n    let ret = ''\n    let p = this.head\n    let c = 0\n    do {\n      const str = p.data\n      if (n > str.length) {\n        ret += str\n        n -= str.length\n      } else {\n        if (n === str.length) {\n          ret += str\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          ret += StringPrototypeSlice(str, 0, n)\n          this.head = p\n          p.data = StringPrototypeSlice(str, n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Consumes a specified amount of bytes from the buffered data.\n  _getBuffer(n) {\n    const ret = Buffer.allocUnsafe(n)\n    const retLen = n\n    let p = this.head\n    let c = 0\n    do {\n      const buf = p.data\n      if (n > buf.length) {\n        TypedArrayPrototypeSet(ret, buf, retLen - n)\n        n -= buf.length\n      } else {\n        if (n === buf.length) {\n          TypedArrayPrototypeSet(ret, buf, retLen - n)\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          TypedArrayPrototypeSet(ret, new Uint8Array(buf.buffer, buf.byteOffset, n), retLen - n)\n          this.head = p\n          p.data = buf.slice(n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Make sure the linked list only shows the minimal necessary information.\n  [Symbol.for('nodejs.util.inspect.custom')](_, options) {\n    return inspect(this, {\n      ...options,\n      // Only inspect one level.\n      depth: 0,\n      // It should not recurse.\n      customInspect: false\n    })\n  }\n}\n","'use strict'\n\nconst { pipeline } = require('./pipeline')\nconst Duplex = require('./duplex')\nconst { destroyer } = require('./destroy')\nconst {\n  isNodeStream,\n  isReadable,\n  isWritable,\n  isWebStream,\n  isTransformStream,\n  isWritableStream,\n  isReadableStream\n} = require('./utils')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_VALUE, ERR_MISSING_ARGS }\n} = require('../../ours/errors')\nconst eos = require('./end-of-stream')\nmodule.exports = function compose(...streams) {\n  if (streams.length === 0) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  if (streams.length === 1) {\n    return Duplex.from(streams[0])\n  }\n  const orgStreams = [...streams]\n  if (typeof streams[0] === 'function') {\n    streams[0] = Duplex.from(streams[0])\n  }\n  if (typeof streams[streams.length - 1] === 'function') {\n    const idx = streams.length - 1\n    streams[idx] = Duplex.from(streams[idx])\n  }\n  for (let n = 0; n < streams.length; ++n) {\n    if (!isNodeStream(streams[n]) && !isWebStream(streams[n])) {\n      // TODO(ronag): Add checks for non streams.\n      continue\n    }\n    if (\n      n < streams.length - 1 &&\n      !(isReadable(streams[n]) || isReadableStream(streams[n]) || isTransformStream(streams[n]))\n    ) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be readable')\n    }\n    if (n > 0 && !(isWritable(streams[n]) || isWritableStream(streams[n]) || isTransformStream(streams[n]))) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be writable')\n    }\n  }\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    } else if (!readable && !writable) {\n      d.destroy()\n    }\n  }\n  const head = streams[0]\n  const tail = pipeline(streams, onfinished)\n  const writable = !!(isWritable(head) || isWritableStream(head) || isTransformStream(head))\n  const readable = !!(isReadable(tail) || isReadableStream(tail) || isTransformStream(tail))\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplex({\n    // TODO (ronag): highWaterMark?\n    writableObjectMode: !!(head !== null && head !== undefined && head.writableObjectMode),\n    readableObjectMode: !!(tail !== null && tail !== undefined && tail.writableObjectMode),\n    writable,\n    readable\n  })\n  if (writable) {\n    if (isNodeStream(head)) {\n      d._write = function (chunk, encoding, callback) {\n        if (head.write(chunk, encoding)) {\n          callback()\n        } else {\n          ondrain = callback\n        }\n      }\n      d._final = function (callback) {\n        head.end()\n        onfinish = callback\n      }\n      head.on('drain', function () {\n        if (ondrain) {\n          const cb = ondrain\n          ondrain = null\n          cb()\n        }\n      })\n    } else if (isWebStream(head)) {\n      const writable = isTransformStream(head) ? head.writable : head\n      const writer = writable.getWriter()\n      d._write = async function (chunk, encoding, callback) {\n        try {\n          await writer.ready\n          writer.write(chunk).catch(() => {})\n          callback()\n        } catch (err) {\n          callback(err)\n        }\n      }\n      d._final = async function (callback) {\n        try {\n          await writer.ready\n          writer.close().catch(() => {})\n          onfinish = callback\n        } catch (err) {\n          callback(err)\n        }\n      }\n    }\n    const toRead = isTransformStream(tail) ? tail.readable : tail\n    eos(toRead, () => {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    if (isNodeStream(tail)) {\n      tail.on('readable', function () {\n        if (onreadable) {\n          const cb = onreadable\n          onreadable = null\n          cb()\n        }\n      })\n      tail.on('end', function () {\n        d.push(null)\n      })\n      d._read = function () {\n        while (true) {\n          const buf = tail.read()\n          if (buf === null) {\n            onreadable = d._read\n            return\n          }\n          if (!d.push(buf)) {\n            return\n          }\n        }\n      }\n    } else if (isWebStream(tail)) {\n      const readable = isTransformStream(tail) ? tail.readable : tail\n      const reader = readable.getReader()\n      d._read = async function () {\n        while (true) {\n          try {\n            const { value, done } = await reader.read()\n            if (!d.push(value)) {\n              return\n            }\n            if (done) {\n              d.push(null)\n              return\n            }\n          } catch {\n            return\n          }\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      if (isNodeStream(tail)) {\n        destroyer(tail, err)\n      }\n    }\n  }\n  return d\n}\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst {\n  aggregateTwoErrors,\n  codes: { ERR_MULTIPLE_CALLBACK },\n  AbortError\n} = require('../../ours/errors')\nconst { Symbol } = require('../../ours/primordials')\nconst { kDestroyed, isDestroyed, isFinished, isServerRequest } = require('./utils')\nconst kDestroy = Symbol('kDestroy')\nconst kConstruct = Symbol('kConstruct')\nfunction checkError(err, w, r) {\n  if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n  }\n}\n\n// Backwards compat. cb() is undocumented and unused in core but\n// unfortunately might be used by modules.\nfunction destroy(err, cb) {\n  const r = this._readableState\n  const w = this._writableState\n  // With duplex streams we use the writable side for state.\n  const s = w || r\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    if (typeof cb === 'function') {\n      cb()\n    }\n    return this\n  }\n\n  // We set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n  checkError(err, w, r)\n  if (w) {\n    w.destroyed = true\n  }\n  if (r) {\n    r.destroyed = true\n  }\n\n  // If still constructing then defer calling _destroy.\n  if (!s.constructed) {\n    this.once(kDestroy, function (er) {\n      _destroy(this, aggregateTwoErrors(er, err), cb)\n    })\n  } else {\n    _destroy(this, err, cb)\n  }\n  return this\n}\nfunction _destroy(self, err, cb) {\n  let called = false\n  function onDestroy(err) {\n    if (called) {\n      return\n    }\n    called = true\n    const r = self._readableState\n    const w = self._writableState\n    checkError(err, w, r)\n    if (w) {\n      w.closed = true\n    }\n    if (r) {\n      r.closed = true\n    }\n    if (typeof cb === 'function') {\n      cb(err)\n    }\n    if (err) {\n      process.nextTick(emitErrorCloseNT, self, err)\n    } else {\n      process.nextTick(emitCloseNT, self)\n    }\n  }\n  try {\n    self._destroy(err || null, onDestroy)\n  } catch (err) {\n    onDestroy(err)\n  }\n}\nfunction emitErrorCloseNT(self, err) {\n  emitErrorNT(self, err)\n  emitCloseNT(self)\n}\nfunction emitCloseNT(self) {\n  const r = self._readableState\n  const w = self._writableState\n  if (w) {\n    w.closeEmitted = true\n  }\n  if (r) {\n    r.closeEmitted = true\n  }\n  if ((w !== null && w !== undefined && w.emitClose) || (r !== null && r !== undefined && r.emitClose)) {\n    self.emit('close')\n  }\n}\nfunction emitErrorNT(self, err) {\n  const r = self._readableState\n  const w = self._writableState\n  if ((w !== null && w !== undefined && w.errorEmitted) || (r !== null && r !== undefined && r.errorEmitted)) {\n    return\n  }\n  if (w) {\n    w.errorEmitted = true\n  }\n  if (r) {\n    r.errorEmitted = true\n  }\n  self.emit('error', err)\n}\nfunction undestroy() {\n  const r = this._readableState\n  const w = this._writableState\n  if (r) {\n    r.constructed = true\n    r.closed = false\n    r.closeEmitted = false\n    r.destroyed = false\n    r.errored = null\n    r.errorEmitted = false\n    r.reading = false\n    r.ended = r.readable === false\n    r.endEmitted = r.readable === false\n  }\n  if (w) {\n    w.constructed = true\n    w.destroyed = false\n    w.closed = false\n    w.closeEmitted = false\n    w.errored = null\n    w.errorEmitted = false\n    w.finalCalled = false\n    w.prefinished = false\n    w.ended = w.writable === false\n    w.ending = w.writable === false\n    w.finished = w.writable === false\n  }\n}\nfunction errorOrDestroy(stream, err, sync) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  const r = stream._readableState\n  const w = stream._writableState\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    return this\n  }\n  if ((r !== null && r !== undefined && r.autoDestroy) || (w !== null && w !== undefined && w.autoDestroy))\n    stream.destroy(err)\n  else if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n    if (sync) {\n      process.nextTick(emitErrorNT, stream, err)\n    } else {\n      emitErrorNT(stream, err)\n    }\n  }\n}\nfunction construct(stream, cb) {\n  if (typeof stream._construct !== 'function') {\n    return\n  }\n  const r = stream._readableState\n  const w = stream._writableState\n  if (r) {\n    r.constructed = false\n  }\n  if (w) {\n    w.constructed = false\n  }\n  stream.once(kConstruct, cb)\n  if (stream.listenerCount(kConstruct) > 1) {\n    // Duplex\n    return\n  }\n  process.nextTick(constructNT, stream)\n}\nfunction constructNT(stream) {\n  let called = false\n  function onConstruct(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : new ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    const r = stream._readableState\n    const w = stream._writableState\n    const s = w || r\n    if (r) {\n      r.constructed = true\n    }\n    if (w) {\n      w.constructed = true\n    }\n    if (s.destroyed) {\n      stream.emit(kDestroy, err)\n    } else if (err) {\n      errorOrDestroy(stream, err, true)\n    } else {\n      process.nextTick(emitConstructNT, stream)\n    }\n  }\n  try {\n    stream._construct((err) => {\n      process.nextTick(onConstruct, err)\n    })\n  } catch (err) {\n    process.nextTick(onConstruct, err)\n  }\n}\nfunction emitConstructNT(stream) {\n  stream.emit(kConstruct)\n}\nfunction isRequest(stream) {\n  return (stream === null || stream === undefined ? undefined : stream.setHeader) && typeof stream.abort === 'function'\n}\nfunction emitCloseLegacy(stream) {\n  stream.emit('close')\n}\nfunction emitErrorCloseLegacy(stream, err) {\n  stream.emit('error', err)\n  process.nextTick(emitCloseLegacy, stream)\n}\n\n// Normalize destroy for legacy.\nfunction destroyer(stream, err) {\n  if (!stream || isDestroyed(stream)) {\n    return\n  }\n  if (!err && !isFinished(stream)) {\n    err = new AbortError()\n  }\n\n  // TODO: Remove isRequest branches.\n  if (isServerRequest(stream)) {\n    stream.socket = null\n    stream.destroy(err)\n  } else if (isRequest(stream)) {\n    stream.abort()\n  } else if (isRequest(stream.req)) {\n    stream.req.abort()\n  } else if (typeof stream.destroy === 'function') {\n    stream.destroy(err)\n  } else if (typeof stream.close === 'function') {\n    // TODO: Don't lose err?\n    stream.close()\n  } else if (err) {\n    process.nextTick(emitErrorCloseLegacy, stream, err)\n  } else {\n    process.nextTick(emitCloseLegacy, stream)\n  }\n  if (!stream.destroyed) {\n    stream[kDestroyed] = true\n  }\n}\nmodule.exports = {\n  construct,\n  destroyer,\n  destroy,\n  undestroy,\n  errorOrDestroy\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototype inheritance, this class\n// prototypically inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict'\n\nconst {\n  ObjectDefineProperties,\n  ObjectGetOwnPropertyDescriptor,\n  ObjectKeys,\n  ObjectSetPrototypeOf\n} = require('../../ours/primordials')\nmodule.exports = Duplex\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nObjectSetPrototypeOf(Duplex.prototype, Readable.prototype)\nObjectSetPrototypeOf(Duplex, Readable)\n{\n  const keys = ObjectKeys(Writable.prototype)\n  // Allow the keys array to be GC'ed.\n  for (let i = 0; i < keys.length; i++) {\n    const method = keys[i]\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method]\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options)\n  Readable.call(this, options)\n  Writable.call(this, options)\n  if (options) {\n    this.allowHalfOpen = options.allowHalfOpen !== false\n    if (options.readable === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if (options.writable === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  } else {\n    this.allowHalfOpen = true\n  }\n}\nObjectDefineProperties(Duplex.prototype, {\n  writable: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writable')\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableHighWaterMark')\n  },\n  writableObjectMode: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableObjectMode')\n  },\n  writableBuffer: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableBuffer')\n  },\n  writableLength: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableLength')\n  },\n  writableFinished: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableFinished')\n  },\n  writableCorked: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableCorked')\n  },\n  writableEnded: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableEnded')\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableNeedDrain')\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      if (this._readableState === undefined || this._writableState === undefined) {\n        return false\n      }\n      return this._readableState.destroyed && this._writableState.destroyed\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      if (this._readableState && this._writableState) {\n        this._readableState.destroyed = value\n        this._writableState.destroyed = value\n      }\n    }\n  }\n})\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nDuplex.fromWeb = function (pair, options) {\n  return lazyWebStreams().newStreamDuplexFromReadableWritablePair(pair, options)\n}\nDuplex.toWeb = function (duplex) {\n  return lazyWebStreams().newReadableWritablePairFromDuplex(duplex)\n}\nlet duplexify\nDuplex.from = function (body) {\n  if (!duplexify) {\n    duplexify = require('./duplexify')\n  }\n  return duplexify(body, 'body')\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\n;('use strict')\nconst bufferModule = require('buffer')\nconst {\n  isReadable,\n  isWritable,\n  isIterable,\n  isNodeStream,\n  isReadableNodeStream,\n  isWritableNodeStream,\n  isDuplexNodeStream\n} = require('./utils')\nconst eos = require('./end-of-stream')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_TYPE, ERR_INVALID_RETURN_VALUE }\n} = require('../../ours/errors')\nconst { destroyer } = require('./destroy')\nconst Duplex = require('./duplex')\nconst Readable = require('./readable')\nconst { createDeferredPromise } = require('../../ours/util')\nconst from = require('./from')\nconst Blob = globalThis.Blob || bufferModule.Blob\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst { FunctionPrototypeCall } = require('../../ours/primordials')\n\n// This is needed for pre node 17.\nclass Duplexify extends Duplex {\n  constructor(options) {\n    super(options)\n\n    // https://github.com/nodejs/node/pull/34385\n\n    if ((options === null || options === undefined ? undefined : options.readable) === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if ((options === null || options === undefined ? undefined : options.writable) === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  }\n}\nmodule.exports = function duplexify(body, name) {\n  if (isDuplexNodeStream(body)) {\n    return body\n  }\n  if (isReadableNodeStream(body)) {\n    return _duplexify({\n      readable: body\n    })\n  }\n  if (isWritableNodeStream(body)) {\n    return _duplexify({\n      writable: body\n    })\n  }\n  if (isNodeStream(body)) {\n    return _duplexify({\n      writable: false,\n      readable: false\n    })\n  }\n\n  // TODO: Webstreams\n  // if (isReadableStream(body)) {\n  //   return _duplexify({ readable: Readable.fromWeb(body) });\n  // }\n\n  // TODO: Webstreams\n  // if (isWritableStream(body)) {\n  //   return _duplexify({ writable: Writable.fromWeb(body) });\n  // }\n\n  if (typeof body === 'function') {\n    const { value, write, final, destroy } = fromAsyncGen(body)\n    if (isIterable(value)) {\n      return from(Duplexify, value, {\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        write,\n        final,\n        destroy\n      })\n    }\n    const then = value === null || value === undefined ? undefined : value.then\n    if (typeof then === 'function') {\n      let d\n      const promise = FunctionPrototypeCall(\n        then,\n        value,\n        (val) => {\n          if (val != null) {\n            throw new ERR_INVALID_RETURN_VALUE('nully', 'body', val)\n          }\n        },\n        (err) => {\n          destroyer(d, err)\n        }\n      )\n      return (d = new Duplexify({\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        readable: false,\n        write,\n        final(cb) {\n          final(async () => {\n            try {\n              await promise\n              process.nextTick(cb, null)\n            } catch (err) {\n              process.nextTick(cb, err)\n            }\n          })\n        },\n        destroy\n      }))\n    }\n    throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or AsyncFunction', name, value)\n  }\n  if (isBlob(body)) {\n    return duplexify(body.arrayBuffer())\n  }\n  if (isIterable(body)) {\n    return from(Duplexify, body, {\n      // TODO (ronag): highWaterMark?\n      objectMode: true,\n      writable: false\n    })\n  }\n\n  // TODO: Webstreams.\n  // if (\n  //   isReadableStream(body?.readable) &&\n  //   isWritableStream(body?.writable)\n  // ) {\n  //   return Duplexify.fromWeb(body);\n  // }\n\n  if (\n    typeof (body === null || body === undefined ? undefined : body.writable) === 'object' ||\n    typeof (body === null || body === undefined ? undefined : body.readable) === 'object'\n  ) {\n    const readable =\n      body !== null && body !== undefined && body.readable\n        ? isReadableNodeStream(body === null || body === undefined ? undefined : body.readable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.readable\n          : duplexify(body.readable)\n        : undefined\n    const writable =\n      body !== null && body !== undefined && body.writable\n        ? isWritableNodeStream(body === null || body === undefined ? undefined : body.writable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.writable\n          : duplexify(body.writable)\n        : undefined\n    return _duplexify({\n      readable,\n      writable\n    })\n  }\n  const then = body === null || body === undefined ? undefined : body.then\n  if (typeof then === 'function') {\n    let d\n    FunctionPrototypeCall(\n      then,\n      body,\n      (val) => {\n        if (val != null) {\n          d.push(val)\n        }\n        d.push(null)\n      },\n      (err) => {\n        destroyer(d, err)\n      }\n    )\n    return (d = new Duplexify({\n      objectMode: true,\n      writable: false,\n      read() {}\n    }))\n  }\n  throw new ERR_INVALID_ARG_TYPE(\n    name,\n    [\n      'Blob',\n      'ReadableStream',\n      'WritableStream',\n      'Stream',\n      'Iterable',\n      'AsyncIterable',\n      'Function',\n      '{ readable, writable } pair',\n      'Promise'\n    ],\n    body\n  )\n}\nfunction fromAsyncGen(fn) {\n  let { promise, resolve } = createDeferredPromise()\n  const ac = new AbortController()\n  const signal = ac.signal\n  const value = fn(\n    (async function* () {\n      while (true) {\n        const _promise = promise\n        promise = null\n        const { chunk, done, cb } = await _promise\n        process.nextTick(cb)\n        if (done) return\n        if (signal.aborted)\n          throw new AbortError(undefined, {\n            cause: signal.reason\n          })\n        ;({ promise, resolve } = createDeferredPromise())\n        yield chunk\n      }\n    })(),\n    {\n      signal\n    }\n  )\n  return {\n    value,\n    write(chunk, encoding, cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        chunk,\n        done: false,\n        cb\n      })\n    },\n    final(cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        done: true,\n        cb\n      })\n    },\n    destroy(err, cb) {\n      ac.abort()\n      cb(err)\n    }\n  }\n}\nfunction _duplexify(pair) {\n  const r = pair.readable && typeof pair.readable.read !== 'function' ? Readable.wrap(pair.readable) : pair.readable\n  const w = pair.writable\n  let readable = !!isReadable(r)\n  let writable = !!isWritable(w)\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    }\n  }\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplexify({\n    // TODO (ronag): highWaterMark?\n    readableObjectMode: !!(r !== null && r !== undefined && r.readableObjectMode),\n    writableObjectMode: !!(w !== null && w !== undefined && w.writableObjectMode),\n    readable,\n    writable\n  })\n  if (writable) {\n    eos(w, (err) => {\n      writable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    d._write = function (chunk, encoding, callback) {\n      if (w.write(chunk, encoding)) {\n        callback()\n      } else {\n        ondrain = callback\n      }\n    }\n    d._final = function (callback) {\n      w.end()\n      onfinish = callback\n    }\n    w.on('drain', function () {\n      if (ondrain) {\n        const cb = ondrain\n        ondrain = null\n        cb()\n      }\n    })\n    w.on('finish', function () {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    eos(r, (err) => {\n      readable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    r.on('readable', function () {\n      if (onreadable) {\n        const cb = onreadable\n        onreadable = null\n        cb()\n      }\n    })\n    r.on('end', function () {\n      d.push(null)\n    })\n    d._read = function () {\n      while (true) {\n        const buf = r.read()\n        if (buf === null) {\n          onreadable = d._read\n          return\n        }\n        if (!d.push(buf)) {\n          return\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      destroyer(w, err)\n      destroyer(r, err)\n    }\n  }\n  return d\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { AbortError, codes } = require('../../ours/errors')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_PREMATURE_CLOSE } = codes\nconst { kEmptyObject, once } = require('../../ours/util')\nconst { validateAbortSignal, validateFunction, validateObject, validateBoolean } = require('../validators')\nconst { Promise, PromisePrototypeThen } = require('../../ours/primordials')\nconst {\n  isClosed,\n  isReadable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableFinished,\n  isReadableErrored,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableFinished,\n  isWritableErrored,\n  isNodeStream,\n  willEmitClose: _willEmitClose,\n  kIsClosedPromise\n} = require('./utils')\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function'\n}\nconst nop = () => {}\nfunction eos(stream, options, callback) {\n  var _options$readable, _options$writable\n  if (arguments.length === 2) {\n    callback = options\n    options = kEmptyObject\n  } else if (options == null) {\n    options = kEmptyObject\n  } else {\n    validateObject(options, 'options')\n  }\n  validateFunction(callback, 'callback')\n  validateAbortSignal(options.signal, 'options.signal')\n  callback = once(callback)\n  if (isReadableStream(stream) || isWritableStream(stream)) {\n    return eosWeb(stream, options, callback)\n  }\n  if (!isNodeStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  const readable =\n    (_options$readable = options.readable) !== null && _options$readable !== undefined\n      ? _options$readable\n      : isReadableNodeStream(stream)\n  const writable =\n    (_options$writable = options.writable) !== null && _options$writable !== undefined\n      ? _options$writable\n      : isWritableNodeStream(stream)\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const onlegacyfinish = () => {\n    if (!stream.writable) {\n      onfinish()\n    }\n  }\n\n  // TODO (ronag): Improve soft detection to include core modules and\n  // common ecosystem modules that do properly emit 'close' but fail\n  // this generic check.\n  let willEmitClose =\n    _willEmitClose(stream) && isReadableNodeStream(stream) === readable && isWritableNodeStream(stream) === writable\n  let writableFinished = isWritableFinished(stream, false)\n  const onfinish = () => {\n    writableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.readable || readable)) {\n      return\n    }\n    if (!readable || readableFinished) {\n      callback.call(stream)\n    }\n  }\n  let readableFinished = isReadableFinished(stream, false)\n  const onend = () => {\n    readableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.writable || writable)) {\n      return\n    }\n    if (!writable || writableFinished) {\n      callback.call(stream)\n    }\n  }\n  const onerror = (err) => {\n    callback.call(stream, err)\n  }\n  let closed = isClosed(stream)\n  const onclose = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    if (readable && !readableFinished && isReadableNodeStream(stream, true)) {\n      if (!isReadableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    if (writable && !writableFinished) {\n      if (!isWritableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    callback.call(stream)\n  }\n  const onclosed = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    callback.call(stream)\n  }\n  const onrequest = () => {\n    stream.req.on('finish', onfinish)\n  }\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish)\n    if (!willEmitClose) {\n      stream.on('abort', onclose)\n    }\n    if (stream.req) {\n      onrequest()\n    } else {\n      stream.on('request', onrequest)\n    }\n  } else if (writable && !wState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish)\n    stream.on('close', onlegacyfinish)\n  }\n\n  // Not all streams will emit 'close' after 'aborted'.\n  if (!willEmitClose && typeof stream.aborted === 'boolean') {\n    stream.on('aborted', onclose)\n  }\n  stream.on('end', onend)\n  stream.on('finish', onfinish)\n  if (options.error !== false) {\n    stream.on('error', onerror)\n  }\n  stream.on('close', onclose)\n  if (closed) {\n    process.nextTick(onclose)\n  } else if (\n    (wState !== null && wState !== undefined && wState.errorEmitted) ||\n    (rState !== null && rState !== undefined && rState.errorEmitted)\n  ) {\n    if (!willEmitClose) {\n      process.nextTick(onclosed)\n    }\n  } else if (\n    !readable &&\n    (!willEmitClose || isReadable(stream)) &&\n    (writableFinished || isWritable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (\n    !writable &&\n    (!willEmitClose || isWritable(stream)) &&\n    (readableFinished || isReadable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (rState && stream.req && stream.aborted) {\n    process.nextTick(onclosed)\n  }\n  const cleanup = () => {\n    callback = nop\n    stream.removeListener('aborted', onclose)\n    stream.removeListener('complete', onfinish)\n    stream.removeListener('abort', onclose)\n    stream.removeListener('request', onrequest)\n    if (stream.req) stream.req.removeListener('finish', onfinish)\n    stream.removeListener('end', onlegacyfinish)\n    stream.removeListener('close', onlegacyfinish)\n    stream.removeListener('finish', onfinish)\n    stream.removeListener('end', onend)\n    stream.removeListener('error', onerror)\n    stream.removeListener('close', onclose)\n  }\n  if (options.signal && !closed) {\n    const abort = () => {\n      // Keep it because cleanup removes it.\n      const endCallback = callback\n      cleanup()\n      endCallback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      const originalCallback = callback\n      callback = once((...args) => {\n        options.signal.removeEventListener('abort', abort)\n        originalCallback.apply(stream, args)\n      })\n      options.signal.addEventListener('abort', abort)\n    }\n  }\n  return cleanup\n}\nfunction eosWeb(stream, options, callback) {\n  let isAborted = false\n  let abort = nop\n  if (options.signal) {\n    abort = () => {\n      isAborted = true\n      callback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      const originalCallback = callback\n      callback = once((...args) => {\n        options.signal.removeEventListener('abort', abort)\n        originalCallback.apply(stream, args)\n      })\n      options.signal.addEventListener('abort', abort)\n    }\n  }\n  const resolverFn = (...args) => {\n    if (!isAborted) {\n      process.nextTick(() => callback.apply(stream, args))\n    }\n  }\n  PromisePrototypeThen(stream[kIsClosedPromise].promise, resolverFn, resolverFn)\n  return nop\n}\nfunction finished(stream, opts) {\n  var _opts\n  let autoCleanup = false\n  if (opts === null) {\n    opts = kEmptyObject\n  }\n  if ((_opts = opts) !== null && _opts !== undefined && _opts.cleanup) {\n    validateBoolean(opts.cleanup, 'cleanup')\n    autoCleanup = opts.cleanup\n  }\n  return new Promise((resolve, reject) => {\n    const cleanup = eos(stream, opts, (err) => {\n      if (autoCleanup) {\n        cleanup()\n      }\n      if (err) {\n        reject(err)\n      } else {\n        resolve()\n      }\n    })\n  })\n}\nmodule.exports = eos\nmodule.exports.finished = finished\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst { PromisePrototypeThen, SymbolAsyncIterator, SymbolIterator } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_NULL_VALUES } = require('../../ours/errors').codes\nfunction from(Readable, iterable, opts) {\n  let iterator\n  if (typeof iterable === 'string' || iterable instanceof Buffer) {\n    return new Readable({\n      objectMode: true,\n      ...opts,\n      read() {\n        this.push(iterable)\n        this.push(null)\n      }\n    })\n  }\n  let isAsync\n  if (iterable && iterable[SymbolAsyncIterator]) {\n    isAsync = true\n    iterator = iterable[SymbolAsyncIterator]()\n  } else if (iterable && iterable[SymbolIterator]) {\n    isAsync = false\n    iterator = iterable[SymbolIterator]()\n  } else {\n    throw new ERR_INVALID_ARG_TYPE('iterable', ['Iterable'], iterable)\n  }\n  const readable = new Readable({\n    objectMode: true,\n    highWaterMark: 1,\n    // TODO(ronag): What options should be allowed?\n    ...opts\n  })\n\n  // Flag to protect against _read\n  // being called before last iteration completion.\n  let reading = false\n  readable._read = function () {\n    if (!reading) {\n      reading = true\n      next()\n    }\n  }\n  readable._destroy = function (error, cb) {\n    PromisePrototypeThen(\n      close(error),\n      () => process.nextTick(cb, error),\n      // nextTick is here in case cb throws\n      (e) => process.nextTick(cb, e || error)\n    )\n  }\n  async function close(error) {\n    const hadError = error !== undefined && error !== null\n    const hasThrow = typeof iterator.throw === 'function'\n    if (hadError && hasThrow) {\n      const { value, done } = await iterator.throw(error)\n      await value\n      if (done) {\n        return\n      }\n    }\n    if (typeof iterator.return === 'function') {\n      const { value } = await iterator.return()\n      await value\n    }\n  }\n  async function next() {\n    for (;;) {\n      try {\n        const { value, done } = isAsync ? await iterator.next() : iterator.next()\n        if (done) {\n          readable.push(null)\n        } else {\n          const res = value && typeof value.then === 'function' ? await value : value\n          if (res === null) {\n            reading = false\n            throw new ERR_STREAM_NULL_VALUES()\n          } else if (readable.push(res)) {\n            continue\n          } else {\n            reading = false\n          }\n        }\n      } catch (err) {\n        readable.destroy(err)\n      }\n      break\n    }\n  }\n  return readable\n}\nmodule.exports = from\n","'use strict'\n\nconst { ArrayIsArray, ObjectSetPrototypeOf } = require('../../ours/primordials')\nconst { EventEmitter: EE } = require('events')\nfunction Stream(opts) {\n  EE.call(this, opts)\n}\nObjectSetPrototypeOf(Stream.prototype, EE.prototype)\nObjectSetPrototypeOf(Stream, EE)\nStream.prototype.pipe = function (dest, options) {\n  const source = this\n  function ondata(chunk) {\n    if (dest.writable && dest.write(chunk) === false && source.pause) {\n      source.pause()\n    }\n  }\n  source.on('data', ondata)\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume()\n    }\n  }\n  dest.on('drain', ondrain)\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend)\n    source.on('close', onclose)\n  }\n  let didOnEnd = false\n  function onend() {\n    if (didOnEnd) return\n    didOnEnd = true\n    dest.end()\n  }\n  function onclose() {\n    if (didOnEnd) return\n    didOnEnd = true\n    if (typeof dest.destroy === 'function') dest.destroy()\n  }\n\n  // Don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup()\n    if (EE.listenerCount(this, 'error') === 0) {\n      this.emit('error', er)\n    }\n  }\n  prependListener(source, 'error', onerror)\n  prependListener(dest, 'error', onerror)\n\n  // Remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata)\n    dest.removeListener('drain', ondrain)\n    source.removeListener('end', onend)\n    source.removeListener('close', onclose)\n    source.removeListener('error', onerror)\n    dest.removeListener('error', onerror)\n    source.removeListener('end', cleanup)\n    source.removeListener('close', cleanup)\n    dest.removeListener('close', cleanup)\n  }\n  source.on('end', cleanup)\n  source.on('close', cleanup)\n  dest.on('close', cleanup)\n  dest.emit('pipe', source)\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest\n}\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn)\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn)\n  else if (ArrayIsArray(emitter._events[event])) emitter._events[event].unshift(fn)\n  else emitter._events[event] = [fn, emitter._events[event]]\n}\nmodule.exports = {\n  Stream,\n  prependListener\n}\n","'use strict'\n\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst {\n  codes: { ERR_INVALID_ARG_VALUE, ERR_INVALID_ARG_TYPE, ERR_MISSING_ARGS, ERR_OUT_OF_RANGE },\n  AbortError\n} = require('../../ours/errors')\nconst { validateAbortSignal, validateInteger, validateObject } = require('../validators')\nconst kWeakHandler = require('../../ours/primordials').Symbol('kWeak')\nconst { finished } = require('./end-of-stream')\nconst staticCompose = require('./compose')\nconst { addAbortSignalNoValidate } = require('./add-abort-signal')\nconst { isWritable, isNodeStream } = require('./utils')\nconst {\n  ArrayPrototypePush,\n  MathFloor,\n  Number,\n  NumberIsNaN,\n  Promise,\n  PromiseReject,\n  PromisePrototypeThen,\n  Symbol\n} = require('../../ours/primordials')\nconst kEmpty = Symbol('kEmpty')\nconst kEof = Symbol('kEof')\nfunction compose(stream, options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  if (isNodeStream(stream) && !isWritable(stream)) {\n    throw new ERR_INVALID_ARG_VALUE('stream', stream, 'must be writable')\n  }\n  const composedStream = staticCompose(this, stream)\n  if (options !== null && options !== undefined && options.signal) {\n    // Not validating as we already validated before\n    addAbortSignalNoValidate(options.signal, composedStream)\n  }\n  return composedStream\n}\nfunction map(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let concurrency = 1\n  if ((options === null || options === undefined ? undefined : options.concurrency) != null) {\n    concurrency = MathFloor(options.concurrency)\n  }\n  validateInteger(concurrency, 'concurrency', 1)\n  return async function* map() {\n    var _options$signal, _options$signal2\n    const ac = new AbortController()\n    const stream = this\n    const queue = []\n    const signal = ac.signal\n    const signalOpt = {\n      signal\n    }\n    const abort = () => ac.abort()\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal = options.signal) !== null &&\n      _options$signal !== undefined &&\n      _options$signal.aborted\n    ) {\n      abort()\n    }\n    options === null || options === undefined\n      ? undefined\n      : (_options$signal2 = options.signal) === null || _options$signal2 === undefined\n      ? undefined\n      : _options$signal2.addEventListener('abort', abort)\n    let next\n    let resume\n    let done = false\n    function onDone() {\n      done = true\n    }\n    async function pump() {\n      try {\n        for await (let val of stream) {\n          var _val\n          if (done) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          try {\n            val = fn(val, signalOpt)\n          } catch (err) {\n            val = PromiseReject(err)\n          }\n          if (val === kEmpty) {\n            continue\n          }\n          if (typeof ((_val = val) === null || _val === undefined ? undefined : _val.catch) === 'function') {\n            val.catch(onDone)\n          }\n          queue.push(val)\n          if (next) {\n            next()\n            next = null\n          }\n          if (!done && queue.length && queue.length >= concurrency) {\n            await new Promise((resolve) => {\n              resume = resolve\n            })\n          }\n        }\n        queue.push(kEof)\n      } catch (err) {\n        const val = PromiseReject(err)\n        PromisePrototypeThen(val, undefined, onDone)\n        queue.push(val)\n      } finally {\n        var _options$signal3\n        done = true\n        if (next) {\n          next()\n          next = null\n        }\n        options === null || options === undefined\n          ? undefined\n          : (_options$signal3 = options.signal) === null || _options$signal3 === undefined\n          ? undefined\n          : _options$signal3.removeEventListener('abort', abort)\n      }\n    }\n    pump()\n    try {\n      while (true) {\n        while (queue.length > 0) {\n          const val = await queue[0]\n          if (val === kEof) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          if (val !== kEmpty) {\n            yield val\n          }\n          queue.shift()\n          if (resume) {\n            resume()\n            resume = null\n          }\n        }\n        await new Promise((resolve) => {\n          next = resolve\n        })\n      }\n    } finally {\n      ac.abort()\n      done = true\n      if (resume) {\n        resume()\n        resume = null\n      }\n    }\n  }.call(this)\n}\nfunction asIndexedPairs(options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  return async function* asIndexedPairs() {\n    let index = 0\n    for await (const val of this) {\n      var _options$signal4\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal4 = options.signal) !== null &&\n        _options$signal4 !== undefined &&\n        _options$signal4.aborted\n      ) {\n        throw new AbortError({\n          cause: options.signal.reason\n        })\n      }\n      yield [index++, val]\n    }\n  }.call(this)\n}\nasync function some(fn, options = undefined) {\n  for await (const unused of filter.call(this, fn, options)) {\n    return true\n  }\n  return false\n}\nasync function every(fn, options = undefined) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  // https://en.wikipedia.org/wiki/De_Morgan%27s_laws\n  return !(await some.call(\n    this,\n    async (...args) => {\n      return !(await fn(...args))\n    },\n    options\n  ))\n}\nasync function find(fn, options) {\n  for await (const result of filter.call(this, fn, options)) {\n    return result\n  }\n  return undefined\n}\nasync function forEach(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function forEachFn(value, options) {\n    await fn(value, options)\n    return kEmpty\n  }\n  // eslint-disable-next-line no-unused-vars\n  for await (const unused of map.call(this, forEachFn, options));\n}\nfunction filter(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function filterFn(value, options) {\n    if (await fn(value, options)) {\n      return value\n    }\n    return kEmpty\n  }\n  return map.call(this, filterFn, options)\n}\n\n// Specific to provide better error to reduce since the argument is only\n// missing if the stream has no items in it - but the code is still appropriate\nclass ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS {\n  constructor() {\n    super('reduce')\n    this.message = 'Reduce of an empty stream requires an initial value'\n  }\n}\nasync function reduce(reducer, initialValue, options) {\n  var _options$signal5\n  if (typeof reducer !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('reducer', ['Function', 'AsyncFunction'], reducer)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let hasInitialValue = arguments.length > 1\n  if (\n    options !== null &&\n    options !== undefined &&\n    (_options$signal5 = options.signal) !== null &&\n    _options$signal5 !== undefined &&\n    _options$signal5.aborted\n  ) {\n    const err = new AbortError(undefined, {\n      cause: options.signal.reason\n    })\n    this.once('error', () => {}) // The error is already propagated\n    await finished(this.destroy(err))\n    throw err\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  if (options !== null && options !== undefined && options.signal) {\n    const opts = {\n      once: true,\n      [kWeakHandler]: this\n    }\n    options.signal.addEventListener('abort', () => ac.abort(), opts)\n  }\n  let gotAnyItemFromStream = false\n  try {\n    for await (const value of this) {\n      var _options$signal6\n      gotAnyItemFromStream = true\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal6 = options.signal) !== null &&\n        _options$signal6 !== undefined &&\n        _options$signal6.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (!hasInitialValue) {\n        initialValue = value\n        hasInitialValue = true\n      } else {\n        initialValue = await reducer(initialValue, value, {\n          signal\n        })\n      }\n    }\n    if (!gotAnyItemFromStream && !hasInitialValue) {\n      throw new ReduceAwareErrMissingArgs()\n    }\n  } finally {\n    ac.abort()\n  }\n  return initialValue\n}\nasync function toArray(options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  const result = []\n  for await (const val of this) {\n    var _options$signal7\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal7 = options.signal) !== null &&\n      _options$signal7 !== undefined &&\n      _options$signal7.aborted\n    ) {\n      throw new AbortError(undefined, {\n        cause: options.signal.reason\n      })\n    }\n    ArrayPrototypePush(result, val)\n  }\n  return result\n}\nfunction flatMap(fn, options) {\n  const values = map.call(this, fn, options)\n  return async function* flatMap() {\n    for await (const val of values) {\n      yield* val\n    }\n  }.call(this)\n}\nfunction toIntegerOrInfinity(number) {\n  // We coerce here to align with the spec\n  // https://github.com/tc39/proposal-iterator-helpers/issues/169\n  number = Number(number)\n  if (NumberIsNaN(number)) {\n    return 0\n  }\n  if (number < 0) {\n    throw new ERR_OUT_OF_RANGE('number', '>= 0', number)\n  }\n  return number\n}\nfunction drop(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* drop() {\n    var _options$signal8\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal8 = options.signal) !== null &&\n      _options$signal8 !== undefined &&\n      _options$signal8.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal9\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal9 = options.signal) !== null &&\n        _options$signal9 !== undefined &&\n        _options$signal9.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- <= 0) {\n        yield val\n      }\n    }\n  }.call(this)\n}\nfunction take(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* take() {\n    var _options$signal10\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal10 = options.signal) !== null &&\n      _options$signal10 !== undefined &&\n      _options$signal10.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal11\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal11 = options.signal) !== null &&\n        _options$signal11 !== undefined &&\n        _options$signal11.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- > 0) {\n        yield val\n      } else {\n        return\n      }\n    }\n  }.call(this)\n}\nmodule.exports.streamReturningOperators = {\n  asIndexedPairs,\n  drop,\n  filter,\n  flatMap,\n  map,\n  take,\n  compose\n}\nmodule.exports.promiseReturningOperators = {\n  every,\n  forEach,\n  reduce,\n  toArray,\n  some,\n  find\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf } = require('../../ours/primordials')\nmodule.exports = PassThrough\nconst Transform = require('./transform')\nObjectSetPrototypeOf(PassThrough.prototype, Transform.prototype)\nObjectSetPrototypeOf(PassThrough, Transform)\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options)\n  Transform.call(this, options)\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk)\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { ArrayIsArray, Promise, SymbolAsyncIterator } = require('../../ours/primordials')\nconst eos = require('./end-of-stream')\nconst { once } = require('../../ours/util')\nconst destroyImpl = require('./destroy')\nconst Duplex = require('./duplex')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_INVALID_RETURN_VALUE,\n    ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED,\n    ERR_STREAM_PREMATURE_CLOSE\n  },\n  AbortError\n} = require('../../ours/errors')\nconst { validateFunction, validateAbortSignal } = require('../validators')\nconst {\n  isIterable,\n  isReadable,\n  isReadableNodeStream,\n  isNodeStream,\n  isTransformStream,\n  isWebStream,\n  isReadableStream,\n  isReadableEnded\n} = require('./utils')\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nlet PassThrough\nlet Readable\nfunction destroyer(stream, reading, writing) {\n  let finished = false\n  stream.on('close', () => {\n    finished = true\n  })\n  const cleanup = eos(\n    stream,\n    {\n      readable: reading,\n      writable: writing\n    },\n    (err) => {\n      finished = !err\n    }\n  )\n  return {\n    destroy: (err) => {\n      if (finished) return\n      finished = true\n      destroyImpl.destroyer(stream, err || new ERR_STREAM_DESTROYED('pipe'))\n    },\n    cleanup\n  }\n}\nfunction popCallback(streams) {\n  // Streams should never be an empty array. It should always contain at least\n  // a single stream. Therefore optimize for the average case instead of\n  // checking for length === 0 as well.\n  validateFunction(streams[streams.length - 1], 'streams[stream.length - 1]')\n  return streams.pop()\n}\nfunction makeAsyncIterable(val) {\n  if (isIterable(val)) {\n    return val\n  } else if (isReadableNodeStream(val)) {\n    // Legacy streams are not Iterable.\n    return fromReadable(val)\n  }\n  throw new ERR_INVALID_ARG_TYPE('val', ['Readable', 'Iterable', 'AsyncIterable'], val)\n}\nasync function* fromReadable(val) {\n  if (!Readable) {\n    Readable = require('./readable')\n  }\n  yield* Readable.prototype[SymbolAsyncIterator].call(val)\n}\nasync function pumpToNode(iterable, writable, finish, { end }) {\n  let error\n  let onresolve = null\n  const resume = (err) => {\n    if (err) {\n      error = err\n    }\n    if (onresolve) {\n      const callback = onresolve\n      onresolve = null\n      callback()\n    }\n  }\n  const wait = () =>\n    new Promise((resolve, reject) => {\n      if (error) {\n        reject(error)\n      } else {\n        onresolve = () => {\n          if (error) {\n            reject(error)\n          } else {\n            resolve()\n          }\n        }\n      }\n    })\n  writable.on('drain', resume)\n  const cleanup = eos(\n    writable,\n    {\n      readable: false\n    },\n    resume\n  )\n  try {\n    if (writable.writableNeedDrain) {\n      await wait()\n    }\n    for await (const chunk of iterable) {\n      if (!writable.write(chunk)) {\n        await wait()\n      }\n    }\n    if (end) {\n      writable.end()\n    }\n    await wait()\n    finish()\n  } catch (err) {\n    finish(error !== err ? aggregateTwoErrors(error, err) : err)\n  } finally {\n    cleanup()\n    writable.off('drain', resume)\n  }\n}\nasync function pumpToWeb(readable, writable, finish, { end }) {\n  if (isTransformStream(writable)) {\n    writable = writable.writable\n  }\n  // https://streams.spec.whatwg.org/#example-manual-write-with-backpressure\n  const writer = writable.getWriter()\n  try {\n    for await (const chunk of readable) {\n      await writer.ready\n      writer.write(chunk).catch(() => {})\n    }\n    await writer.ready\n    if (end) {\n      await writer.close()\n    }\n    finish()\n  } catch (err) {\n    try {\n      await writer.abort(err)\n      finish(err)\n    } catch (err) {\n      finish(err)\n    }\n  }\n}\nfunction pipeline(...streams) {\n  return pipelineImpl(streams, once(popCallback(streams)))\n}\nfunction pipelineImpl(streams, callback, opts) {\n  if (streams.length === 1 && ArrayIsArray(streams[0])) {\n    streams = streams[0]\n  }\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  const outerSignal = opts === null || opts === undefined ? undefined : opts.signal\n\n  // Need to cleanup event listeners if last stream is readable\n  // https://github.com/nodejs/node/issues/35452\n  const lastStreamCleanup = []\n  validateAbortSignal(outerSignal, 'options.signal')\n  function abort() {\n    finishImpl(new AbortError())\n  }\n  outerSignal === null || outerSignal === undefined ? undefined : outerSignal.addEventListener('abort', abort)\n  let error\n  let value\n  const destroys = []\n  let finishCount = 0\n  function finish(err) {\n    finishImpl(err, --finishCount === 0)\n  }\n  function finishImpl(err, final) {\n    if (err && (!error || error.code === 'ERR_STREAM_PREMATURE_CLOSE')) {\n      error = err\n    }\n    if (!error && !final) {\n      return\n    }\n    while (destroys.length) {\n      destroys.shift()(error)\n    }\n    outerSignal === null || outerSignal === undefined ? undefined : outerSignal.removeEventListener('abort', abort)\n    ac.abort()\n    if (final) {\n      if (!error) {\n        lastStreamCleanup.forEach((fn) => fn())\n      }\n      process.nextTick(callback, error, value)\n    }\n  }\n  let ret\n  for (let i = 0; i < streams.length; i++) {\n    const stream = streams[i]\n    const reading = i < streams.length - 1\n    const writing = i > 0\n    const end = reading || (opts === null || opts === undefined ? undefined : opts.end) !== false\n    const isLastStream = i === streams.length - 1\n    if (isNodeStream(stream)) {\n      if (end) {\n        const { destroy, cleanup } = destroyer(stream, reading, writing)\n        destroys.push(destroy)\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n\n      // Catch stream errors that occur after pipe/pump has completed.\n      function onError(err) {\n        if (err && err.name !== 'AbortError' && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n          finish(err)\n        }\n      }\n      stream.on('error', onError)\n      if (isReadable(stream) && isLastStream) {\n        lastStreamCleanup.push(() => {\n          stream.removeListener('error', onError)\n        })\n      }\n    }\n    if (i === 0) {\n      if (typeof stream === 'function') {\n        ret = stream({\n          signal\n        })\n        if (!isIterable(ret)) {\n          throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or Stream', 'source', ret)\n        }\n      } else if (isIterable(stream) || isReadableNodeStream(stream) || isTransformStream(stream)) {\n        ret = stream\n      } else {\n        ret = Duplex.from(stream)\n      }\n    } else if (typeof stream === 'function') {\n      if (isTransformStream(ret)) {\n        var _ret\n        ret = makeAsyncIterable((_ret = ret) === null || _ret === undefined ? undefined : _ret.readable)\n      } else {\n        ret = makeAsyncIterable(ret)\n      }\n      ret = stream(ret, {\n        signal\n      })\n      if (reading) {\n        if (!isIterable(ret, true)) {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable', `transform[${i - 1}]`, ret)\n        }\n      } else {\n        var _ret2\n        if (!PassThrough) {\n          PassThrough = require('./passthrough')\n        }\n\n        // If the last argument to pipeline is not a stream\n        // we must create a proxy stream so that pipeline(...)\n        // always returns a stream which can be further\n        // composed through `.pipe(stream)`.\n\n        const pt = new PassThrough({\n          objectMode: true\n        })\n\n        // Handle Promises/A+ spec, `then` could be a getter that throws on\n        // second use.\n        const then = (_ret2 = ret) === null || _ret2 === undefined ? undefined : _ret2.then\n        if (typeof then === 'function') {\n          finishCount++\n          then.call(\n            ret,\n            (val) => {\n              value = val\n              if (val != null) {\n                pt.write(val)\n              }\n              if (end) {\n                pt.end()\n              }\n              process.nextTick(finish)\n            },\n            (err) => {\n              pt.destroy(err)\n              process.nextTick(finish, err)\n            }\n          )\n        } else if (isIterable(ret, true)) {\n          finishCount++\n          pumpToNode(ret, pt, finish, {\n            end\n          })\n        } else if (isReadableStream(ret) || isTransformStream(ret)) {\n          const toRead = ret.readable || ret\n          finishCount++\n          pumpToNode(toRead, pt, finish, {\n            end\n          })\n        } else {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable or Promise', 'destination', ret)\n        }\n        ret = pt\n        const { destroy, cleanup } = destroyer(ret, false, true)\n        destroys.push(destroy)\n        if (isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n    } else if (isNodeStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount += 2\n        const cleanup = pipe(ret, stream, finish, {\n          end\n        })\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      } else if (isTransformStream(ret) || isReadableStream(ret)) {\n        const toRead = ret.readable || ret\n        finishCount++\n        pumpToNode(toRead, stream, finish, {\n          end\n        })\n      } else if (isIterable(ret)) {\n        finishCount++\n        pumpToNode(ret, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else if (isWebStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount++\n        pumpToWeb(makeAsyncIterable(ret), stream, finish, {\n          end\n        })\n      } else if (isReadableStream(ret) || isIterable(ret)) {\n        finishCount++\n        pumpToWeb(ret, stream, finish, {\n          end\n        })\n      } else if (isTransformStream(ret)) {\n        finishCount++\n        pumpToWeb(ret.readable, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else {\n      ret = Duplex.from(stream)\n    }\n  }\n  if (\n    (signal !== null && signal !== undefined && signal.aborted) ||\n    (outerSignal !== null && outerSignal !== undefined && outerSignal.aborted)\n  ) {\n    process.nextTick(abort)\n  }\n  return ret\n}\nfunction pipe(src, dst, finish, { end }) {\n  let ended = false\n  dst.on('close', () => {\n    if (!ended) {\n      // Finish if the destination closes before the source has completed.\n      finish(new ERR_STREAM_PREMATURE_CLOSE())\n    }\n  })\n  src.pipe(dst, {\n    end: false\n  }) // If end is true we already will have a listener to end dst.\n\n  if (end) {\n    // Compat. Before node v10.12.0 stdio used to throw an error so\n    // pipe() did/does not end() stdio destinations.\n    // Now they allow it but \"secretly\" don't close the underlying fd.\n\n    function endFn() {\n      ended = true\n      dst.end()\n    }\n    if (isReadableEnded(src)) {\n      // End the destination if the source has already ended.\n      process.nextTick(endFn)\n    } else {\n      src.once('end', endFn)\n    }\n  } else {\n    finish()\n  }\n  eos(\n    src,\n    {\n      readable: true,\n      writable: false\n    },\n    (err) => {\n      const rState = src._readableState\n      if (\n        err &&\n        err.code === 'ERR_STREAM_PREMATURE_CLOSE' &&\n        rState &&\n        rState.ended &&\n        !rState.errored &&\n        !rState.errorEmitted\n      ) {\n        // Some readable streams will emit 'close' before 'end'. However, since\n        // this is on the readable side 'end' should still be emitted if the\n        // stream has been ended and no error emitted. This should be allowed in\n        // favor of backwards compatibility. Since the stream is piped to a\n        // destination this should not result in any observable difference.\n        // We don't need to check if this is a writable premature close since\n        // eos will only fail with premature close on the reading side for\n        // duplex streams.\n        src.once('end', finish).once('error', finish)\n      } else {\n        finish(err)\n      }\n    }\n  )\n  return eos(\n    dst,\n    {\n      readable: false,\n      writable: true\n    },\n    finish\n  )\n}\nmodule.exports = {\n  pipelineImpl,\n  pipeline\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst {\n  ArrayPrototypeIndexOf,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberParseInt,\n  ObjectDefineProperties,\n  ObjectKeys,\n  ObjectSetPrototypeOf,\n  Promise,\n  SafeSet,\n  SymbolAsyncIterator,\n  Symbol\n} = require('../../ours/primordials')\nmodule.exports = Readable\nReadable.ReadableState = ReadableState\nconst { EventEmitter: EE } = require('events')\nconst { Stream, prependListener } = require('./legacy')\nconst { Buffer } = require('buffer')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst eos = require('./end-of-stream')\nlet debug = require('../../ours/util').debuglog('stream', (fn) => {\n  debug = fn\n})\nconst BufferList = require('./buffer_list')\nconst destroyImpl = require('./destroy')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_OUT_OF_RANGE,\n    ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT\n  }\n} = require('../../ours/errors')\nconst { validateObject } = require('../validators')\nconst kPaused = Symbol('kPaused')\nconst { StringDecoder } = require('string_decoder')\nconst from = require('./from')\nObjectSetPrototypeOf(Readable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Readable, Stream)\nconst nop = () => {}\nconst { errorOrDestroy } = destroyImpl\nfunction ReadableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away.\n  this.objectMode = !!(options && options.objectMode)\n  if (isDuplex) this.objectMode = this.objectMode || !!(options && options.readableObjectMode)\n\n  // The point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift().\n  this.buffer = new BufferList()\n  this.length = 0\n  this.pipes = []\n  this.flowing = null\n  this.ended = false\n  this.endEmitted = false\n  this.reading = false\n\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  this.constructed = true\n\n  // A flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true\n\n  // Whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false\n  this.emittedReadable = false\n  this.readableListening = false\n  this.resumeScheduled = false\n  this[kPaused] = null\n\n  // True if the error was already emitted and should not be thrown again.\n  this.errorEmitted = false\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = !options || options.emitClose !== false\n\n  // Should .destroy() be called after 'end' (and potentially 'finish').\n  this.autoDestroy = !options || options.autoDestroy !== false\n\n  // Has it been destroyed.\n  this.destroyed = false\n\n  // Indicates whether the stream has errored. When true no further\n  // _read calls, 'data' or 'readable' events should occur. This is needed\n  // since when autoDestroy is disabled we need a way to tell whether the\n  // stream has failed.\n  this.errored = null\n\n  // Indicates whether the stream has finished destroying.\n  this.closed = false\n\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  this.closeEmitted = false\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Ref the piped dest which we need a drain event on it\n  // type: null | Writable | Set<Writable>.\n  this.awaitDrainWriters = null\n  this.multiAwaitDrain = false\n\n  // If true, a maybeReadMore has been scheduled.\n  this.readingMore = false\n  this.dataEmitted = false\n  this.decoder = null\n  this.encoding = null\n  if (options && options.encoding) {\n    this.decoder = new StringDecoder(options.encoding)\n    this.encoding = options.encoding\n  }\n}\nfunction Readable(options) {\n  if (!(this instanceof Readable)) return new Readable(options)\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  this._readableState = new ReadableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal && !isDuplex) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    if (this._readableState.needReadable) {\n      maybeReadMore(this, this._readableState)\n    }\n  })\n}\nReadable.prototype.destroy = destroyImpl.destroy\nReadable.prototype._undestroy = destroyImpl.undestroy\nReadable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nReadable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, false)\n}\n\n// Unshift should *always* be something directly out of read().\nReadable.prototype.unshift = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, true)\n}\nfunction readableAddChunk(stream, chunk, encoding, addToFront) {\n  debug('readableAddChunk', chunk)\n  const state = stream._readableState\n  let err\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding\n      if (state.encoding !== encoding) {\n        if (addToFront && state.encoding) {\n          // When unshifting, if state.encoding is set, we have to save\n          // the string in the BufferList with the state encoding.\n          chunk = Buffer.from(chunk, encoding).toString(state.encoding)\n        } else {\n          chunk = Buffer.from(chunk, encoding)\n          encoding = ''\n        }\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = ''\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = ''\n    } else if (chunk != null) {\n      err = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  if (err) {\n    errorOrDestroy(stream, err)\n  } else if (chunk === null) {\n    state.reading = false\n    onEofChunk(stream, state)\n  } else if (state.objectMode || (chunk && chunk.length > 0)) {\n    if (addToFront) {\n      if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT())\n      else if (state.destroyed || state.errored) return false\n      else addChunk(stream, state, chunk, true)\n    } else if (state.ended) {\n      errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF())\n    } else if (state.destroyed || state.errored) {\n      return false\n    } else {\n      state.reading = false\n      if (state.decoder && !encoding) {\n        chunk = state.decoder.write(chunk)\n        if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false)\n        else maybeReadMore(stream, state)\n      } else {\n        addChunk(stream, state, chunk, false)\n      }\n    }\n  } else if (!addToFront) {\n    state.reading = false\n    maybeReadMore(stream, state)\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0)\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync && stream.listenerCount('data') > 0) {\n    // Use the guard to avoid creating `Set()` repeatedly\n    // when we have multiple pipes.\n    if (state.multiAwaitDrain) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n    state.dataEmitted = true\n    stream.emit('data', chunk)\n  } else {\n    // Update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length\n    if (addToFront) state.buffer.unshift(chunk)\n    else state.buffer.push(chunk)\n    if (state.needReadable) emitReadable(stream)\n  }\n  maybeReadMore(stream, state)\n}\nReadable.prototype.isPaused = function () {\n  const state = this._readableState\n  return state[kPaused] === true || state.flowing === false\n}\n\n// Backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  const decoder = new StringDecoder(enc)\n  this._readableState.decoder = decoder\n  // If setEncoding(null), decoder.encoding equals utf8.\n  this._readableState.encoding = this._readableState.decoder.encoding\n  const buffer = this._readableState.buffer\n  // Iterate over current buffer to convert already stored Buffers:\n  let content = ''\n  for (const data of buffer) {\n    content += decoder.write(data)\n  }\n  buffer.clear()\n  if (content !== '') buffer.push(content)\n  this._readableState.length = content.length\n  return this\n}\n\n// Don't raise the hwm > 1GB.\nconst MAX_HWM = 0x40000000\nfunction computeNewHighWaterMark(n) {\n  if (n > MAX_HWM) {\n    throw new ERR_OUT_OF_RANGE('size', '<= 1GiB', n)\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts.\n    n--\n    n |= n >>> 1\n    n |= n >>> 2\n    n |= n >>> 4\n    n |= n >>> 8\n    n |= n >>> 16\n    n++\n  }\n  return n\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || (state.length === 0 && state.ended)) return 0\n  if (state.objectMode) return 1\n  if (NumberIsNaN(n)) {\n    // Only flow one buffer at a time.\n    if (state.flowing && state.length) return state.buffer.first().length\n    return state.length\n  }\n  if (n <= state.length) return n\n  return state.ended ? state.length : 0\n}\n\n// You can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n)\n  // Same as parseInt(undefined, 10), however V8 7.3 performance regressed\n  // in this scenario, so we are doing it manually.\n  if (n === undefined) {\n    n = NaN\n  } else if (!NumberIsInteger(n)) {\n    n = NumberParseInt(n, 10)\n  }\n  const state = this._readableState\n  const nOrig = n\n\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n)\n  if (n !== 0) state.emittedReadable = false\n\n  // If we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (\n    n === 0 &&\n    state.needReadable &&\n    ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)\n  ) {\n    debug('read: emitReadable', state.length, state.ended)\n    if (state.length === 0 && state.ended) endReadable(this)\n    else emitReadable(this)\n    return null\n  }\n  n = howMuchToRead(n, state)\n\n  // If we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this)\n    return null\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  let doRead = state.needReadable\n  debug('need readable', doRead)\n\n  // If we currently have less than the highWaterMark, then also read some.\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true\n    debug('length less than watermark', doRead)\n  }\n\n  // However, if we've ended, then there's no point, if we're already\n  // reading, then it's unnecessary, if we're constructing we have to wait,\n  // and if we're destroyed or errored, then it's not allowed,\n  if (state.ended || state.reading || state.destroyed || state.errored || !state.constructed) {\n    doRead = false\n    debug('reading, ended or constructing', doRead)\n  } else if (doRead) {\n    debug('do read')\n    state.reading = true\n    state.sync = true\n    // If the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true\n\n    // Call internal read method\n    try {\n      this._read(state.highWaterMark)\n    } catch (err) {\n      errorOrDestroy(this, err)\n    }\n    state.sync = false\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state)\n  }\n  let ret\n  if (n > 0) ret = fromList(n, state)\n  else ret = null\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark\n    n = 0\n  } else {\n    state.length -= n\n    if (state.multiAwaitDrain) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this)\n  }\n  if (ret !== null && !state.errorEmitted && !state.closeEmitted) {\n    state.dataEmitted = true\n    this.emit('data', ret)\n  }\n  return ret\n}\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk')\n  if (state.ended) return\n  if (state.decoder) {\n    const chunk = state.decoder.end()\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk)\n      state.length += state.objectMode ? 1 : chunk.length\n    }\n  }\n  state.ended = true\n  if (state.sync) {\n    // If we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call.\n    emitReadable(stream)\n  } else {\n    // Emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false\n    state.emittedReadable = true\n    // We have to emit readable now that we are EOF. Modules\n    // in the ecosystem (e.g. dicer) rely on this event being sync.\n    emitReadable_(stream)\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  const state = stream._readableState\n  debug('emitReadable', state.needReadable, state.emittedReadable)\n  state.needReadable = false\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing)\n    state.emittedReadable = true\n    process.nextTick(emitReadable_, stream)\n  }\n}\nfunction emitReadable_(stream) {\n  const state = stream._readableState\n  debug('emitReadable_', state.destroyed, state.length, state.ended)\n  if (!state.destroyed && !state.errored && (state.length || state.ended)) {\n    stream.emit('readable')\n    state.emittedReadable = false\n  }\n\n  // The stream needs another readable event if:\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark\n  flow(stream)\n}\n\n// At this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore && state.constructed) {\n    state.readingMore = true\n    process.nextTick(maybeReadMore_, stream, state)\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (\n    !state.reading &&\n    !state.ended &&\n    (state.length < state.highWaterMark || (state.flowing && state.length === 0))\n  ) {\n    const len = state.length\n    debug('maybeReadMore read 0')\n    stream.read(0)\n    if (len === state.length)\n      // Didn't get any data, stop spinning.\n      break\n  }\n  state.readingMore = false\n}\n\n// Abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_read()')\n}\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  const src = this\n  const state = this._readableState\n  if (state.pipes.length === 1) {\n    if (!state.multiAwaitDrain) {\n      state.multiAwaitDrain = true\n      state.awaitDrainWriters = new SafeSet(state.awaitDrainWriters ? [state.awaitDrainWriters] : [])\n    }\n  }\n  state.pipes.push(dest)\n  debug('pipe count=%d opts=%j', state.pipes.length, pipeOpts)\n  const doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr\n  const endFn = doEnd ? onend : unpipe\n  if (state.endEmitted) process.nextTick(endFn)\n  else src.once('end', endFn)\n  dest.on('unpipe', onunpipe)\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe')\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true\n        cleanup()\n      }\n    }\n  }\n  function onend() {\n    debug('onend')\n    dest.end()\n  }\n  let ondrain\n  let cleanedUp = false\n  function cleanup() {\n    debug('cleanup')\n    // Cleanup event handlers once the pipe is broken.\n    dest.removeListener('close', onclose)\n    dest.removeListener('finish', onfinish)\n    if (ondrain) {\n      dest.removeListener('drain', ondrain)\n    }\n    dest.removeListener('error', onerror)\n    dest.removeListener('unpipe', onunpipe)\n    src.removeListener('end', onend)\n    src.removeListener('end', unpipe)\n    src.removeListener('data', ondata)\n    cleanedUp = true\n\n    // If the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (ondrain && state.awaitDrainWriters && (!dest._writableState || dest._writableState.needDrain)) ondrain()\n  }\n  function pause() {\n    // If the user unpiped during `dest.write()`, it is possible\n    // to get stuck in a permanently paused state if that write\n    // also returned false.\n    // => Check whether `dest` is still a piping destination.\n    if (!cleanedUp) {\n      if (state.pipes.length === 1 && state.pipes[0] === dest) {\n        debug('false write response, pause', 0)\n        state.awaitDrainWriters = dest\n        state.multiAwaitDrain = false\n      } else if (state.pipes.length > 1 && state.pipes.includes(dest)) {\n        debug('false write response, pause', state.awaitDrainWriters.size)\n        state.awaitDrainWriters.add(dest)\n      }\n      src.pause()\n    }\n    if (!ondrain) {\n      // When the dest drains, it reduces the awaitDrain counter\n      // on the source.  This would be more elegant with a .once()\n      // handler in flow(), but adding and removing repeatedly is\n      // too slow.\n      ondrain = pipeOnDrain(src, dest)\n      dest.on('drain', ondrain)\n    }\n  }\n  src.on('data', ondata)\n  function ondata(chunk) {\n    debug('ondata')\n    const ret = dest.write(chunk)\n    debug('dest.write', ret)\n    if (ret === false) {\n      pause()\n    }\n  }\n\n  // If the dest has an error, then stop piping into it.\n  // However, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er)\n    unpipe()\n    dest.removeListener('error', onerror)\n    if (dest.listenerCount('error') === 0) {\n      const s = dest._writableState || dest._readableState\n      if (s && !s.errorEmitted) {\n        // User incorrectly emitted 'error' directly on the stream.\n        errorOrDestroy(dest, er)\n      } else {\n        dest.emit('error', er)\n      }\n    }\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror)\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish)\n    unpipe()\n  }\n  dest.once('close', onclose)\n  function onfinish() {\n    debug('onfinish')\n    dest.removeListener('close', onclose)\n    unpipe()\n  }\n  dest.once('finish', onfinish)\n  function unpipe() {\n    debug('unpipe')\n    src.unpipe(dest)\n  }\n\n  // Tell the dest that it's being piped to.\n  dest.emit('pipe', src)\n\n  // Start the flow if it hasn't been started already.\n\n  if (dest.writableNeedDrain === true) {\n    if (state.flowing) {\n      pause()\n    }\n  } else if (!state.flowing) {\n    debug('pipe resume')\n    src.resume()\n  }\n  return dest\n}\nfunction pipeOnDrain(src, dest) {\n  return function pipeOnDrainFunctionResult() {\n    const state = src._readableState\n\n    // `ondrain` will call directly,\n    // `this` maybe not a reference to dest,\n    // so we use the real dest here.\n    if (state.awaitDrainWriters === dest) {\n      debug('pipeOnDrain', 1)\n      state.awaitDrainWriters = null\n    } else if (state.multiAwaitDrain) {\n      debug('pipeOnDrain', state.awaitDrainWriters.size)\n      state.awaitDrainWriters.delete(dest)\n    }\n    if ((!state.awaitDrainWriters || state.awaitDrainWriters.size === 0) && src.listenerCount('data')) {\n      src.resume()\n    }\n  }\n}\nReadable.prototype.unpipe = function (dest) {\n  const state = this._readableState\n  const unpipeInfo = {\n    hasUnpiped: false\n  }\n\n  // If we're not piping anywhere, then do nothing.\n  if (state.pipes.length === 0) return this\n  if (!dest) {\n    // remove all.\n    const dests = state.pipes\n    state.pipes = []\n    this.pause()\n    for (let i = 0; i < dests.length; i++)\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      })\n    return this\n  }\n\n  // Try to find the right one.\n  const index = ArrayPrototypeIndexOf(state.pipes, dest)\n  if (index === -1) return this\n  state.pipes.splice(index, 1)\n  if (state.pipes.length === 0) this.pause()\n  dest.emit('unpipe', this, unpipeInfo)\n  return this\n}\n\n// Set up data events if they are asked for\n// Ensure readable listeners eventually get something.\nReadable.prototype.on = function (ev, fn) {\n  const res = Stream.prototype.on.call(this, ev, fn)\n  const state = this._readableState\n  if (ev === 'data') {\n    // Update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0\n\n    // Try start flowing on next tick if stream isn't explicitly paused.\n    if (state.flowing !== false) this.resume()\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true\n      state.flowing = false\n      state.emittedReadable = false\n      debug('on readable', state.length, state.reading)\n      if (state.length) {\n        emitReadable(this)\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this)\n      }\n    }\n  }\n  return res\n}\nReadable.prototype.addListener = Readable.prototype.on\nReadable.prototype.removeListener = function (ev, fn) {\n  const res = Stream.prototype.removeListener.call(this, ev, fn)\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nReadable.prototype.off = Readable.prototype.removeListener\nReadable.prototype.removeAllListeners = function (ev) {\n  const res = Stream.prototype.removeAllListeners.apply(this, arguments)\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nfunction updateReadableListening(self) {\n  const state = self._readableState\n  state.readableListening = self.listenerCount('readable') > 0\n  if (state.resumeScheduled && state[kPaused] === false) {\n    // Flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true\n\n    // Crude way to check if we should resume.\n  } else if (self.listenerCount('data') > 0) {\n    self.resume()\n  } else if (!state.readableListening) {\n    state.flowing = null\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0')\n  self.read(0)\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  const state = this._readableState\n  if (!state.flowing) {\n    debug('resume')\n    // We flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume().\n    state.flowing = !state.readableListening\n    resume(this, state)\n  }\n  state[kPaused] = false\n  return this\n}\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true\n    process.nextTick(resume_, stream, state)\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading)\n  if (!state.reading) {\n    stream.read(0)\n  }\n  state.resumeScheduled = false\n  stream.emit('resume')\n  flow(stream)\n  if (state.flowing && !state.reading) stream.read(0)\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing)\n  if (this._readableState.flowing !== false) {\n    debug('pause')\n    this._readableState.flowing = false\n    this.emit('pause')\n  }\n  this._readableState[kPaused] = true\n  return this\n}\nfunction flow(stream) {\n  const state = stream._readableState\n  debug('flow', state.flowing)\n  while (state.flowing && stream.read() !== null);\n}\n\n// Wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  let paused = false\n\n  // TODO (ronag): Should this.destroy(err) emit\n  // 'error' on the wrapped stream? Would require\n  // a static factory method, e.g. Readable.wrap(stream).\n\n  stream.on('data', (chunk) => {\n    if (!this.push(chunk) && stream.pause) {\n      paused = true\n      stream.pause()\n    }\n  })\n  stream.on('end', () => {\n    this.push(null)\n  })\n  stream.on('error', (err) => {\n    errorOrDestroy(this, err)\n  })\n  stream.on('close', () => {\n    this.destroy()\n  })\n  stream.on('destroy', () => {\n    this.destroy()\n  })\n  this._read = () => {\n    if (paused && stream.resume) {\n      paused = false\n      stream.resume()\n    }\n  }\n\n  // Proxy all the other methods. Important when wrapping filters and duplexes.\n  const streamKeys = ObjectKeys(stream)\n  for (let j = 1; j < streamKeys.length; j++) {\n    const i = streamKeys[j]\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = stream[i].bind(stream)\n    }\n  }\n  return this\n}\nReadable.prototype[SymbolAsyncIterator] = function () {\n  return streamToAsyncIterator(this)\n}\nReadable.prototype.iterator = function (options) {\n  if (options !== undefined) {\n    validateObject(options, 'options')\n  }\n  return streamToAsyncIterator(this, options)\n}\nfunction streamToAsyncIterator(stream, options) {\n  if (typeof stream.read !== 'function') {\n    stream = Readable.wrap(stream, {\n      objectMode: true\n    })\n  }\n  const iter = createAsyncIterator(stream, options)\n  iter.stream = stream\n  return iter\n}\nasync function* createAsyncIterator(stream, options) {\n  let callback = nop\n  function next(resolve) {\n    if (this === stream) {\n      callback()\n      callback = nop\n    } else {\n      callback = resolve\n    }\n  }\n  stream.on('readable', next)\n  let error\n  const cleanup = eos(\n    stream,\n    {\n      writable: false\n    },\n    (err) => {\n      error = err ? aggregateTwoErrors(error, err) : null\n      callback()\n      callback = nop\n    }\n  )\n  try {\n    while (true) {\n      const chunk = stream.destroyed ? null : stream.read()\n      if (chunk !== null) {\n        yield chunk\n      } else if (error) {\n        throw error\n      } else if (error === null) {\n        return\n      } else {\n        await new Promise(next)\n      }\n    }\n  } catch (err) {\n    error = aggregateTwoErrors(error, err)\n    throw error\n  } finally {\n    if (\n      (error || (options === null || options === undefined ? undefined : options.destroyOnReturn) !== false) &&\n      (error === undefined || stream._readableState.autoDestroy)\n    ) {\n      destroyImpl.destroyer(stream, null)\n    } else {\n      stream.off('readable', next)\n      cleanup()\n    }\n  }\n}\n\n// Making it explicit these properties are not enumerable\n// because otherwise some prototype manipulation in\n// userland will fail.\nObjectDefineProperties(Readable.prototype, {\n  readable: {\n    __proto__: null,\n    get() {\n      const r = this._readableState\n      // r.readable === false means that this is part of a Duplex stream\n      // where the readable side was disabled upon construction.\n      // Compat. The user might manually disable readable side through\n      // deprecated setter.\n      return !!r && r.readable !== false && !r.destroyed && !r.errorEmitted && !r.endEmitted\n    },\n    set(val) {\n      // Backwards compat.\n      if (this._readableState) {\n        this._readableState.readable = !!val\n      }\n    }\n  },\n  readableDidRead: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.dataEmitted\n    }\n  },\n  readableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._readableState.readable !== false &&\n        (this._readableState.destroyed || this._readableState.errored) &&\n        !this._readableState.endEmitted\n      )\n    }\n  },\n  readableHighWaterMark: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.highWaterMark\n    }\n  },\n  readableBuffer: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState && this._readableState.buffer\n    }\n  },\n  readableFlowing: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.flowing\n    },\n    set: function (state) {\n      if (this._readableState) {\n        this._readableState.flowing = state\n      }\n    }\n  },\n  readableLength: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState.length\n    }\n  },\n  readableObjectMode: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.objectMode : false\n    }\n  },\n  readableEncoding: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.encoding : null\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.errored : null\n    }\n  },\n  closed: {\n    __proto__: null,\n    get() {\n      return this._readableState ? this._readableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.destroyed : false\n    },\n    set(value) {\n      // We ignore the value if the stream\n      // has not been initialized yet.\n      if (!this._readableState) {\n        return\n      }\n\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      this._readableState.destroyed = value\n    }\n  },\n  readableEnded: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.endEmitted : false\n    }\n  }\n})\nObjectDefineProperties(ReadableState.prototype, {\n  // Legacy getter for `pipesCount`.\n  pipesCount: {\n    __proto__: null,\n    get() {\n      return this.pipes.length\n    }\n  },\n  // Legacy property for `paused`.\n  paused: {\n    __proto__: null,\n    get() {\n      return this[kPaused] !== false\n    },\n    set(value) {\n      this[kPaused] = !!value\n    }\n  }\n})\n\n// Exposed for testing purposes only.\nReadable._fromList = fromList\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered.\n  if (state.length === 0) return null\n  let ret\n  if (state.objectMode) ret = state.buffer.shift()\n  else if (!n || n >= state.length) {\n    // Read it all, truncate the list.\n    if (state.decoder) ret = state.buffer.join('')\n    else if (state.buffer.length === 1) ret = state.buffer.first()\n    else ret = state.buffer.concat(state.length)\n    state.buffer.clear()\n  } else {\n    // read part of list.\n    ret = state.buffer.consume(n, state.decoder)\n  }\n  return ret\n}\nfunction endReadable(stream) {\n  const state = stream._readableState\n  debug('endReadable', state.endEmitted)\n  if (!state.endEmitted) {\n    state.ended = true\n    process.nextTick(endReadableNT, state, stream)\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length)\n\n  // Check that we didn't get one last unshift.\n  if (!state.errored && !state.closeEmitted && !state.endEmitted && state.length === 0) {\n    state.endEmitted = true\n    stream.emit('end')\n    if (stream.writable && stream.allowHalfOpen === false) {\n      process.nextTick(endWritableNT, stream)\n    } else if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well.\n      const wState = stream._writableState\n      const autoDestroy =\n        !wState ||\n        (wState.autoDestroy &&\n          // We don't expect the writable to ever 'finish'\n          // if writable is explicitly set to false.\n          (wState.finished || wState.writable === false))\n      if (autoDestroy) {\n        stream.destroy()\n      }\n    }\n  }\n}\nfunction endWritableNT(stream) {\n  const writable = stream.writable && !stream.writableEnded && !stream.destroyed\n  if (writable) {\n    stream.end()\n  }\n}\nReadable.from = function (iterable, opts) {\n  return from(Readable, iterable, opts)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nReadable.fromWeb = function (readableStream, options) {\n  return lazyWebStreams().newStreamReadableFromReadableStream(readableStream, options)\n}\nReadable.toWeb = function (streamReadable, options) {\n  return lazyWebStreams().newReadableStreamFromStreamReadable(streamReadable, options)\n}\nReadable.wrap = function (src, options) {\n  var _ref, _src$readableObjectMo\n  return new Readable({\n    objectMode:\n      (_ref =\n        (_src$readableObjectMo = src.readableObjectMode) !== null && _src$readableObjectMo !== undefined\n          ? _src$readableObjectMo\n          : src.objectMode) !== null && _ref !== undefined\n        ? _ref\n        : true,\n    ...options,\n    destroy(err, callback) {\n      destroyImpl.destroyer(src, err)\n      callback(err)\n    }\n  }).wrap(src)\n}\n","'use strict'\n\nconst { MathFloor, NumberIsInteger } = require('../../ours/primordials')\nconst { ERR_INVALID_ARG_VALUE } = require('../../ours/errors').codes\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null\n}\nfunction getDefaultHighWaterMark(objectMode) {\n  return objectMode ? 16 : 16 * 1024\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  const hwm = highWaterMarkFrom(options, isDuplex, duplexKey)\n  if (hwm != null) {\n    if (!NumberIsInteger(hwm) || hwm < 0) {\n      const name = isDuplex ? `options.${duplexKey}` : 'options.highWaterMark'\n      throw new ERR_INVALID_ARG_VALUE(name, hwm)\n    }\n    return MathFloor(hwm)\n  }\n\n  // Default value\n  return getDefaultHighWaterMark(state.objectMode)\n}\nmodule.exports = {\n  getHighWaterMark,\n  getDefaultHighWaterMark\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf, Symbol } = require('../../ours/primordials')\nmodule.exports = Transform\nconst { ERR_METHOD_NOT_IMPLEMENTED } = require('../../ours/errors').codes\nconst Duplex = require('./duplex')\nconst { getHighWaterMark } = require('./state')\nObjectSetPrototypeOf(Transform.prototype, Duplex.prototype)\nObjectSetPrototypeOf(Transform, Duplex)\nconst kCallback = Symbol('kCallback')\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options)\n\n  // TODO (ronag): This should preferably always be\n  // applied but would be semver-major. Or even better;\n  // make Transform a Readable with the Writable interface.\n  const readableHighWaterMark = options ? getHighWaterMark(this, options, 'readableHighWaterMark', true) : null\n  if (readableHighWaterMark === 0) {\n    // A Duplex will buffer both on the writable and readable side while\n    // a Transform just wants to buffer hwm number of elements. To avoid\n    // buffering twice we disable buffering on the writable side.\n    options = {\n      ...options,\n      highWaterMark: null,\n      readableHighWaterMark,\n      // TODO (ronag): 0 is not optimal since we have\n      // a \"bug\" where we check needDrain before calling _write and not after.\n      // Refs: https://github.com/nodejs/node/pull/32887\n      // Refs: https://github.com/nodejs/node/pull/35941\n      writableHighWaterMark: options.writableHighWaterMark || 0\n    }\n  }\n  Duplex.call(this, options)\n\n  // We have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false\n  this[kCallback] = null\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform\n    if (typeof options.flush === 'function') this._flush = options.flush\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  // Backwards compat. Some Transform streams incorrectly implement _final\n  // instead of or in addition to _flush. By using 'prefinish' instead of\n  // implementing _final we continue supporting this unfortunate use case.\n  this.on('prefinish', prefinish)\n}\nfunction final(cb) {\n  if (typeof this._flush === 'function' && !this.destroyed) {\n    this._flush((er, data) => {\n      if (er) {\n        if (cb) {\n          cb(er)\n        } else {\n          this.destroy(er)\n        }\n        return\n      }\n      if (data != null) {\n        this.push(data)\n      }\n      this.push(null)\n      if (cb) {\n        cb()\n      }\n    })\n  } else {\n    this.push(null)\n    if (cb) {\n      cb()\n    }\n  }\n}\nfunction prefinish() {\n  if (this._final !== final) {\n    final.call(this)\n  }\n}\nTransform.prototype._final = final\nTransform.prototype._transform = function (chunk, encoding, callback) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_transform()')\n}\nTransform.prototype._write = function (chunk, encoding, callback) {\n  const rState = this._readableState\n  const wState = this._writableState\n  const length = rState.length\n  this._transform(chunk, encoding, (err, val) => {\n    if (err) {\n      callback(err)\n      return\n    }\n    if (val != null) {\n      this.push(val)\n    }\n    if (\n      wState.ended ||\n      // Backwards compat.\n      length === rState.length ||\n      // Backwards compat.\n      rState.length < rState.highWaterMark\n    ) {\n      callback()\n    } else {\n      this[kCallback] = callback\n    }\n  })\n}\nTransform.prototype._read = function () {\n  if (this[kCallback]) {\n    const callback = this[kCallback]\n    this[kCallback] = null\n    callback()\n  }\n}\n","'use strict'\n\nconst { Symbol, SymbolAsyncIterator, SymbolIterator, SymbolFor } = require('../../ours/primordials')\nconst kDestroyed = Symbol('kDestroyed')\nconst kIsErrored = Symbol('kIsErrored')\nconst kIsReadable = Symbol('kIsReadable')\nconst kIsDisturbed = Symbol('kIsDisturbed')\nconst kIsClosedPromise = SymbolFor('nodejs.webstream.isClosedPromise')\nconst kControllerErrorFunction = SymbolFor('nodejs.webstream.controllerErrorFunction')\nfunction isReadableNodeStream(obj, strict = false) {\n  var _obj$_readableState\n  return !!(\n    (\n      obj &&\n      typeof obj.pipe === 'function' &&\n      typeof obj.on === 'function' &&\n      (!strict || (typeof obj.pause === 'function' && typeof obj.resume === 'function')) &&\n      (!obj._writableState ||\n        ((_obj$_readableState = obj._readableState) === null || _obj$_readableState === undefined\n          ? undefined\n          : _obj$_readableState.readable) !== false) &&\n      // Duplex\n      (!obj._writableState || obj._readableState)\n    ) // Writable has .pipe.\n  )\n}\n\nfunction isWritableNodeStream(obj) {\n  var _obj$_writableState\n  return !!(\n    (\n      obj &&\n      typeof obj.write === 'function' &&\n      typeof obj.on === 'function' &&\n      (!obj._readableState ||\n        ((_obj$_writableState = obj._writableState) === null || _obj$_writableState === undefined\n          ? undefined\n          : _obj$_writableState.writable) !== false)\n    ) // Duplex\n  )\n}\n\nfunction isDuplexNodeStream(obj) {\n  return !!(\n    obj &&\n    typeof obj.pipe === 'function' &&\n    obj._readableState &&\n    typeof obj.on === 'function' &&\n    typeof obj.write === 'function'\n  )\n}\nfunction isNodeStream(obj) {\n  return (\n    obj &&\n    (obj._readableState ||\n      obj._writableState ||\n      (typeof obj.write === 'function' && typeof obj.on === 'function') ||\n      (typeof obj.pipe === 'function' && typeof obj.on === 'function'))\n  )\n}\nfunction isReadableStream(obj) {\n  return !!(\n    obj &&\n    !isNodeStream(obj) &&\n    typeof obj.pipeThrough === 'function' &&\n    typeof obj.getReader === 'function' &&\n    typeof obj.cancel === 'function'\n  )\n}\nfunction isWritableStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.getWriter === 'function' && typeof obj.abort === 'function')\n}\nfunction isTransformStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.readable === 'object' && typeof obj.writable === 'object')\n}\nfunction isWebStream(obj) {\n  return isReadableStream(obj) || isWritableStream(obj) || isTransformStream(obj)\n}\nfunction isIterable(obj, isAsync) {\n  if (obj == null) return false\n  if (isAsync === true) return typeof obj[SymbolAsyncIterator] === 'function'\n  if (isAsync === false) return typeof obj[SymbolIterator] === 'function'\n  return typeof obj[SymbolAsyncIterator] === 'function' || typeof obj[SymbolIterator] === 'function'\n}\nfunction isDestroyed(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return !!(stream.destroyed || stream[kDestroyed] || (state !== null && state !== undefined && state.destroyed))\n}\n\n// Have been end():d.\nfunction isWritableEnded(stream) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableEnded === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.ended) !== 'boolean') return null\n  return wState.ended\n}\n\n// Have emitted 'finish'.\nfunction isWritableFinished(stream, strict) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableFinished === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.finished) !== 'boolean') return null\n  return !!(wState.finished || (strict === false && wState.ended === true && wState.length === 0))\n}\n\n// Have been push(null):d.\nfunction isReadableEnded(stream) {\n  if (!isReadableNodeStream(stream)) return null\n  if (stream.readableEnded === true) return true\n  const rState = stream._readableState\n  if (!rState || rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.ended) !== 'boolean') return null\n  return rState.ended\n}\n\n// Have emitted 'end'.\nfunction isReadableFinished(stream, strict) {\n  if (!isReadableNodeStream(stream)) return null\n  const rState = stream._readableState\n  if (rState !== null && rState !== undefined && rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.endEmitted) !== 'boolean') return null\n  return !!(rState.endEmitted || (strict === false && rState.ended === true && rState.length === 0))\n}\nfunction isReadable(stream) {\n  if (stream && stream[kIsReadable] != null) return stream[kIsReadable]\n  if (typeof (stream === null || stream === undefined ? undefined : stream.readable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isReadableNodeStream(stream) && stream.readable && !isReadableFinished(stream)\n}\nfunction isWritable(stream) {\n  if (typeof (stream === null || stream === undefined ? undefined : stream.writable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isWritableNodeStream(stream) && stream.writable && !isWritableEnded(stream)\n}\nfunction isFinished(stream, opts) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (isDestroyed(stream)) {\n    return true\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.readable) !== false && isReadable(stream)) {\n    return false\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.writable) !== false && isWritable(stream)) {\n    return false\n  }\n  return true\n}\nfunction isWritableErrored(stream) {\n  var _stream$_writableStat, _stream$_writableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.writableErrored) {\n    return stream.writableErrored\n  }\n  return (_stream$_writableStat =\n    (_stream$_writableStat2 = stream._writableState) === null || _stream$_writableStat2 === undefined\n      ? undefined\n      : _stream$_writableStat2.errored) !== null && _stream$_writableStat !== undefined\n    ? _stream$_writableStat\n    : null\n}\nfunction isReadableErrored(stream) {\n  var _stream$_readableStat, _stream$_readableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.readableErrored) {\n    return stream.readableErrored\n  }\n  return (_stream$_readableStat =\n    (_stream$_readableStat2 = stream._readableState) === null || _stream$_readableStat2 === undefined\n      ? undefined\n      : _stream$_readableStat2.errored) !== null && _stream$_readableStat !== undefined\n    ? _stream$_readableStat\n    : null\n}\nfunction isClosed(stream) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (typeof stream.closed === 'boolean') {\n    return stream.closed\n  }\n  const wState = stream._writableState\n  const rState = stream._readableState\n  if (\n    typeof (wState === null || wState === undefined ? undefined : wState.closed) === 'boolean' ||\n    typeof (rState === null || rState === undefined ? undefined : rState.closed) === 'boolean'\n  ) {\n    return (\n      (wState === null || wState === undefined ? undefined : wState.closed) ||\n      (rState === null || rState === undefined ? undefined : rState.closed)\n    )\n  }\n  if (typeof stream._closed === 'boolean' && isOutgoingMessage(stream)) {\n    return stream._closed\n  }\n  return null\n}\nfunction isOutgoingMessage(stream) {\n  return (\n    typeof stream._closed === 'boolean' &&\n    typeof stream._defaultKeepAlive === 'boolean' &&\n    typeof stream._removedConnection === 'boolean' &&\n    typeof stream._removedContLen === 'boolean'\n  )\n}\nfunction isServerResponse(stream) {\n  return typeof stream._sent100 === 'boolean' && isOutgoingMessage(stream)\n}\nfunction isServerRequest(stream) {\n  var _stream$req\n  return (\n    typeof stream._consuming === 'boolean' &&\n    typeof stream._dumped === 'boolean' &&\n    ((_stream$req = stream.req) === null || _stream$req === undefined ? undefined : _stream$req.upgradeOrConnect) ===\n      undefined\n  )\n}\nfunction willEmitClose(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return (\n    (!state && isServerResponse(stream)) || !!(state && state.autoDestroy && state.emitClose && state.closed === false)\n  )\n}\nfunction isDisturbed(stream) {\n  var _stream$kIsDisturbed\n  return !!(\n    stream &&\n    ((_stream$kIsDisturbed = stream[kIsDisturbed]) !== null && _stream$kIsDisturbed !== undefined\n      ? _stream$kIsDisturbed\n      : stream.readableDidRead || stream.readableAborted)\n  )\n}\nfunction isErrored(stream) {\n  var _ref,\n    _ref2,\n    _ref3,\n    _ref4,\n    _ref5,\n    _stream$kIsErrored,\n    _stream$_readableStat3,\n    _stream$_writableStat3,\n    _stream$_readableStat4,\n    _stream$_writableStat4\n  return !!(\n    stream &&\n    ((_ref =\n      (_ref2 =\n        (_ref3 =\n          (_ref4 =\n            (_ref5 =\n              (_stream$kIsErrored = stream[kIsErrored]) !== null && _stream$kIsErrored !== undefined\n                ? _stream$kIsErrored\n                : stream.readableErrored) !== null && _ref5 !== undefined\n              ? _ref5\n              : stream.writableErrored) !== null && _ref4 !== undefined\n            ? _ref4\n            : (_stream$_readableStat3 = stream._readableState) === null || _stream$_readableStat3 === undefined\n            ? undefined\n            : _stream$_readableStat3.errorEmitted) !== null && _ref3 !== undefined\n          ? _ref3\n          : (_stream$_writableStat3 = stream._writableState) === null || _stream$_writableStat3 === undefined\n          ? undefined\n          : _stream$_writableStat3.errorEmitted) !== null && _ref2 !== undefined\n        ? _ref2\n        : (_stream$_readableStat4 = stream._readableState) === null || _stream$_readableStat4 === undefined\n        ? undefined\n        : _stream$_readableStat4.errored) !== null && _ref !== undefined\n      ? _ref\n      : (_stream$_writableStat4 = stream._writableState) === null || _stream$_writableStat4 === undefined\n      ? undefined\n      : _stream$_writableStat4.errored)\n  )\n}\nmodule.exports = {\n  kDestroyed,\n  isDisturbed,\n  kIsDisturbed,\n  isErrored,\n  kIsErrored,\n  isReadable,\n  kIsReadable,\n  kIsClosedPromise,\n  kControllerErrorFunction,\n  isClosed,\n  isDestroyed,\n  isDuplexNodeStream,\n  isFinished,\n  isIterable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableEnded,\n  isReadableFinished,\n  isReadableErrored,\n  isNodeStream,\n  isWebStream,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableEnded,\n  isWritableFinished,\n  isWritableErrored,\n  isServerRequest,\n  isServerResponse,\n  willEmitClose,\n  isTransformStream\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n;('use strict')\nconst {\n  ArrayPrototypeSlice,\n  Error,\n  FunctionPrototypeSymbolHasInstance,\n  ObjectDefineProperty,\n  ObjectDefineProperties,\n  ObjectSetPrototypeOf,\n  StringPrototypeToLowerCase,\n  Symbol,\n  SymbolHasInstance\n} = require('../../ours/primordials')\nmodule.exports = Writable\nWritable.WritableState = WritableState\nconst { EventEmitter: EE } = require('events')\nconst Stream = require('./legacy').Stream\nconst { Buffer } = require('buffer')\nconst destroyImpl = require('./destroy')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED,\n  ERR_STREAM_ALREADY_FINISHED,\n  ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING\n} = require('../../ours/errors').codes\nconst { errorOrDestroy } = destroyImpl\nObjectSetPrototypeOf(Writable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Writable, Stream)\nfunction nop() {}\nconst kOnFinished = Symbol('kOnFinished')\nfunction WritableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!(options && options.objectMode)\n  if (isDuplex) this.objectMode = this.objectMode || !!(options && options.writableObjectMode)\n\n  // The point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write().\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // if _final has been called.\n  this.finalCalled = false\n\n  // drain event flag.\n  this.needDrain = false\n  // At the start of calling end()\n  this.ending = false\n  // When end() has been called, and returned.\n  this.ended = false\n  // When 'finish' is emitted.\n  this.finished = false\n\n  // Has it been destroyed\n  this.destroyed = false\n\n  // Should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  const noDecode = !!(options && options.decodeStrings === false)\n  this.decodeStrings = !noDecode\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0\n\n  // A flag to see when we're in the middle of a write.\n  this.writing = false\n\n  // When true all writes will be buffered until .uncork() call.\n  this.corked = 0\n\n  // A flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true\n\n  // A flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false\n\n  // The callback that's passed to _write(chunk, cb).\n  this.onwrite = onwrite.bind(undefined, stream)\n\n  // The callback that the user supplies to write(chunk, encoding, cb).\n  this.writecb = null\n\n  // The amount that is being written when _write is called.\n  this.writelen = 0\n\n  // Storage for data passed to the afterWrite() callback in case of\n  // synchronous _write() completion.\n  this.afterWriteTickInfo = null\n  resetBuffer(this)\n\n  // Number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted.\n  this.pendingcb = 0\n\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  this.constructed = true\n\n  // Emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams.\n  this.prefinished = false\n\n  // True if the error was already emitted and should not be thrown again.\n  this.errorEmitted = false\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = !options || options.emitClose !== false\n\n  // Should .destroy() be called after 'finish' (and potentially 'end').\n  this.autoDestroy = !options || options.autoDestroy !== false\n\n  // Indicates whether the stream has errored. When true all write() calls\n  // should return false. This is needed since when autoDestroy\n  // is disabled we need a way to tell whether the stream has failed.\n  this.errored = null\n\n  // Indicates whether the stream has finished destroying.\n  this.closed = false\n\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  this.closeEmitted = false\n  this[kOnFinished] = []\n}\nfunction resetBuffer(state) {\n  state.buffered = []\n  state.bufferedIndex = 0\n  state.allBuffers = true\n  state.allNoop = true\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  return ArrayPrototypeSlice(this.buffered, this.bufferedIndex)\n}\nObjectDefineProperty(WritableState.prototype, 'bufferedRequestCount', {\n  __proto__: null,\n  get() {\n    return this.buffered.length - this.bufferedIndex\n  }\n})\nfunction Writable(options) {\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  if (!isDuplex && !FunctionPrototypeSymbolHasInstance(Writable, this)) return new Writable(options)\n  this._writableState = new WritableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write\n    if (typeof options.writev === 'function') this._writev = options.writev\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.final === 'function') this._final = options.final\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    const state = this._writableState\n    if (!state.writing) {\n      clearBuffer(this, state)\n    }\n    finishMaybe(this, state)\n  })\n}\nObjectDefineProperty(Writable, SymbolHasInstance, {\n  __proto__: null,\n  value: function (object) {\n    if (FunctionPrototypeSymbolHasInstance(this, object)) return true\n    if (this !== Writable) return false\n    return object && object._writableState instanceof WritableState\n  }\n})\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE())\n}\nfunction _write(stream, chunk, encoding, cb) {\n  const state = stream._writableState\n  if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = state.defaultEncoding\n  } else {\n    if (!encoding) encoding = state.defaultEncoding\n    else if (encoding !== 'buffer' && !Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n    if (typeof cb !== 'function') cb = nop\n  }\n  if (chunk === null) {\n    throw new ERR_STREAM_NULL_VALUES()\n  } else if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      if (state.decodeStrings !== false) {\n        chunk = Buffer.from(chunk, encoding)\n        encoding = 'buffer'\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = 'buffer'\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = 'buffer'\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  let err\n  if (state.ending) {\n    err = new ERR_STREAM_WRITE_AFTER_END()\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('write')\n  }\n  if (err) {\n    process.nextTick(cb, err)\n    errorOrDestroy(stream, err, true)\n    return err\n  }\n  state.pendingcb++\n  return writeOrBuffer(stream, state, chunk, encoding, cb)\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  return _write(this, chunk, encoding, cb) === true\n}\nWritable.prototype.cork = function () {\n  this._writableState.corked++\n}\nWritable.prototype.uncork = function () {\n  const state = this._writableState\n  if (state.corked) {\n    state.corked--\n    if (!state.writing) clearBuffer(this, state)\n  }\n}\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = StringPrototypeToLowerCase(encoding)\n  if (!Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n  this._writableState.defaultEncoding = encoding\n  return this\n}\n\n// If we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, callback) {\n  const len = state.objectMode ? 1 : chunk.length\n  state.length += len\n\n  // stream._write resets state.length\n  const ret = state.length < state.highWaterMark\n  // We must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true\n  if (state.writing || state.corked || state.errored || !state.constructed) {\n    state.buffered.push({\n      chunk,\n      encoding,\n      callback\n    })\n    if (state.allBuffers && encoding !== 'buffer') {\n      state.allBuffers = false\n    }\n    if (state.allNoop && callback !== nop) {\n      state.allNoop = false\n    }\n  } else {\n    state.writelen = len\n    state.writecb = callback\n    state.writing = true\n    state.sync = true\n    stream._write(chunk, encoding, state.onwrite)\n    state.sync = false\n  }\n\n  // Return false if errored or destroyed in order to break\n  // any synchronous while(stream.write(data)) loops.\n  return ret && !state.errored && !state.destroyed\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len\n  state.writecb = cb\n  state.writing = true\n  state.sync = true\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'))\n  else if (writev) stream._writev(chunk, state.onwrite)\n  else stream._write(chunk, encoding, state.onwrite)\n  state.sync = false\n}\nfunction onwriteError(stream, state, er, cb) {\n  --state.pendingcb\n  cb(er)\n  // Ensure callbacks are invoked even when autoDestroy is\n  // not enabled. Passing `er` here doesn't make sense since\n  // it's related to one specific write, not to the buffered\n  // writes.\n  errorBuffer(state)\n  // This can emit error, but error must always follow cb.\n  errorOrDestroy(stream, er)\n}\nfunction onwrite(stream, er) {\n  const state = stream._writableState\n  const sync = state.sync\n  const cb = state.writecb\n  if (typeof cb !== 'function') {\n    errorOrDestroy(stream, new ERR_MULTIPLE_CALLBACK())\n    return\n  }\n  state.writing = false\n  state.writecb = null\n  state.length -= state.writelen\n  state.writelen = 0\n  if (er) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    er.stack // eslint-disable-line no-unused-expressions\n\n    if (!state.errored) {\n      state.errored = er\n    }\n\n    // In case of duplex streams we need to notify the readable side of the\n    // error.\n    if (stream._readableState && !stream._readableState.errored) {\n      stream._readableState.errored = er\n    }\n    if (sync) {\n      process.nextTick(onwriteError, stream, state, er, cb)\n    } else {\n      onwriteError(stream, state, er, cb)\n    }\n  } else {\n    if (state.buffered.length > state.bufferedIndex) {\n      clearBuffer(stream, state)\n    }\n    if (sync) {\n      // It is a common case that the callback passed to .write() is always\n      // the same. In that case, we do not schedule a new nextTick(), but\n      // rather just increase a counter, to improve performance and avoid\n      // memory allocations.\n      if (state.afterWriteTickInfo !== null && state.afterWriteTickInfo.cb === cb) {\n        state.afterWriteTickInfo.count++\n      } else {\n        state.afterWriteTickInfo = {\n          count: 1,\n          cb,\n          stream,\n          state\n        }\n        process.nextTick(afterWriteTick, state.afterWriteTickInfo)\n      }\n    } else {\n      afterWrite(stream, state, 1, cb)\n    }\n  }\n}\nfunction afterWriteTick({ stream, state, count, cb }) {\n  state.afterWriteTickInfo = null\n  return afterWrite(stream, state, count, cb)\n}\nfunction afterWrite(stream, state, count, cb) {\n  const needDrain = !state.ending && !stream.destroyed && state.length === 0 && state.needDrain\n  if (needDrain) {\n    state.needDrain = false\n    stream.emit('drain')\n  }\n  while (count-- > 0) {\n    state.pendingcb--\n    cb()\n  }\n  if (state.destroyed) {\n    errorBuffer(state)\n  }\n  finishMaybe(stream, state)\n}\n\n// If there's something in the buffer waiting, then invoke callbacks.\nfunction errorBuffer(state) {\n  if (state.writing) {\n    return\n  }\n  for (let n = state.bufferedIndex; n < state.buffered.length; ++n) {\n    var _state$errored\n    const { chunk, callback } = state.buffered[n]\n    const len = state.objectMode ? 1 : chunk.length\n    state.length -= len\n    callback(\n      (_state$errored = state.errored) !== null && _state$errored !== undefined\n        ? _state$errored\n        : new ERR_STREAM_DESTROYED('write')\n    )\n  }\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    var _state$errored2\n    onfinishCallbacks[i](\n      (_state$errored2 = state.errored) !== null && _state$errored2 !== undefined\n        ? _state$errored2\n        : new ERR_STREAM_DESTROYED('end')\n    )\n  }\n  resetBuffer(state)\n}\n\n// If there's something in the buffer waiting, then process it.\nfunction clearBuffer(stream, state) {\n  if (state.corked || state.bufferProcessing || state.destroyed || !state.constructed) {\n    return\n  }\n  const { buffered, bufferedIndex, objectMode } = state\n  const bufferedLength = buffered.length - bufferedIndex\n  if (!bufferedLength) {\n    return\n  }\n  let i = bufferedIndex\n  state.bufferProcessing = true\n  if (bufferedLength > 1 && stream._writev) {\n    state.pendingcb -= bufferedLength - 1\n    const callback = state.allNoop\n      ? nop\n      : (err) => {\n          for (let n = i; n < buffered.length; ++n) {\n            buffered[n].callback(err)\n          }\n        }\n    // Make a copy of `buffered` if it's going to be used by `callback` above,\n    // since `doWrite` will mutate the array.\n    const chunks = state.allNoop && i === 0 ? buffered : ArrayPrototypeSlice(buffered, i)\n    chunks.allBuffers = state.allBuffers\n    doWrite(stream, state, true, state.length, chunks, '', callback)\n    resetBuffer(state)\n  } else {\n    do {\n      const { chunk, encoding, callback } = buffered[i]\n      buffered[i++] = null\n      const len = objectMode ? 1 : chunk.length\n      doWrite(stream, state, false, len, chunk, encoding, callback)\n    } while (i < buffered.length && !state.writing)\n    if (i === buffered.length) {\n      resetBuffer(state)\n    } else if (i > 256) {\n      buffered.splice(0, i)\n      state.bufferedIndex = 0\n    } else {\n      state.bufferedIndex = i\n    }\n  }\n  state.bufferProcessing = false\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  if (this._writev) {\n    this._writev(\n      [\n        {\n          chunk,\n          encoding\n        }\n      ],\n      cb\n    )\n  } else {\n    throw new ERR_METHOD_NOT_IMPLEMENTED('_write()')\n  }\n}\nWritable.prototype._writev = null\nWritable.prototype.end = function (chunk, encoding, cb) {\n  const state = this._writableState\n  if (typeof chunk === 'function') {\n    cb = chunk\n    chunk = null\n    encoding = null\n  } else if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = null\n  }\n  let err\n  if (chunk !== null && chunk !== undefined) {\n    const ret = _write(this, chunk, encoding)\n    if (ret instanceof Error) {\n      err = ret\n    }\n  }\n\n  // .end() fully uncorks.\n  if (state.corked) {\n    state.corked = 1\n    this.uncork()\n  }\n  if (err) {\n    // Do nothing...\n  } else if (!state.errored && !state.ending) {\n    // This is forgiving in terms of unnecessary calls to end() and can hide\n    // logic errors. However, usually such errors are harmless and causing a\n    // hard error can be disproportionately destructive. It is not always\n    // trivial for the user to determine whether end() needs to be called\n    // or not.\n\n    state.ending = true\n    finishMaybe(this, state, true)\n    state.ended = true\n  } else if (state.finished) {\n    err = new ERR_STREAM_ALREADY_FINISHED('end')\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('end')\n  }\n  if (typeof cb === 'function') {\n    if (err || state.finished) {\n      process.nextTick(cb, err)\n    } else {\n      state[kOnFinished].push(cb)\n    }\n  }\n  return this\n}\nfunction needFinish(state) {\n  return (\n    state.ending &&\n    !state.destroyed &&\n    state.constructed &&\n    state.length === 0 &&\n    !state.errored &&\n    state.buffered.length === 0 &&\n    !state.finished &&\n    !state.writing &&\n    !state.errorEmitted &&\n    !state.closeEmitted\n  )\n}\nfunction callFinal(stream, state) {\n  let called = false\n  function onFinish(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    state.pendingcb--\n    if (err) {\n      const onfinishCallbacks = state[kOnFinished].splice(0)\n      for (let i = 0; i < onfinishCallbacks.length; i++) {\n        onfinishCallbacks[i](err)\n      }\n      errorOrDestroy(stream, err, state.sync)\n    } else if (needFinish(state)) {\n      state.prefinished = true\n      stream.emit('prefinish')\n      // Backwards compat. Don't check state.sync here.\n      // Some streams assume 'finish' will be emitted\n      // asynchronously relative to _final callback.\n      state.pendingcb++\n      process.nextTick(finish, stream, state)\n    }\n  }\n  state.sync = true\n  state.pendingcb++\n  try {\n    stream._final(onFinish)\n  } catch (err) {\n    onFinish(err)\n  }\n  state.sync = false\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.finalCalled = true\n      callFinal(stream, state)\n    } else {\n      state.prefinished = true\n      stream.emit('prefinish')\n    }\n  }\n}\nfunction finishMaybe(stream, state, sync) {\n  if (needFinish(state)) {\n    prefinish(stream, state)\n    if (state.pendingcb === 0) {\n      if (sync) {\n        state.pendingcb++\n        process.nextTick(\n          (stream, state) => {\n            if (needFinish(state)) {\n              finish(stream, state)\n            } else {\n              state.pendingcb--\n            }\n          },\n          stream,\n          state\n        )\n      } else if (needFinish(state)) {\n        state.pendingcb++\n        finish(stream, state)\n      }\n    }\n  }\n}\nfunction finish(stream, state) {\n  state.pendingcb--\n  state.finished = true\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    onfinishCallbacks[i]()\n  }\n  stream.emit('finish')\n  if (state.autoDestroy) {\n    // In case of duplex streams we need a way to detect\n    // if the readable side is ready for autoDestroy as well.\n    const rState = stream._readableState\n    const autoDestroy =\n      !rState ||\n      (rState.autoDestroy &&\n        // We don't expect the readable to ever 'end'\n        // if readable is explicitly set to false.\n        (rState.endEmitted || rState.readable === false))\n    if (autoDestroy) {\n      stream.destroy()\n    }\n  }\n}\nObjectDefineProperties(Writable.prototype, {\n  closed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.destroyed : false\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly managing destroyed.\n      if (this._writableState) {\n        this._writableState.destroyed = value\n      }\n    }\n  },\n  writable: {\n    __proto__: null,\n    get() {\n      const w = this._writableState\n      // w.writable === false means that this is part of a Duplex stream\n      // where the writable side was disabled upon construction.\n      // Compat. The user might manually disable writable side through\n      // deprecated setter.\n      return !!w && w.writable !== false && !w.destroyed && !w.errored && !w.ending && !w.ended\n    },\n    set(val) {\n      // Backwards compatible.\n      if (this._writableState) {\n        this._writableState.writable = !!val\n      }\n    }\n  },\n  writableFinished: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.finished : false\n    }\n  },\n  writableObjectMode: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.objectMode : false\n    }\n  },\n  writableBuffer: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.getBuffer()\n    }\n  },\n  writableEnded: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.ending : false\n    }\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    get() {\n      const wState = this._writableState\n      if (!wState) return false\n      return !wState.destroyed && !wState.ending && wState.needDrain\n    }\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.highWaterMark\n    }\n  },\n  writableCorked: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.corked : 0\n    }\n  },\n  writableLength: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.length\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._writableState ? this._writableState.errored : null\n    }\n  },\n  writableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._writableState.writable !== false &&\n        (this._writableState.destroyed || this._writableState.errored) &&\n        !this._writableState.finished\n      )\n    }\n  }\n})\nconst destroy = destroyImpl.destroy\nWritable.prototype.destroy = function (err, cb) {\n  const state = this._writableState\n\n  // Invoke pending callbacks.\n  if (!state.destroyed && (state.bufferedIndex < state.buffered.length || state[kOnFinished].length)) {\n    process.nextTick(errorBuffer, state)\n  }\n  destroy.call(this, err, cb)\n  return this\n}\nWritable.prototype._undestroy = destroyImpl.undestroy\nWritable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nWritable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nWritable.fromWeb = function (writableStream, options) {\n  return lazyWebStreams().newStreamWritableFromWritableStream(writableStream, options)\n}\nWritable.toWeb = function (streamWritable) {\n  return lazyWebStreams().newWritableStreamFromStreamWritable(streamWritable)\n}\n","/* eslint jsdoc/require-jsdoc: \"error\" */\n\n'use strict'\n\nconst {\n  ArrayIsArray,\n  ArrayPrototypeIncludes,\n  ArrayPrototypeJoin,\n  ArrayPrototypeMap,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberMAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER,\n  NumberParseInt,\n  ObjectPrototypeHasOwnProperty,\n  RegExpPrototypeExec,\n  String,\n  StringPrototypeToUpperCase,\n  StringPrototypeTrim\n} = require('../ours/primordials')\nconst {\n  hideStackFrames,\n  codes: { ERR_SOCKET_BAD_PORT, ERR_INVALID_ARG_TYPE, ERR_INVALID_ARG_VALUE, ERR_OUT_OF_RANGE, ERR_UNKNOWN_SIGNAL }\n} = require('../ours/errors')\nconst { normalizeEncoding } = require('../ours/util')\nconst { isAsyncFunction, isArrayBufferView } = require('../ours/util').types\nconst signals = {}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isInt32(value) {\n  return value === (value | 0)\n}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isUint32(value) {\n  return value === value >>> 0\n}\nconst octalReg = /^[0-7]+$/\nconst modeDesc = 'must be a 32-bit unsigned integer or an octal string'\n\n/**\n * Parse and validate values that will be converted into mode_t (the S_*\n * constants). Only valid numbers and octal strings are allowed. They could be\n * converted to 32-bit unsigned integers or non-negative signed integers in the\n * C++ land, but any value higher than 0o777 will result in platform-specific\n * behaviors.\n *\n * @param {*} value Values to be validated\n * @param {string} name Name of the argument\n * @param {number} [def] If specified, will be returned for invalid values\n * @returns {number}\n */\nfunction parseFileMode(value, name, def) {\n  if (typeof value === 'undefined') {\n    value = def\n  }\n  if (typeof value === 'string') {\n    if (RegExpPrototypeExec(octalReg, value) === null) {\n      throw new ERR_INVALID_ARG_VALUE(name, value, modeDesc)\n    }\n    value = NumberParseInt(value, 8)\n  }\n  validateUint32(value, name)\n  return value\n}\n\n/**\n * @callback validateInteger\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInteger} */\nconst validateInteger = hideStackFrames((value, name, min = NumberMIN_SAFE_INTEGER, max = NumberMAX_SAFE_INTEGER) => {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (!NumberIsInteger(value)) throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  if (value < min || value > max) throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n})\n\n/**\n * @callback validateInt32\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInt32} */\nconst validateInt32 = hideStackFrames((value, name, min = -2147483648, max = 2147483647) => {\n  // The defaults for min and max correspond to the limits of 32-bit integers.\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateUint32\n * @param {*} value\n * @param {string} name\n * @param {number|boolean} [positive=false]\n * @returns {asserts value is number}\n */\n\n/** @type {validateUint32} */\nconst validateUint32 = hideStackFrames((value, name, positive = false) => {\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  const min = positive ? 1 : 0\n  // 2 ** 32 === 4294967296\n  const max = 4294967295\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateString\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string}\n */\n\n/** @type {validateString} */\nfunction validateString(value, name) {\n  if (typeof value !== 'string') throw new ERR_INVALID_ARG_TYPE(name, 'string', value)\n}\n\n/**\n * @callback validateNumber\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateNumber} */\nfunction validateNumber(value, name, min = undefined, max) {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (\n    (min != null && value < min) ||\n    (max != null && value > max) ||\n    ((min != null || max != null) && NumberIsNaN(value))\n  ) {\n    throw new ERR_OUT_OF_RANGE(\n      name,\n      `${min != null ? `>= ${min}` : ''}${min != null && max != null ? ' && ' : ''}${max != null ? `<= ${max}` : ''}`,\n      value\n    )\n  }\n}\n\n/**\n * @callback validateOneOf\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} oneOf\n */\n\n/** @type {validateOneOf} */\nconst validateOneOf = hideStackFrames((value, name, oneOf) => {\n  if (!ArrayPrototypeIncludes(oneOf, value)) {\n    const allowed = ArrayPrototypeJoin(\n      ArrayPrototypeMap(oneOf, (v) => (typeof v === 'string' ? `'${v}'` : String(v))),\n      ', '\n    )\n    const reason = 'must be one of: ' + allowed\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateBoolean\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean}\n */\n\n/** @type {validateBoolean} */\nfunction validateBoolean(value, name) {\n  if (typeof value !== 'boolean') throw new ERR_INVALID_ARG_TYPE(name, 'boolean', value)\n}\n\n/**\n * @param {any} options\n * @param {string} key\n * @param {boolean} defaultValue\n * @returns {boolean}\n */\nfunction getOwnPropertyValueOrDefault(options, key, defaultValue) {\n  return options == null || !ObjectPrototypeHasOwnProperty(options, key) ? defaultValue : options[key]\n}\n\n/**\n * @callback validateObject\n * @param {*} value\n * @param {string} name\n * @param {{\n *   allowArray?: boolean,\n *   allowFunction?: boolean,\n *   nullable?: boolean\n * }} [options]\n */\n\n/** @type {validateObject} */\nconst validateObject = hideStackFrames((value, name, options = null) => {\n  const allowArray = getOwnPropertyValueOrDefault(options, 'allowArray', false)\n  const allowFunction = getOwnPropertyValueOrDefault(options, 'allowFunction', false)\n  const nullable = getOwnPropertyValueOrDefault(options, 'nullable', false)\n  if (\n    (!nullable && value === null) ||\n    (!allowArray && ArrayIsArray(value)) ||\n    (typeof value !== 'object' && (!allowFunction || typeof value !== 'function'))\n  ) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Object', value)\n  }\n})\n\n/**\n * @callback validateDictionary - We are using the Web IDL Standard definition\n *                                of \"dictionary\" here, which means any value\n *                                whose Type is either Undefined, Null, or\n *                                Object (which includes functions).\n * @param {*} value\n * @param {string} name\n * @see https://webidl.spec.whatwg.org/#es-dictionary\n * @see https://tc39.es/ecma262/#table-typeof-operator-results\n */\n\n/** @type {validateDictionary} */\nconst validateDictionary = hideStackFrames((value, name) => {\n  if (value != null && typeof value !== 'object' && typeof value !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'a dictionary', value)\n  }\n})\n\n/**\n * @callback validateArray\n * @param {*} value\n * @param {string} name\n * @param {number} [minLength]\n * @returns {asserts value is any[]}\n */\n\n/** @type {validateArray} */\nconst validateArray = hideStackFrames((value, name, minLength = 0) => {\n  if (!ArrayIsArray(value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Array', value)\n  }\n  if (value.length < minLength) {\n    const reason = `must be longer than ${minLength}`\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateStringArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string[]}\n */\n\n/** @type {validateStringArray} */\nfunction validateStringArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateString(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @callback validateBooleanArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean[]}\n */\n\n/** @type {validateBooleanArray} */\nfunction validateBooleanArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateBoolean(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @param {*} signal\n * @param {string} [name='signal']\n * @returns {asserts signal is keyof signals}\n */\nfunction validateSignalName(signal, name = 'signal') {\n  validateString(signal, name)\n  if (signals[signal] === undefined) {\n    if (signals[StringPrototypeToUpperCase(signal)] !== undefined) {\n      throw new ERR_UNKNOWN_SIGNAL(signal + ' (signals must use all capital letters)')\n    }\n    throw new ERR_UNKNOWN_SIGNAL(signal)\n  }\n}\n\n/**\n * @callback validateBuffer\n * @param {*} buffer\n * @param {string} [name='buffer']\n * @returns {asserts buffer is ArrayBufferView}\n */\n\n/** @type {validateBuffer} */\nconst validateBuffer = hideStackFrames((buffer, name = 'buffer') => {\n  if (!isArrayBufferView(buffer)) {\n    throw new ERR_INVALID_ARG_TYPE(name, ['Buffer', 'TypedArray', 'DataView'], buffer)\n  }\n})\n\n/**\n * @param {string} data\n * @param {string} encoding\n */\nfunction validateEncoding(data, encoding) {\n  const normalizedEncoding = normalizeEncoding(encoding)\n  const length = data.length\n  if (normalizedEncoding === 'hex' && length % 2 !== 0) {\n    throw new ERR_INVALID_ARG_VALUE('encoding', encoding, `is invalid for data of length ${length}`)\n  }\n}\n\n/**\n * Check that the port number is not NaN when coerced to a number,\n * is an integer and that it falls within the legal range of port numbers.\n * @param {*} port\n * @param {string} [name='Port']\n * @param {boolean} [allowZero=true]\n * @returns {number}\n */\nfunction validatePort(port, name = 'Port', allowZero = true) {\n  if (\n    (typeof port !== 'number' && typeof port !== 'string') ||\n    (typeof port === 'string' && StringPrototypeTrim(port).length === 0) ||\n    +port !== +port >>> 0 ||\n    port > 0xffff ||\n    (port === 0 && !allowZero)\n  ) {\n    throw new ERR_SOCKET_BAD_PORT(name, port, allowZero)\n  }\n  return port | 0\n}\n\n/**\n * @callback validateAbortSignal\n * @param {*} signal\n * @param {string} name\n */\n\n/** @type {validateAbortSignal} */\nconst validateAbortSignal = hideStackFrames((signal, name) => {\n  if (signal !== undefined && (signal === null || typeof signal !== 'object' || !('aborted' in signal))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n})\n\n/**\n * @callback validateFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validateFunction} */\nconst validateFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function') throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validatePlainFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validatePlainFunction} */\nconst validatePlainFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function' || isAsyncFunction(value)) throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validateUndefined\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is undefined}\n */\n\n/** @type {validateUndefined} */\nconst validateUndefined = hideStackFrames((value, name) => {\n  if (value !== undefined) throw new ERR_INVALID_ARG_TYPE(name, 'undefined', value)\n})\n\n/**\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} union\n */\nfunction validateUnion(value, name, union) {\n  if (!ArrayPrototypeIncludes(union, value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, `('${ArrayPrototypeJoin(union, '|')}')`, value)\n  }\n}\n\n/*\n  The rules for the Link header field are described here:\n  https://www.rfc-editor.org/rfc/rfc8288.html#section-3\n\n  This regex validates any string surrounded by angle brackets\n  (not necessarily a valid URI reference) followed by zero or more\n  link-params separated by semicolons.\n*/\nconst linkValueRegExp = /^(?:<[^>]*>)(?:\\s*;\\s*[^;\"\\s]+(?:=(\")?[^;\"\\s]*\\1)?)*$/\n\n/**\n * @param {any} value\n * @param {string} name\n */\nfunction validateLinkHeaderFormat(value, name) {\n  if (typeof value === 'undefined' || !RegExpPrototypeExec(linkValueRegExp, value)) {\n    throw new ERR_INVALID_ARG_VALUE(\n      name,\n      value,\n      'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n    )\n  }\n}\n\n/**\n * @param {any} hints\n * @return {string}\n */\nfunction validateLinkHeaderValue(hints) {\n  if (typeof hints === 'string') {\n    validateLinkHeaderFormat(hints, 'hints')\n    return hints\n  } else if (ArrayIsArray(hints)) {\n    const hintsLength = hints.length\n    let result = ''\n    if (hintsLength === 0) {\n      return result\n    }\n    for (let i = 0; i < hintsLength; i++) {\n      const link = hints[i]\n      validateLinkHeaderFormat(link, 'hints')\n      result += link\n      if (i !== hintsLength - 1) {\n        result += ', '\n      }\n    }\n    return result\n  }\n  throw new ERR_INVALID_ARG_VALUE(\n    'hints',\n    hints,\n    'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n  )\n}\nmodule.exports = {\n  isInt32,\n  isUint32,\n  parseFileMode,\n  validateArray,\n  validateStringArray,\n  validateBooleanArray,\n  validateBoolean,\n  validateBuffer,\n  validateDictionary,\n  validateEncoding,\n  validateFunction,\n  validateInt32,\n  validateInteger,\n  validateNumber,\n  validateObject,\n  validateOneOf,\n  validatePlainFunction,\n  validatePort,\n  validateSignalName,\n  validateString,\n  validateUint32,\n  validateUndefined,\n  validateUnion,\n  validateAbortSignal,\n  validateLinkHeaderValue\n}\n","'use strict'\n\nconst CustomStream = require('../stream')\nconst promises = require('../stream/promises')\nconst originalDestroy = CustomStream.Readable.destroy\nmodule.exports = CustomStream.Readable\n\n// Explicit export naming is needed for ESM\nmodule.exports._uint8ArrayToBuffer = CustomStream._uint8ArrayToBuffer\nmodule.exports._isUint8Array = CustomStream._isUint8Array\nmodule.exports.isDisturbed = CustomStream.isDisturbed\nmodule.exports.isErrored = CustomStream.isErrored\nmodule.exports.isReadable = CustomStream.isReadable\nmodule.exports.Readable = CustomStream.Readable\nmodule.exports.Writable = CustomStream.Writable\nmodule.exports.Duplex = CustomStream.Duplex\nmodule.exports.Transform = CustomStream.Transform\nmodule.exports.PassThrough = CustomStream.PassThrough\nmodule.exports.addAbortSignal = CustomStream.addAbortSignal\nmodule.exports.finished = CustomStream.finished\nmodule.exports.destroy = CustomStream.destroy\nmodule.exports.destroy = originalDestroy\nmodule.exports.pipeline = CustomStream.pipeline\nmodule.exports.compose = CustomStream.compose\nObject.defineProperty(CustomStream, 'promises', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return promises\n  }\n})\nmodule.exports.Stream = CustomStream.Stream\n\n// Allow default importing\nmodule.exports.default = module.exports\n","'use strict'\n\nconst { format, inspect, AggregateError: CustomAggregateError } = require('./util')\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/errors.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/errors.js\n\n  Don't try to replace with the original file and keep it up to date (starting from E(...) definitions)\n  with the upstream file.\n*/\n\nconst AggregateError = globalThis.AggregateError || CustomAggregateError\nconst kIsNodeError = Symbol('kIsNodeError')\nconst kTypes = [\n  'string',\n  'function',\n  'number',\n  'object',\n  // Accept 'Function' and 'Object' as alternative to the lower cased version.\n  'Function',\n  'Object',\n  'boolean',\n  'bigint',\n  'symbol'\n]\nconst classRegExp = /^([A-Z][a-z0-9]*)+$/\nconst nodeInternalPrefix = '__node_internal_'\nconst codes = {}\nfunction assert(value, message) {\n  if (!value) {\n    throw new codes.ERR_INTERNAL_ASSERTION(message)\n  }\n}\n\n// Only use this for integers! Decimal numbers do not work with this function.\nfunction addNumericalSeparator(val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\nfunction getMessage(key, msg, args) {\n  if (typeof msg === 'function') {\n    assert(\n      msg.length <= args.length,\n      // Default options do not count.\n      `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${msg.length}).`\n    )\n    return msg(...args)\n  }\n  const expectedLength = (msg.match(/%[dfijoOs]/g) || []).length\n  assert(\n    expectedLength === args.length,\n    `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${expectedLength}).`\n  )\n  if (args.length === 0) {\n    return msg\n  }\n  return format(msg, ...args)\n}\nfunction E(code, message, Base) {\n  if (!Base) {\n    Base = Error\n  }\n  class NodeError extends Base {\n    constructor(...args) {\n      super(getMessage(code, message, args))\n    }\n    toString() {\n      return `${this.name} [${code}]: ${this.message}`\n    }\n  }\n  Object.defineProperties(NodeError.prototype, {\n    name: {\n      value: Base.name,\n      writable: true,\n      enumerable: false,\n      configurable: true\n    },\n    toString: {\n      value() {\n        return `${this.name} [${code}]: ${this.message}`\n      },\n      writable: true,\n      enumerable: false,\n      configurable: true\n    }\n  })\n  NodeError.prototype.code = code\n  NodeError.prototype[kIsNodeError] = true\n  codes[code] = NodeError\n}\nfunction hideStackFrames(fn) {\n  // We rename the functions that will be hidden to cut off the stacktrace\n  // at the outermost one\n  const hidden = nodeInternalPrefix + fn.name\n  Object.defineProperty(fn, 'name', {\n    value: hidden\n  })\n  return fn\n}\nfunction aggregateTwoErrors(innerError, outerError) {\n  if (innerError && outerError && innerError !== outerError) {\n    if (Array.isArray(outerError.errors)) {\n      // If `outerError` is already an `AggregateError`.\n      outerError.errors.push(innerError)\n      return outerError\n    }\n    const err = new AggregateError([outerError, innerError], outerError.message)\n    err.code = outerError.code\n    return err\n  }\n  return innerError || outerError\n}\nclass AbortError extends Error {\n  constructor(message = 'The operation was aborted', options = undefined) {\n    if (options !== undefined && typeof options !== 'object') {\n      throw new codes.ERR_INVALID_ARG_TYPE('options', 'Object', options)\n    }\n    super(message, options)\n    this.code = 'ABORT_ERR'\n    this.name = 'AbortError'\n  }\n}\nE('ERR_ASSERTION', '%s', Error)\nE(\n  'ERR_INVALID_ARG_TYPE',\n  (name, expected, actual) => {\n    assert(typeof name === 'string', \"'name' must be a string\")\n    if (!Array.isArray(expected)) {\n      expected = [expected]\n    }\n    let msg = 'The '\n    if (name.endsWith(' argument')) {\n      // For cases like 'first argument'\n      msg += `${name} `\n    } else {\n      msg += `\"${name}\" ${name.includes('.') ? 'property' : 'argument'} `\n    }\n    msg += 'must be '\n    const types = []\n    const instances = []\n    const other = []\n    for (const value of expected) {\n      assert(typeof value === 'string', 'All expected entries have to be of type string')\n      if (kTypes.includes(value)) {\n        types.push(value.toLowerCase())\n      } else if (classRegExp.test(value)) {\n        instances.push(value)\n      } else {\n        assert(value !== 'object', 'The value \"object\" should be written as \"Object\"')\n        other.push(value)\n      }\n    }\n\n    // Special handle `object` in case other instances are allowed to outline\n    // the differences between each other.\n    if (instances.length > 0) {\n      const pos = types.indexOf('object')\n      if (pos !== -1) {\n        types.splice(types, pos, 1)\n        instances.push('Object')\n      }\n    }\n    if (types.length > 0) {\n      switch (types.length) {\n        case 1:\n          msg += `of type ${types[0]}`\n          break\n        case 2:\n          msg += `one of type ${types[0]} or ${types[1]}`\n          break\n        default: {\n          const last = types.pop()\n          msg += `one of type ${types.join(', ')}, or ${last}`\n        }\n      }\n      if (instances.length > 0 || other.length > 0) {\n        msg += ' or '\n      }\n    }\n    if (instances.length > 0) {\n      switch (instances.length) {\n        case 1:\n          msg += `an instance of ${instances[0]}`\n          break\n        case 2:\n          msg += `an instance of ${instances[0]} or ${instances[1]}`\n          break\n        default: {\n          const last = instances.pop()\n          msg += `an instance of ${instances.join(', ')}, or ${last}`\n        }\n      }\n      if (other.length > 0) {\n        msg += ' or '\n      }\n    }\n    switch (other.length) {\n      case 0:\n        break\n      case 1:\n        if (other[0].toLowerCase() !== other[0]) {\n          msg += 'an '\n        }\n        msg += `${other[0]}`\n        break\n      case 2:\n        msg += `one of ${other[0]} or ${other[1]}`\n        break\n      default: {\n        const last = other.pop()\n        msg += `one of ${other.join(', ')}, or ${last}`\n      }\n    }\n    if (actual == null) {\n      msg += `. Received ${actual}`\n    } else if (typeof actual === 'function' && actual.name) {\n      msg += `. Received function ${actual.name}`\n    } else if (typeof actual === 'object') {\n      var _actual$constructor\n      if (\n        (_actual$constructor = actual.constructor) !== null &&\n        _actual$constructor !== undefined &&\n        _actual$constructor.name\n      ) {\n        msg += `. Received an instance of ${actual.constructor.name}`\n      } else {\n        const inspected = inspect(actual, {\n          depth: -1\n        })\n        msg += `. Received ${inspected}`\n      }\n    } else {\n      let inspected = inspect(actual, {\n        colors: false\n      })\n      if (inspected.length > 25) {\n        inspected = `${inspected.slice(0, 25)}...`\n      }\n      msg += `. Received type ${typeof actual} (${inspected})`\n    }\n    return msg\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_ARG_VALUE',\n  (name, value, reason = 'is invalid') => {\n    let inspected = inspect(value)\n    if (inspected.length > 128) {\n      inspected = inspected.slice(0, 128) + '...'\n    }\n    const type = name.includes('.') ? 'property' : 'argument'\n    return `The ${type} '${name}' ${reason}. Received ${inspected}`\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_RETURN_VALUE',\n  (input, name, value) => {\n    var _value$constructor\n    const type =\n      value !== null &&\n      value !== undefined &&\n      (_value$constructor = value.constructor) !== null &&\n      _value$constructor !== undefined &&\n      _value$constructor.name\n        ? `instance of ${value.constructor.name}`\n        : `type ${typeof value}`\n    return `Expected ${input} to be returned from the \"${name}\"` + ` function but got ${type}.`\n  },\n  TypeError\n)\nE(\n  'ERR_MISSING_ARGS',\n  (...args) => {\n    assert(args.length > 0, 'At least one arg needs to be specified')\n    let msg\n    const len = args.length\n    args = (Array.isArray(args) ? args : [args]).map((a) => `\"${a}\"`).join(' or ')\n    switch (len) {\n      case 1:\n        msg += `The ${args[0]} argument`\n        break\n      case 2:\n        msg += `The ${args[0]} and ${args[1]} arguments`\n        break\n      default:\n        {\n          const last = args.pop()\n          msg += `The ${args.join(', ')}, and ${last} arguments`\n        }\n        break\n    }\n    return `${msg} must be specified`\n  },\n  TypeError\n)\nE(\n  'ERR_OUT_OF_RANGE',\n  (str, range, input) => {\n    assert(range, 'Missing \"range\" argument')\n    let received\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > 2n ** 32n || input < -(2n ** 32n)) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    } else {\n      received = inspect(input)\n    }\n    return `The value of \"${str}\" is out of range. It must be ${range}. Received ${received}`\n  },\n  RangeError\n)\nE('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times', Error)\nE('ERR_METHOD_NOT_IMPLEMENTED', 'The %s method is not implemented', Error)\nE('ERR_STREAM_ALREADY_FINISHED', 'Cannot call %s after a stream was finished', Error)\nE('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable', Error)\nE('ERR_STREAM_DESTROYED', 'Cannot call %s after a stream was destroyed', Error)\nE('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError)\nE('ERR_STREAM_PREMATURE_CLOSE', 'Premature close', Error)\nE('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF', Error)\nE('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event', Error)\nE('ERR_STREAM_WRITE_AFTER_END', 'write after end', Error)\nE('ERR_UNKNOWN_ENCODING', 'Unknown encoding: %s', TypeError)\nmodule.exports = {\n  AbortError,\n  aggregateTwoErrors: hideStackFrames(aggregateTwoErrors),\n  hideStackFrames,\n  codes\n}\n","'use strict'\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/per_context/primordials.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/per_context/primordials.js\n\n  Don't try to replace with the original file and keep it up to date with the upstream file.\n*/\nmodule.exports = {\n  ArrayIsArray(self) {\n    return Array.isArray(self)\n  },\n  ArrayPrototypeIncludes(self, el) {\n    return self.includes(el)\n  },\n  ArrayPrototypeIndexOf(self, el) {\n    return self.indexOf(el)\n  },\n  ArrayPrototypeJoin(self, sep) {\n    return self.join(sep)\n  },\n  ArrayPrototypeMap(self, fn) {\n    return self.map(fn)\n  },\n  ArrayPrototypePop(self, el) {\n    return self.pop(el)\n  },\n  ArrayPrototypePush(self, el) {\n    return self.push(el)\n  },\n  ArrayPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  Error,\n  FunctionPrototypeCall(fn, thisArgs, ...args) {\n    return fn.call(thisArgs, ...args)\n  },\n  FunctionPrototypeSymbolHasInstance(self, instance) {\n    return Function.prototype[Symbol.hasInstance].call(self, instance)\n  },\n  MathFloor: Math.floor,\n  Number,\n  NumberIsInteger: Number.isInteger,\n  NumberIsNaN: Number.isNaN,\n  NumberMAX_SAFE_INTEGER: Number.MAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER: Number.MIN_SAFE_INTEGER,\n  NumberParseInt: Number.parseInt,\n  ObjectDefineProperties(self, props) {\n    return Object.defineProperties(self, props)\n  },\n  ObjectDefineProperty(self, name, prop) {\n    return Object.defineProperty(self, name, prop)\n  },\n  ObjectGetOwnPropertyDescriptor(self, name) {\n    return Object.getOwnPropertyDescriptor(self, name)\n  },\n  ObjectKeys(obj) {\n    return Object.keys(obj)\n  },\n  ObjectSetPrototypeOf(target, proto) {\n    return Object.setPrototypeOf(target, proto)\n  },\n  Promise,\n  PromisePrototypeCatch(self, fn) {\n    return self.catch(fn)\n  },\n  PromisePrototypeThen(self, thenFn, catchFn) {\n    return self.then(thenFn, catchFn)\n  },\n  PromiseReject(err) {\n    return Promise.reject(err)\n  },\n  ReflectApply: Reflect.apply,\n  RegExpPrototypeTest(self, value) {\n    return self.test(value)\n  },\n  SafeSet: Set,\n  String,\n  StringPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  StringPrototypeToLowerCase(self) {\n    return self.toLowerCase()\n  },\n  StringPrototypeToUpperCase(self) {\n    return self.toUpperCase()\n  },\n  StringPrototypeTrim(self) {\n    return self.trim()\n  },\n  Symbol,\n  SymbolFor: Symbol.for,\n  SymbolAsyncIterator: Symbol.asyncIterator,\n  SymbolHasInstance: Symbol.hasInstance,\n  SymbolIterator: Symbol.iterator,\n  TypedArrayPrototypeSet(self, buf, len) {\n    return self.set(buf, len)\n  },\n  Uint8Array\n}\n","'use strict'\n\nconst bufferModule = require('buffer')\nconst AsyncFunction = Object.getPrototypeOf(async function () {}).constructor\nconst Blob = globalThis.Blob || bufferModule.Blob\n/* eslint-disable indent */\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        // eslint-disable-next-line indent\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\n/* eslint-enable indent */\n\n// This is a simplified version of AggregateError\nclass AggregateError extends Error {\n  constructor(errors) {\n    if (!Array.isArray(errors)) {\n      throw new TypeError(`Expected input to be an Array, got ${typeof errors}`)\n    }\n    let message = ''\n    for (let i = 0; i < errors.length; i++) {\n      message += `    ${errors[i].stack}\\n`\n    }\n    super(message)\n    this.name = 'AggregateError'\n    this.errors = errors\n  }\n}\nmodule.exports = {\n  AggregateError,\n  kEmptyObject: Object.freeze({}),\n  once(callback) {\n    let called = false\n    return function (...args) {\n      if (called) {\n        return\n      }\n      called = true\n      callback.apply(this, args)\n    }\n  },\n  createDeferredPromise: function () {\n    let resolve\n    let reject\n\n    // eslint-disable-next-line promise/param-names\n    const promise = new Promise((res, rej) => {\n      resolve = res\n      reject = rej\n    })\n    return {\n      promise,\n      resolve,\n      reject\n    }\n  },\n  promisify(fn) {\n    return new Promise((resolve, reject) => {\n      fn((err, ...args) => {\n        if (err) {\n          return reject(err)\n        }\n        return resolve(...args)\n      })\n    })\n  },\n  debuglog() {\n    return function () {}\n  },\n  format(format, ...args) {\n    // Simplified version of https://nodejs.org/api/util.html#utilformatformat-args\n    return format.replace(/%([sdifj])/g, function (...[_unused, type]) {\n      const replacement = args.shift()\n      if (type === 'f') {\n        return replacement.toFixed(6)\n      } else if (type === 'j') {\n        return JSON.stringify(replacement)\n      } else if (type === 's' && typeof replacement === 'object') {\n        const ctor = replacement.constructor !== Object ? replacement.constructor.name : ''\n        return `${ctor} {}`.trim()\n      } else {\n        return replacement.toString()\n      }\n    })\n  },\n  inspect(value) {\n    // Vastly simplified version of https://nodejs.org/api/util.html#utilinspectobject-options\n    switch (typeof value) {\n      case 'string':\n        if (value.includes(\"'\")) {\n          if (!value.includes('\"')) {\n            return `\"${value}\"`\n          } else if (!value.includes('`') && !value.includes('${')) {\n            return `\\`${value}\\``\n          }\n        }\n        return `'${value}'`\n      case 'number':\n        if (isNaN(value)) {\n          return 'NaN'\n        } else if (Object.is(value, -0)) {\n          return String(value)\n        }\n        return value\n      case 'bigint':\n        return `${String(value)}n`\n      case 'boolean':\n      case 'undefined':\n        return String(value)\n      case 'object':\n        return '{}'\n    }\n  },\n  types: {\n    isAsyncFunction(fn) {\n      return fn instanceof AsyncFunction\n    },\n    isArrayBufferView(arr) {\n      return ArrayBuffer.isView(arr)\n    }\n  },\n  isBlob\n}\nmodule.exports.promisify.custom = Symbol.for('nodejs.util.promisify.custom')\n","/* replacement start */\n\nconst { Buffer } = require('buffer')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst { ObjectDefineProperty, ObjectKeys, ReflectApply } = require('./ours/primordials')\nconst {\n  promisify: { custom: customPromisify }\n} = require('./ours/util')\nconst { streamReturningOperators, promiseReturningOperators } = require('./internal/streams/operators')\nconst {\n  codes: { ERR_ILLEGAL_CONSTRUCTOR }\n} = require('./ours/errors')\nconst compose = require('./internal/streams/compose')\nconst { pipeline } = require('./internal/streams/pipeline')\nconst { destroyer } = require('./internal/streams/destroy')\nconst eos = require('./internal/streams/end-of-stream')\nconst internalBuffer = {}\nconst promises = require('./stream/promises')\nconst utils = require('./internal/streams/utils')\nconst Stream = (module.exports = require('./internal/streams/legacy').Stream)\nStream.isDisturbed = utils.isDisturbed\nStream.isErrored = utils.isErrored\nStream.isReadable = utils.isReadable\nStream.Readable = require('./internal/streams/readable')\nfor (const key of ObjectKeys(streamReturningOperators)) {\n  const op = streamReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return Stream.Readable.from(ReflectApply(op, this, args))\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nfor (const key of ObjectKeys(promiseReturningOperators)) {\n  const op = promiseReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return ReflectApply(op, this, args)\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nStream.Writable = require('./internal/streams/writable')\nStream.Duplex = require('./internal/streams/duplex')\nStream.Transform = require('./internal/streams/transform')\nStream.PassThrough = require('./internal/streams/passthrough')\nStream.pipeline = pipeline\nconst { addAbortSignal } = require('./internal/streams/add-abort-signal')\nStream.addAbortSignal = addAbortSignal\nStream.finished = eos\nStream.destroy = destroyer\nStream.compose = compose\nObjectDefineProperty(Stream, 'promises', {\n  __proto__: null,\n  configurable: true,\n  enumerable: true,\n  get() {\n    return promises\n  }\n})\nObjectDefineProperty(pipeline, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.pipeline\n  }\n})\nObjectDefineProperty(eos, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.finished\n  }\n})\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream\nStream._isUint8Array = function isUint8Array(value) {\n  return value instanceof Uint8Array\n}\nStream._uint8ArrayToBuffer = function _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk.buffer, chunk.byteOffset, chunk.byteLength)\n}\n","'use strict'\n\nconst { ArrayPrototypePop, Promise } = require('../ours/primordials')\nconst { isIterable, isNodeStream, isWebStream } = require('../internal/streams/utils')\nconst { pipelineImpl: pl } = require('../internal/streams/pipeline')\nconst { finished } = require('../internal/streams/end-of-stream')\nrequire('../../lib/stream.js')\nfunction pipeline(...streams) {\n  return new Promise((resolve, reject) => {\n    let signal\n    let end\n    const lastArg = streams[streams.length - 1]\n    if (\n      lastArg &&\n      typeof lastArg === 'object' &&\n      !isNodeStream(lastArg) &&\n      !isIterable(lastArg) &&\n      !isWebStream(lastArg)\n    ) {\n      const options = ArrayPrototypePop(streams)\n      signal = options.signal\n      end = options.end\n    }\n    pl(\n      streams,\n      (err, value) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(value)\n        }\n      },\n      {\n        signal,\n        end\n      }\n    )\n  })\n}\nmodule.exports = {\n  finished,\n  pipeline\n}\n"],"names":["base64url","base64urlLib","safebtoa","str","encode","safeatob","decode","jsonToBase64","json","JSON","stringify","storageAvailable","type","storage","storageExists","storageLength","window","length","x","setItem","removeItem","err","error","code","name","MemoryStore","constructor","_defineProperty","getItem","key","this","store","value","BrowserStorage","storeKey","_storeKey","resetStore","getInstance","storageKey","arguments","undefined","instance","localStorage","sessionStorage","toJSON","currStore","getStore","parse","get","set","UX_MODE","POPUP","REDIRECT","OPENLOGIN_NETWORK","_objectSpread","TORUS_SAPPHIRE_NETWORK","TORUS_LEGACY_NETWORK","SUPPORTED_KEY_CURVES","SECP256K1","ED25519","LOGIN_PROVIDER","GOOGLE","FACEBOOK","REDDIT","DISCORD","TWITCH","APPLE","LINE","GITHUB","KAKAO","LINKEDIN","TWITTER","WEIBO","WECHAT","EMAIL_PASSWORDLESS","SMS_PASSWORDLESS","WEBAUTHN","JWT","OPENLOGIN_ACTIONS","LOGIN","ENABLE_MFA","MODIFY_MFA","BUILD_ENV","PRODUCTION","DEVELOPMENT","STAGING","TESTING","log","logLevel","setLevel","levels","INFO","apiKey","embedHost","gatewayAuthHeader","gatewayEmbedHostHeader","sentry","tracingOrigins","tracingPaths","async","fetchAndTrace","url","init","_url","URL","includes","origin","pathname","transaction","startTransaction","span","startChild","op","response","fetch","finish","getApiKeyHeaders","headers","debugLogResponse","info","status","statusText","logTracingHeader","promiseTimeout","ms","promise","timeout","Promise","_resolve","reject","id","setTimeout","clearTimeout","Error","race","options_","customOptions","defaultOptions","mode","useAPIKey","options","merge","method","ok","responseContentType","text","post","data","isUrlEncodedData","body","then","patch","put","BaseSessionManager","checkSessionParams","sessionId","padStart","request","_ref","ec","ec$1","browserCrypto","global","crypto","msCrypto","subtle","webkitSubtle","EC_GROUP_ORDER","Buffer","from","ZERO32","alloc","assert","condition","message","isScalar","isBuffer","isValidPrivateKey","privateKey","compare","randomBytes","size","arr","Uint8Array","getRandomValues","nodeCrypto","getAes","iv","importAlgorithm","cryptoKey","importKey","encAlgorithm","result","cipher","firstChunk","update","secondChunk","final","concat","decipher","generatePrivate","getPublic","keyFromPrivate","sign","msg","canonical","toDER","equalConstTime","b1","b2","res","i","sha512","hash","digest","aesCbcEncrypt","aesCbcDecrypt","hmacSha256Sign","sig","hmac","hmacSha256Verify","expectedSig","derive","privateKeyA","publicKeyB","keyA","keyB","keyFromPublic","Px","toArray","deriveUnpadded","derivePadded","toString","encrypt","publicKeyTo","opts","ephemPrivateKey","ephemPublicKey","encryptionKey","slice","macKey","ciphertext","dataToMac","mac","decrypt","_padding","padding","deriveLocal","macGood","keccak256","a","keccak256$1","encParamsHexToBuf","encParamsHex","encParamsBufToHex","encParams","encryptData","privKeyHex","d","serializedDec","serializedBuf","sData","decryptData","keyPair","getPrivate","DEFAULT_SESSION_TIMEOUT","OpenloginSessionManager","sessionServerBaseUrl","sessionNamespace","sessionTime","super","generateRandomSessionKey","createSession","privKey","pubKey","encData","signature","namespace","authorizeSession","pubkey","searchParams","append","updateSession","invalidateSession","setLogLevel","level","PACKET_TYPES","Object","create","PACKET_TYPES_REVERSE","keys","forEach","ERROR_PACKET","withNativeBlob","Blob","prototype","call","withNativeArrayBuffer","ArrayBuffer","isView","obj","buffer","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","split","readAsDataURL","byteOffset","byteLength","TEXT_ENCODER","encodePacketToBinary","packet","arrayBuffer","encoded","TextEncoder","chars","lookup","charCodeAt","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","len","p","arraybuffer","bytes","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","substring","packetType","decoded","SEPARATOR","String","fromCharCode","encodePayload","packets","encodedPackets","Array","count","join","decodePayload","encodedPayload","decodedPacket","push","createPacketEncoderStream","TransformStream","transform","controller","payloadLength","header","DataView","setUint8","view","setUint16","setBigUint64","BigInt","enqueue","TEXT_DECODER","totalLength","chunks","reduce","acc","chunk","concatChunks","shift","j","createPacketDecoderStream","maxPayload","TextDecoder","state","expectedLength","isBinary","headerArray","getUint16","n","getUint32","Math","pow","protocol","Emitter","mixin","on","addEventListener","event","fn","_callbacks","once","off","apply","removeListener","removeAllListeners","removeEventListener","cb","callbacks","splice","emit","args","emitReserved","listeners","hasListeners","globalThisShim","self","Function","pick","attr","k","hasOwnProperty","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","useNativeTimers","setTimeoutFn","bind","clearTimeoutFn","BASE64_OVERHEAD","utf8Length","ceil","c","l","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","TransportError","reason","description","context","Transport","writable","query","socket","onError","open","readyState","doOpen","close","doClose","onClose","send","write","onOpen","onData","onPacket","details","pause","onPause","createUri","schema","_hostname","_port","path","_query","hostname","indexOf","port","secure","Number","encodedQuery","alphabet","map","prev","seed","num","floor","yeast","now","Date","XMLHttpRequest","hasCORS","XHR","xdomain","e","createCookieJar","empty","hasXHR2","xhr","responseType","Polling","polling","location","isSSL","xd","forceBase64","withCredentials","cookieJar","poll","total","doPoll","doWrite","uri","timestampRequests","timestampParam","sid","b64","assign","Request","req","xhrStatus","pollXhr","_a","extraHeaders","setDisableHeaderCheck","setRequestHeader","addCookies","requestTimeout","onreadystatechange","parseCookies","onLoad","document","index","requestsCount","requests","cleanup","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","nextTick","isPromiseAvailable","resolve","WebSocket","MozWebSocket","usingBrowserWebSocket","defaultBinaryType","isReactNative","navigator","product","toLowerCase","WS","check","protocols","ws","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","onerror","lastPacket","compress","perMessageDeflate","threshold","WT","WebTransport","transport","transportOptions","closed","catch","ready","createBidirectionalStream","stream","decoderStream","MAX_SAFE_INTEGER","reader","readable","pipeThrough","getReader","encoderStream","pipeTo","writer","getWriter","read","done","transports","websocket","webtransport","re","parts","src","b","replace","m","exec","source","host","authority","ipv6uri","pathNames","queryKey","regx","names","$0","$1","$2","Socket","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","addTrailingSlash","rejectUnauthorized","closeOnBeforeunload","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","beforeunloadEventListener","offlineEventListener","createTransport","EIO","priorWebsocketSuccess","setTransport","onDrain","probe","failed","onTransportOpen","upgrading","flush","freezeTransport","onTransportClose","onupgrade","to","resetPingTimeout","onHandshake","sendPacket","filterUpgrades","getWritablePackets","shouldCheckPayloadSize","payloadSize","cleanupAndClose","waitForUpgrade","filteredUpgrades","loc","test","ipv6","href","withNativeFile","File","hasBinary","isArray","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","reconstructPacket","_reconstructPacket","isIndexValid","RESERVED_EVENTS","PacketType","Encoder","replacer","EVENT","ACK","encodeAsString","encodeAsBinary","BINARY_EVENT","BINARY_ACK","nsp","deconstruction","unshift","isObject","Decoder","reviver","add","reconstructor","decodeString","isBinaryEvent","BinaryReconstructor","takeBinaryData","start","buf","next","payload","tryParse","substr","isPayloadValid","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","connected","recovered","receiveBuffer","sendBuffer","_queue","_queueSeq","ids","acks","flags","auth","_opts","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","retries","fromQueue","volatile","_addToQueue","ack","pop","_registerAckCallback","isTransportWritable","engine","discardPacket","notifyOutgoingListeners","ackTimeout","timer","emitWithAck","withErr","arg1","arg2","tryCount","pending","responseArgs","hasError","_drainQueue","force","_packet","_sendConnectPacket","_pid","pid","offset","_lastOffset","sameNamespace","onconnect","onevent","onack","ondisconnect","emitEvent","_anyListeners","listener","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","min","max","factor","jitter","attempts","duration","rand","random","deviation","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","parser","encoder","decoder","autoConnect","v","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","Engine","skipReconnect","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","delay","onreconnect","attempt","cache","parsed","newConnection","forceNew","multiplex","log$1","SecurePubSub","serverUrl","enableLogging","enableAll","disableAll","publish","topic","topicPrivKey","encryptedData","fetchBody","subscribe","isPromisePending","topicPubKey","currentSocketConnection","getSocketConnection","debug","visibilityListener","visibilityState","disconnectListener","returnPromise","decData","SOCKET_CONN","localSocketConnection","OpenloginError","CustomError","defineProperty","InitializationError","fromCode","extraMessage","messages","invalidParams","notInitialized","LoginError","invalidLoginParams","userNotLoggedIn","popupClosed","loginFailed","popupBlocked","loglevel","getLogger","version","getHashQueryParams","replaceUrl","queryResult","queryParams","hashUrl","hashResult","hashParams","cleanUrl","search","history","replaceState","as","constructURL","params","baseURL","h","getPopupFeatures","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","w","width","innerWidth","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","left","abs","top","features","isMobileOrTablet","browser","bowser","userAgent","platform","getPlatform","tablet","mobile","getTimeout","loginProvider","PopupHandler","EventEmitter","target","windowTimer","iClosedWindow","_setupTimer","setInterval","clearInterval","_this$window","focus","redirect","locationReplaceOnRedirect","listenOnChannel","loginId","securePubSub","parsedData","OpenLogin","clientId","network","SAPPHIRE_MAINNET","buildEnv","sdkUrl","addVersionInUrls","useMpc","values","redirectUrl","uxMode","replaceUrlOnRedirect","originData","whiteLabel","loginConfig","mfaSettings","storageServerUrl","webauthnTransports","factorKey","coreKitKey","ed25519PrivKey","coreKitEd25519Key","coreKitEd25519PrivKey","appState","userInfo","dappState","baseUrl","_storageBaseKey","currentStorage","sessionManager","TESTNET","SAPPHIRE_DEVNET","console","_authorizeSession","updateState","login","defaultParams","loginParams","dataObject","actionType","openloginHandler","rehydrateSession","logout","walletKey","oAuthPrivateKey","tKey","metadataNonce","keyMode","profileImage","dappShare","idToken","oAuthIdToken","oAuthAccessToken","email","verifier","verifierId","aggregateVerifier","typeOfLogin","isMfaEnabled","authToken","signatures","tssShareIndex","tssPubKey","tssShare","tssNonce","setupMFA","changeSocialFactor","getUserInfo","getLoginId","loginSessionMgr","popupTimeout","configParams","loginUrl","b64Params","currentWindow","safeApply","handler","Reflect","arrayClone","copy","SafeEventEmitter","doError","events","_events","_len","_key","er","Symbol","InvalidTokenError","CHAIN_NAMESPACES","EIP155","SOLANA","OTHER","ADAPTER_NAMESPACES","XRPL","MULTICHAIN","getDefaultNetworkId","chainNamespace","getEvmChainConfig","chainId","rpcTarget","displayName","blockExplorer","ticker","tickerName","decimals","getSolanaChainConfig","getChainConfig","finalChainId","parseInt","Web3AuthError","WalletInitializationError","notFound","notInstalled","notReady","windowBlocked","windowClosed","incompatibleChainNameSpace","duplicateAdapterError","invalidProviderConfigError","providerNotReadyError","rpcConnectionError","invalidNetwork","WalletLoginError","connectionError","disconnectionError","notConnectedError","mfaEnabled","chainConfigNotAdded","unsupportedOperation","coreKitKeyNotFound","WalletOperationsError","chainIDNotAllowed","operationNotAllowed","chainNamespaceNotAllowed","WalletProviderError","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","MULTI_CHAIN_ADAPTERS","OPENLOGIN","WALLET_CONNECT_V2","SOLANA_ADAPTERS","TORUS_SOLANA","PHANTOM","SOLFLARE","SLOPE","EVM_ADAPTERS","TORUS_EVM","METAMASK","COINBASE","WALLET_ADAPTERS","ADAPTER_CATEGORY","EXTERNAL","IN_APP","ADAPTER_STATUS","NOT_READY","READY","CONNECTING","CONNECTED","DISCONNECTED","ERRORED","ADAPTER_EVENTS","ADAPTER_DATA_UPDATED","CACHE_CLEAR","BaseAdapter","MAINNET","setAdapterSettings","chainConfigProxy","chainConfig","connnected","web3AuthNetwork","customChainConfig","currentChainNamespace","defaultChainConfig","finalChainConfig","addChainConfig","checkConnectionRequirements","checkInitializationRequirements","checkDisconnectionRequirements","checkAddChainRequirements","provider","checkSwitchChainRequirements","knownChainConfigs","updateAdapterData","adapterData","adapterName","currentConfig","getOpenloginDefaultOptions","adapterSettings","loginSettings","privateKeyProvider","OpenloginAdapter","useCoreKitKey","_","openloginOptions","isRedirectResult","openloginInstance","finalPrivKey","_getFinalPrivKey","rehydrated","adapter","connectWithProvider","authenticateUser","addChain","_this$privateKeyProvi","switchChain","_this$privateKeyProvi2","_this$openloginOption","_getFinalEd25519PrivKey","_this$openloginOption2","_params$extraLoginOpt","keyAvailable","extraLoginOptions","id_token","_params$extraLoginOpt2","curve","login_hint","setupProvider","reconnected","AbortError","codes","require","isNodeStream","isWebStream","kControllerErrorFunction","eos","ERR_INVALID_ARG_TYPE","validateAbortSignal","signal","module","exports","addAbortSignal","addAbortSignalNoValidate","onAbort","cause","aborted","StringPrototypeSlice","SymbolIterator","TypedArrayPrototypeSet","inspect","head","tail","entry","ret","clear","s","allocUnsafe","consume","hasStrings","_getString","_getBuffer","first","retLen","for","depth","customInspect","pipeline","Duplex","destroyer","isReadable","isWritable","isTransformStream","isWritableStream","isReadableStream","ERR_INVALID_ARG_VALUE","ERR_MISSING_ARGS","streams","orgStreams","idx","ondrain","onfinish","onreadable","onfinished","writableObjectMode","readableObjectMode","_write","encoding","_final","end","toRead","_read","process","aggregateTwoErrors","ERR_MULTIPLE_CALLBACK","kDestroyed","isDestroyed","isFinished","isServerRequest","kDestroy","kConstruct","checkError","r","stack","errored","_readableState","_writableState","destroyed","constructed","called","onDestroy","emitErrorCloseNT","emitCloseNT","emitErrorNT","closeEmitted","emitClose","errorEmitted","undestroy","reading","ended","endEmitted","finalCalled","prefinished","ending","finished","errorOrDestroy","sync","autoDestroy","construct","_construct","listenerCount","constructNT","onConstruct","emitConstructNT","isRequest","setHeader","emitCloseLegacy","emitErrorCloseLegacy","ObjectDefineProperties","ObjectGetOwnPropertyDescriptor","ObjectKeys","ObjectSetPrototypeOf","Readable","Writable","allowHalfOpen","webStreamsAdapters","duplexify","lazyWebStreams","__proto__","writableHighWaterMark","writableBuffer","writableLength","writableFinished","writableCorked","writableEnded","writableNeedDrain","fromWeb","newStreamDuplexFromReadableWritablePair","toWeb","duplex","newReadableWritablePairFromDuplex","bufferModule","isIterable","isReadableNodeStream","isWritableNodeStream","isDuplexNodeStream","ERR_INVALID_RETURN_VALUE","createDeferredPromise","isBlob","AbortController","FunctionPrototypeCall","Duplexify","fromAsyncGen","ac","_promise","_duplexify","wrap","objectMode","val","ERR_STREAM_PREMATURE_CLOSE","kEmptyObject","validateFunction","validateObject","validateBoolean","PromisePrototypeThen","isClosed","isReadableFinished","isReadableErrored","isWritableFinished","isWritableErrored","willEmitClose","_willEmitClose","kIsClosedPromise","nop","_options$readable","_options$writable","eosWeb","wState","rState","onlegacyfinish","readableFinished","onend","onclosed","onrequest","endCallback","originalCallback","isAborted","resolverFn","autoCleanup","SymbolAsyncIterator","ERR_STREAM_NULL_VALUES","iterable","iterator","isAsync","highWaterMark","hadError","hasThrow","throw","return","ArrayIsArray","EE","Stream","prependListener","emitter","pipe","dest","resume","_isStdio","didOnEnd","ERR_OUT_OF_RANGE","validateInteger","kWeakHandler","staticCompose","ArrayPrototypePush","MathFloor","NumberIsNaN","PromiseReject","kEmpty","kEof","compose","composedStream","concurrency","_options$signal","_options$signal2","queue","signalOpt","onDone","pump","_val","_options$signal3","asIndexedPairs","_options$signal4","some","unused","filter","every","find","forEachFn","filterFn","ReduceAwareErrMissingArgs","reducer","initialValue","_options$signal5","hasInitialValue","gotAnyItemFromStream","_options$signal6","_options$signal7","flatMap","toIntegerOrInfinity","number","drop","_options$signal8","_options$signal9","take","_options$signal10","_options$signal11","streamReturningOperators","promiseReturningOperators","PassThrough","Transform","_transform","destroyImpl","ERR_STREAM_DESTROYED","isReadableEnded","writing","popCallback","makeAsyncIterable","fromReadable","pumpToNode","onresolve","wait","pumpToWeb","pipelineImpl","outerSignal","lastStreamCleanup","finishImpl","destroys","finishCount","isLastStream","_ret","_ret2","pt","dst","endFn","ArrayPrototypeIndexOf","NumberIsInteger","NumberParseInt","SafeSet","ReadableState","BufferList","getHighWaterMark","getDefaultHighWaterMark","ERR_METHOD_NOT_IMPLEMENTED","ERR_STREAM_PUSH_AFTER_EOF","ERR_STREAM_UNSHIFT_AFTER_END_EVENT","kPaused","StringDecoder","isDuplex","pipes","flowing","needReadable","emittedReadable","readableListening","resumeScheduled","defaultEncoding","awaitDrainWriters","multiAwaitDrain","readingMore","dataEmitted","maybeReadMore","readableAddChunk","addToFront","_isUint8Array","_uint8ArrayToBuffer","onEofChunk","addChunk","emitReadable","_undestroy","captureRejectionSymbol","isPaused","setEncoding","enc","MAX_HWM","computeNewHighWaterMark","howMuchToRead","emitReadable_","flow","maybeReadMore_","pipeOnDrain","delete","updateReadableListening","nReadingNextTick","resume_","streamToAsyncIterator","iter","createAsyncIterator","destroyOnReturn","fromList","endReadable","endReadableNT","endWritableNT","NaN","nOrig","doRead","pipeOpts","doEnd","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","cleanedUp","needDrain","dests","addListener","paused","streamKeys","readableDidRead","enumerable","readableAborted","readableHighWaterMark","readableBuffer","readableFlowing","readableLength","readableEncoding","readableEnded","pipesCount","_fromList","readableStream","newStreamReadableFromReadableStream","streamReadable","newReadableStreamFromStreamReadable","_src$readableObjectMo","highWaterMarkFrom","duplexKey","hwm","kCallback","_flush","prefinish","SymbolFor","kIsErrored","kIsReadable","kIsDisturbed","strict","_obj$_readableState","_obj$_writableState","cancel","isWritableEnded","_stream$_writableStat","_stream$_writableStat2","writableErrored","_stream$_readableStat","_stream$_readableStat2","readableErrored","_closed","isOutgoingMessage","_defaultKeepAlive","_removedConnection","_removedContLen","isServerResponse","_sent100","_stream$req","_consuming","_dumped","upgradeOrConnect","isDisturbed","_stream$kIsDisturbed","isErrored","_ref2","_ref3","_ref4","_ref5","_stream$kIsErrored","_stream$_readableStat3","_stream$_writableStat3","_stream$_readableStat4","_stream$_writableStat4","ArrayPrototypeSlice","FunctionPrototypeSymbolHasInstance","ObjectDefineProperty","StringPrototypeToLowerCase","SymbolHasInstance","WritableState","ERR_STREAM_CANNOT_PIPE","ERR_STREAM_ALREADY_FINISHED","ERR_STREAM_WRITE_AFTER_END","ERR_UNKNOWN_ENCODING","kOnFinished","noDecode","decodeStrings","corked","bufferProcessing","onwrite","writecb","writelen","afterWriteTickInfo","resetBuffer","pendingcb","buffered","bufferedIndex","allBuffers","allNoop","writev","_writev","clearBuffer","finishMaybe","isEncoding","writeOrBuffer","onwriteError","errorBuffer","afterWriteTick","afterWrite","_state$errored","onfinishCallbacks","_state$errored2","bufferedLength","needFinish","callFinal","onFinish","getBuffer","object","cork","uncork","setDefaultEncoding","writableAborted","writableStream","newStreamWritableFromWritableStream","streamWritable","newWritableStreamFromStreamWritable","ArrayPrototypeIncludes","ArrayPrototypeJoin","ArrayPrototypeMap","NumberMAX_SAFE_INTEGER","NumberMIN_SAFE_INTEGER","ObjectPrototypeHasOwnProperty","RegExpPrototypeExec","StringPrototypeToUpperCase","StringPrototypeTrim","hideStackFrames","ERR_SOCKET_BAD_PORT","ERR_UNKNOWN_SIGNAL","normalizeEncoding","isAsyncFunction","isArrayBufferView","signals","isInt32","isUint32","octalReg","modeDesc","parseFileMode","def","validateUint32","validateInt32","positive","validateString","validateNumber","validateOneOf","oneOf","allowed","getOwnPropertyValueOrDefault","defaultValue","allowArray","allowFunction","nullable","validateDictionary","validateArray","minLength","validateStringArray","validateBooleanArray","validateSignalName","validateBuffer","validateEncoding","normalizedEncoding","validatePort","allowZero","validatePlainFunction","validateUndefined","validateUnion","union","linkValueRegExp","validateLinkHeaderFormat","validateLinkHeaderValue","hints","hintsLength","link","CustomStream","promises","originalDestroy","configurable","format","AggregateError","CustomAggregateError","kIsNodeError","kTypes","classRegExp","nodeInternalPrefix","ERR_INTERNAL_ASSERTION","addNumericalSeparator","getMessage","match","E","Base","NodeError","defineProperties","hidden","innerError","outerError","errors","expected","actual","endsWith","types","instances","other","pos","last","_actual$constructor","inspected","colors","TypeError","input","_value$constructor","range","received","isInteger","RangeError","el","sep","ArrayPrototypePop","thisArgs","hasInstance","isNaN","MIN_SAFE_INTEGER","props","prop","getOwnPropertyDescriptor","proto","setPrototypeOf","PromisePrototypeCatch","thenFn","catchFn","ReflectApply","RegExpPrototypeTest","Set","toUpperCase","trim","asyncIterator","AsyncFunction","getPrototypeOf","rej","promisify","debuglog","_unused","replacement","toFixed","ctor","is","custom","customPromisify","ERR_ILLEGAL_CONSTRUCTOR","utils","pl","lastArg"],"sourceRoot":""}